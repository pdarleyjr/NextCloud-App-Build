(()=>{var e,n,a,o={273:(t,e,n)=>{var a=n(3748);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("3051087b",a,!1,{})},450:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.app-nav-new-item[data-v-733acb55] {\n\topacity: .8;\n}\n.app-nav-new-item[data-v-733acb55]:hover,\n.app-nav-new-item[data-v-733acb55]:active {\n\topacity: 1;\n}\n\n/* always show three dots menu */\n[data-v-733acb55] .app-navigation-entry__utils .action-item.app-navigation-entry__actions {\n\tdisplay: inline-block;\n}\n.app-nav-actions-input[data-v-733acb55] {\n\tmax-width: 16em;\n}\n","",{version:3,sources:["webpack://./src/components/Navigation2.vue"],names:[],mappings:";AA4NA;CACA,WAAA;AACA;AAEA;;CAEA,UAAA;AACA;;AAEA,gCAAA;AACA;CACA,qBAAA;AACA;AAEA;CACA,eAAA;AACA",sourcesContent:['<script setup>\nimport {ref, onMounted} from \'vue\'\n\nimport IconCog from "vue-material-design-icons/Cog.vue";\nimport IconEarth from "vue-material-design-icons/Earth.vue"\nimport IconEarthOff from "vue-material-design-icons/EarthOff.vue"\nimport IconLink from "vue-material-design-icons/LinkVariant.vue";\nimport IconPencil from "vue-material-design-icons/Pencil.vue";\nimport IconPlus from "vue-material-design-icons/Plus.vue";\nimport IconWeb from "vue-material-design-icons/Web.vue";\nimport IconWebOff from "vue-material-design-icons/WebOff.vue";\nimport IconDelete from "vue-material-design-icons/Delete.vue";\nimport IconDirectory from "vue-material-design-icons/CardSearchOutline.vue";\nimport {\n\tNcActionButton,\n\tNcActionInput,\n\tNcAppNavigation,\n\tNcAppNavigationItem,\n\tNcAppNavigationNew,\n\tNcLoadingIcon\n} from "@nextcloud/vue";\nimport {usePagesStore} from "../stores/pages";\nimport PageUrlModal from "./modals/PageUrlModal.vue";\nimport {MODAL} from "../use/constants";\n\nconst LOADING_PAGES = "p"\nconst LOADING_LABEL = "l"\nconst LOADING_DIR = "d"\nconst LOADING_SHARE = "s"\n\nconst emit = defineEmits([\'show-page\', \'show-settings\', \'show-settings-modal\'])\n\nconst showPageUrlData = ref(null)\n\nconst pagesStore = usePagesStore()\n\nonMounted(() => {\n\tpagesStore.getAllPages(LOADING_PAGES)\n})\n\nconst handleShowPageUrl = (pageId, label) => {\n\tshowPageUrlData.value = {\n\t\tpageId: pageId,\n\t\tlabel: label\n\t}\n}\nconst handleLabelSubmit = (pageId, evt) => {\n\tif (pageId && evt.target) {\n\t\tconst input = evt.target.querySelector(\'input[type="text"]\')\n\t\tif (input) {\n\t\t\tpagesStore.updatePageLabel(pageId, input.value, LOADING_LABEL)\n\t\t}\n\t}\n}\n\nconst handleShowPage = (pageId) => {\n\tif (!pagesStore.loading) {\n\t\temit(\'show-page\', pageId)\n\t}\n}\n\nconst handleDeletePage = (pageId) => {\n\tif (!confirm(t(\'appointments\', \'Delete action cannot be undone. Proceed?\'))) {\n\t\treturn\n\t}\n\tpagesStore.deletePage(pageId, pageId).then(res => {\n\t\tif (res !== null) {\n\t\t\temit(\'show-page\', \'-1\')\n\t\t}\n\t})\n}\n\nconst handleAddNewPage = () => {\n\tpagesStore.addNewPage(LOADING_PAGES).then(res => {\n\t\tif (res.status === 202) {\n\t\t\temit(\'show-settings-modal\', {\n\t\t\t\ttype: MODAL.CONTRIBUTION,\n\t\t\t\tmessage: res.data.message\n\t\t\t})\n\t\t}\n\t})\n}\n\nconst handleEnablePage = (pageId) => {\n\tpagesStore.toggleEnabled(pageId, pageId).then(res => {\n\t\temit(\'show-page\', pageId)\n\t\tif (res.status === 202) {\n\t\t\temit(\'show-settings-modal\', {\n\t\t\t\ttype: res.data.type,\n\t\t\t\tmessage: res.data.message\n\t\t\t})\n\t\t}\n\t})\n}\n\nconst handleActionsMenu = (pageId, evt) => {\n\tif (evt === true) {\n\t\temit(\'show-page\', pageId, false)\n\t}\n}\n\n<\/script>\n\n<template>\n\t<NcAppNavigation>\n\t\t<template #list>\n\t\t\t<NcAppNavigationItem\n\t\t\t\t\tv-for="page in pagesStore.pages"\n\t\t\t\t\t:key="page.id"\n\t\t\t\t\t:name="page.label"\n\t\t\t\t\t:loading="pagesStore.loading===page.id"\n\t\t\t\t\t@update:menuOpen="(evt)=>{handleActionsMenu(page.id,evt)}"\n\t\t\t\t\t@click="handleShowPage(page.id)">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconEarth v-if="pagesStore.loading!==page.id && page.enabled" :size="20"/>\n\t\t\t\t\t<IconEarthOff v-if="pagesStore.loading!==page.id && !page.enabled" :size="20"/>\n\t\t\t\t</template>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t:disabled="!!pagesStore.loading"\n\t\t\t\t\t\t\t@click="handleEnablePage(page.id)"\n\t\t\t\t\t\t\t:close-after-click="true">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconWebOff v-if="page.enabled" :size="20"/>\n\t\t\t\t\t\t\t<IconWeb v-else :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{\n\t\t\t\t\t\t\tpage.enabled\n\t\t\t\t\t\t\t\t\t? t(\'appointments\', \'Stop sharing (disable)\')\n\t\t\t\t\t\t\t\t\t: t(\'appointments\', \'Publish online (enable)\')\n\t\t\t\t\t\t}}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t@click="handleShowPageUrl(page.id,page.label)"\n\t\t\t\t\t\t\t:close-after-click="true">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconLink :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t(\'appointments\', \'Show URL/link\') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t<NcActionInput\n\t\t\t\t\t\t\t:disabled="!!pagesStore.loading"\n\t\t\t\t\t\t\tclass="app-nav-actions-input"\n\t\t\t\t\t\t\t@submit="(evt)=>{handleLabelSubmit(page.id, evt)}"\n\t\t\t\t\t\t\t:value="page.label">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<NcLoadingIcon v-if="pagesStore.loading===LOADING_LABEL" :size="20"/>\n\t\t\t\t\t\t\t<IconPencil v-else :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcActionInput>\n\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t:disabled="!!pagesStore.loading"\n\t\t\t\t\t\t\t@click="emit(\'show-settings\',page.id)"\n\t\t\t\t\t\t\t:close-after-click="true">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconCog :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t(\'appointments\', \'Settings\') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t:disabled="!!pagesStore.loading"\n\t\t\t\t\t\t\t@click="handleDeletePage(page.id)"\n\t\t\t\t\t\t\t:close-after-click="true">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconDelete :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t(\'appointments\', \'Delete Page\') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\t\t\t<NcAppNavigationItem\n\t\t\t\t\tv-if="pagesStore.dirPage.showInNavigation"\n\t\t\t\t\t:name="pagesStore.dirPage.label"\n\t\t\t\t\t:loading="pagesStore.loading===LOADING_DIR"\n\t\t\t\t\t@update:menuOpen="(evt)=>{handleActionsMenu(pagesStore.dirPage.id,evt)}"\n\t\t\t\t\t@click="handleShowPage(pagesStore.dirPage.id)">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<IconDirectory :size="24"/>\n\t\t\t\t</template>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t@click="handleShowPageUrl(pagesStore.dirPage.id, pagesStore.dirPage.label)"\n\t\t\t\t\t\t\t:close-after-click="true">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconLink :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t(\'appointments\', \'Show URL/link\') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t:disabled="!!pagesStore.loading"\n\t\t\t\t\t\t\t@click="emit(\'show-settings\',pagesStore.dirPage.id)"\n\t\t\t\t\t\t\t:close-after-click="true">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconCog :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t(\'appointments\', \'Settings\') }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\t\t\t<NcAppNavigationNew\n\t\t\t\t\t:disabled="!!pagesStore.loading"\n\t\t\t\t\tclass="app-nav-new-item"\n\t\t\t\t\t:text="t(\'appointments\', \'Add New Page\')"\n\t\t\t\t\t@click="handleAddNewPage">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcLoadingIcon v-if="pagesStore.loading===LOADING_PAGES" :size="20"/>\n\t\t\t\t\t<IconPlus v-else :size="20"/>\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationNew>\n\t\t</template>\n\t\t<PageUrlModal\n\t\t\t\tv-if="showPageUrlData!==null"\n\t\t\t\t:page-data.sync="showPageUrlData"\n\t\t\t\t@show-warning="(data)=>{showPageUrlData=null;emit(\'show-settings-modal\',data)}"\n\t\t/>\n\t</NcAppNavigation>\n</template>\n\n<style scoped>\n\n.app-nav-new-item {\n\topacity: .8;\n}\n\n.app-nav-new-item:hover,\n.app-nav-new-item:active {\n\topacity: 1;\n}\n\n/* always show three dots menu */\n>>> .app-navigation-entry__utils .action-item.app-navigation-entry__actions {\n\tdisplay: inline-block;\n}\n\n.app-nav-actions-input {\n\tmax-width: 16em;\n}\n</style>'],sourceRoot:""}]);const r=i},485:(t,e,n)=>{var a=n(3214);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("bf105f20",a,!1,{})},646:(t,e,n)=>{var a=n(3607);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("5935971e",a,!1,{})},676:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n[data-v-6acc3854] .checkbox-radio-switch__content {\n\tmin-height: 32px;\n}\n","",{version:3,sources:["webpack://./src/components/PsCheckbox.vue"],names:[],mappings:";AAiBA;CACA,gBAAA;AACA",sourcesContent:['<script setup>\nimport {NcCheckboxRadioSwitch} from "@nextcloud/vue";\n\nconst props = defineProps({\n\tlabel: String\n})\n<\/script>\n\n<template>\n\t<NcCheckboxRadioSwitch\n\t\t\tv-bind="$attrs"\n\t\t\tv-on="$listeners">\n\t\t{{ label }}\n\t</NcCheckboxRadioSwitch>\n</template>\n\n<style scoped>\n>>> .checkbox-radio-switch__content {\n\tmin-height: 32px;\n}\n</style>'],sourceRoot:""}]);const r=i},1033:(t,e,n)=>{var a=n(450);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("48b8926e",a,!1,{})},1348:(t,e,n)=>{var a=n(9377);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("2d5ab024",a,!1,{})},1755:(t,e,n)=>{var a=n(5706);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("b75c876a",a,!1,{})},1826:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.dialog .preview-button[data-v-01c49de5] {\n\tposition: absolute;\n\ttop: 3px;\n\tleft: 1em;\n\tfont-size: 84%;\n\topacity: .85;\n}\n.dialog .preview-button[data-v-01c49de5]:hover {\n\topacity: 1\n}\n.dialog .preview-button[data-v-01c49de5] .button-vue__text {\n\tfont-weight: normal;\n}\n\n/* TODO: remove when ':show-navigation' prop is fixed */\n.hide-navigation[data-v-01c49de5] .app-settings__navigation {\n\tdisplay: none;\n}\n.app-settings-section[data-v-01c49de5] {\n\tmargin-bottom: 64px;\n}\n","",{version:3,sources:["webpack://./src/components/settings-v2/Settings.vue"],names:[],mappings:";AAuPA;CACA,kBAAA;CACA,QAAA;CACA,SAAA;CACA,cAAA;CACA,YAAA;AACA;AAEA;CACA;AACA;AAEA;CACA,mBAAA;AACA;;AAEA,uDAAA;AACA;CACA,aAAA;AACA;AAEA;CACA,mBAAA;AACA",sourcesContent:['<script setup>\nimport {\n\tNcAppSettingsDialog,\n\tNcAppSettingsSection,\n\tNcLoadingIcon,\n\tNcButton, NcTextField\n} from "@nextcloud/vue"\nimport IconPreview from "vue-material-design-icons/MonitorEye.vue";\nimport SectionAdvanced from "./SectionAdvanced.vue";\nimport SectionBbb from "./SectionBbb.vue";\nimport SectionCalendars from "./SectionCalendars.vue";\nimport SectionContact from "./SectionContact.vue";\nimport SectionEmail from "./SectionEmail.vue";\nimport SectionPage from "./SectionPage.vue";\nimport SectionReminders from "./SectionReminders.vue";\nimport SectionTalk from "./SectionTalk.vue";\nimport SettingsDir from "./SettingsDir.vue";\nimport SettingsService2 from "../../services/SettingsService2";\nimport {CK} from "../../use/constants";\nimport {isDir} from "../../stores/settings_utils";\nimport {onMounted, ref, provide, readonly, computed, watch} from "vue";\nimport {parsePageUrls} from "../../use/utils";\nimport {showError} from "@nextcloud/dialogs";\nimport {usePagesStore} from "../../stores/pages";\nimport {useSettingsStore, LOADING_ALL, readOnlyProps} from "../../stores/settings";\nimport SectionSecurity from "./SectionSecurity.vue";\n\nconst settingsStore = useSettingsStore()\n\nconst pagesStore = usePagesStore()\n\nconst emit = defineEmits([\'close-settings\', \'show-timeslot-editor\', \'show-settings-modal\'])\n\nconst props = defineProps({\n\tpageId: {\n\t\ttype: String,\n\t\trequired: true\n\t}\n})\n\nconst _isDir = isDir(props.pageId)\n\nprovide(\'pageId\', props.pageId)\n\nconst label = computed(() => _isDir\n\t\t? t(\'appointments\', \'Directory Page\')\n\t\t: pagesStore.getPageById(props.pageId).label\n)\n\nonMounted(() => {\n\tsettingsStore.getAllSettings(props.pageId).then((res) => {\n\t\tif (res === false) {\n\t\t\thandleUpdateOpen(false)\n\t\t}\n\t})\n})\n\nconst handleUpdateOpen = (evt) => {\n\tif (evt === false) {\n\t\tsettingsStore.cancelServiceRequest(CK.SETTINGS)\n\t\temit(\'close-settings\')\n\t}\n}\n\nlet pageUrl = ref(\'\')\nconst handleShowPreview = () => {\n\tpageUrl.value = \'loading\'\n\tconst settingsService = new SettingsService2()\n\tsettingsService.getPageUrl(props.pageId).then(res => {\n\t\tif (res !== null) {\n\t\t\tconst urls = parsePageUrls(res.data)\n\t\t\tif (urls !== null) {\n\t\t\t\tpageUrl.value = urls[0]\n\t\t\t}\n\t\t}\n\t})\n}\nwatch(pageUrl, (url) => {\n\tif (url !== \'\' && url !== \'loading\') {\n\t\twindow.open(url, \'appointment_setting_preview\').focus()\n\t}\n})\n\nconst handleCKey = () => {\n\tsettingsStore.setOldValue(\'__ckey\', \'\')\n\tsettingsStore.setOne(\'__ckey\', settingsStore.settings.__ckey, false,\n\t\t\t(res) => {\n\t\t\t\tif (res !== null && res.status === 200) {\n\t\t\t\t\talert(t(\'appointments\', \'Thank You\')\n\t\t\t\t\t\t\t+ "\\n"\n\t\t\t\t\t\t\t+ t(\'appointments\', \'Key accepted. All contributor only features are unlocked.\'))\n\t\t\t\t\tsettingsStore.settings.__ckey = \'\'\n\t\t\t\t\tsettingsStore.k = true\n\t\t\t\t} else {\n\t\t\t\t\tshowError(t(\'appointments\', "Error: Please check key"))\n\t\t\t\t}\n\t\t\t}\n\t)\n}\n\n<\/script>\n\n<template>\n\t<div>\n\t\t<NcAppSettingsDialog\n\t\t\t\t:name="label"\n\t\t\t\t:open="!!pageId"\n\t\t\t\t:class="{\'hide-navigation\':settingsStore.loading[LOADING_ALL]}"\n\t\t\t\t@update:open="handleUpdateOpen"\n\t\t\t\t:show-navigation="!settingsStore.loading[LOADING_ALL]">\n\t\t\t<template>\n\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\tv-if="settingsStore.loading[LOADING_ALL]"\n\t\t\t\t\t\tid="loading"\n\t\t\t\t\t\tstyle="text-align: center"\n\t\t\t\t\t\t:name="t(\'appointments\',\'Loading Settings\')">\n\t\t\t\t\t<div style="margin-bottom: 2em;">\n\t\t\t\t\t\t<NcLoadingIcon :size="64"/>\n\t\t\t\t\t</div>\n\t\t\t\t</NcAppSettingsSection>\n\t\t\t\t<template v-if="!settingsStore.loading[LOADING_ALL]">\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\t\tclass="preview-button"\n\t\t\t\t\t\t\t:aria-label="t(\'appointments\',\'Preview Changes\')"\n\t\t\t\t\t\t\t:readonly="readonly"\n\t\t\t\t\t\t\t:disabled="pageUrl===\'loading\'"\n\t\t\t\t\t\t\t@click="handleShowPreview"\n\t\t\t\t\t\t\ttype="tertiary-no-background">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<NcLoadingIcon v-if="pageUrl===\'loading\'" :size="20"/>\n\t\t\t\t\t\t\t<IconPreview v-else :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t(\'appointments\', \'Preview Changes\') }}\n\t\t\t\t\t</NcButton>\n\n\t\t\t\t\t<template v-if="_isDir===false">\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tid="calendars"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Calendars and Schedule\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Manage appointments and calendar settings\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionCalendars\n\t\t\t\t\t\t\t\t\t@show-settings-modal="(data)=>{emit(\'show-settings-modal\',data)}"\n\t\t\t\t\t\t\t\t\t@show-timeslot-editor="(data)=>{emit(\'show-timeslot-editor\',data)}"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tid="contact"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Contact Information\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Form header and event organizer settings\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionContact/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tid="email"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Email and Notifications\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Control when emails and notifications are sent\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionEmail/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tid="page_and_form"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Form Settings\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Control what your visitors see\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionPage/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tid="security"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Security\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Security related settings\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionSecurity/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tid="reminders"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Reminders\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Send appointment reminders to attendees\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionReminders @show-settings-modal="(data)=>{emit(\'show-settings-modal\',data)}"/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tv-if="readOnlyProps[\'talk_integration_disabled\']===false"\n\t\t\t\t\t\t\t\tid="talk"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Talk Integration\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Talk room settings for appointments\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionTalk @show-settings-modal="(data)=>{emit(\'show-settings-modal\',data)}"/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tv-if="readOnlyProps[\'bbb_integration_disabled\']===false"\n\t\t\t\t\t\t\t\tid="bbb"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Video Integration\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Video room settings for appointments\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionBbb/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tid="advanced"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Advanced\')">\n\t\t\t\t\t\t\t<h4 class="ps-section-subtitle">\n\t\t\t\t\t\t\t\t{{ t(\'appointments\', \'Advanced settings and configurations\') }}\n\t\t\t\t\t\t\t</h4>\n\t\t\t\t\t\t\t<SectionAdvanced/>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\n\t\t\t\t\t\t<NcAppSettingsSection\n\t\t\t\t\t\t\t\tid="ckey"\n\t\t\t\t\t\t\t\tv-if="settingsStore.k ===false && settingsStore.settings.__ckey!==undefined"\n\t\t\t\t\t\t\t\t:name="t(\'appointments\',\'Contributor Key\')">\n\t\t\t\t\t\t\t<div class="ps-section-wrap">\n\t\t\t\t\t\t\t\t<NcTextField\n\t\t\t\t\t\t\t\t\t\t:label="settingsStore.loading[\'__ckey\'] === true?t(\'appointments\',\'Verifying key\'):t(\'appointments\',\'Enter key\')"\n\t\t\t\t\t\t\t\t\t\tclass="ps-text-field  ps-vert-spacing"\n\t\t\t\t\t\t\t\t\t\t@trailing-button-click="handleCKey"\n\t\t\t\t\t\t\t\t\t\t@keyup.enter="handleCKey"\n\t\t\t\t\t\t\t\t\t\t:value.sync="settingsStore.settings.__ckey"\n\t\t\t\t\t\t\t\t\t\t:disabled="settingsStore.loading[\'__ckey\'] === true"\n\t\t\t\t\t\t\t\t\t\t:showTrailingButton="true"\n\t\t\t\t\t\t\t\t\t\ttrailingButtonIcon="arrowRight"/>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</NcAppSettingsSection>\n\t\t\t\t\t</template>\n\t\t\t\t\t<SettingsDir v-else/>\n\t\t\t\t</template>\n\t\t\t</template>\n\t\t</NcAppSettingsDialog>\n\t</div>\n</template>\n\n<style scoped>\n.dialog .preview-button {\n\tposition: absolute;\n\ttop: 3px;\n\tleft: 1em;\n\tfont-size: 84%;\n\topacity: .85;\n}\n\n.dialog .preview-button:hover {\n\topacity: 1\n}\n\n.dialog .preview-button >>> .button-vue__text {\n\tfont-weight: normal;\n}\n\n/* TODO: remove when \':show-navigation\' prop is fixed */\n.hide-navigation >>> .app-settings__navigation {\n\tdisplay: none;\n}\n\n.app-settings-section {\n\tmargin-bottom: 64px;\n}\n</style>'],sourceRoot:""}]);const r=i},2065:()=>{},2114:(t,e,n)=>{var a=n(5241);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("63ad35bf",a,!1,{})},2127:(t,e,n)=>{var a=n(1826);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("9f02da54",a,!1,{})},2414:(t,e,n)=>{var a=n(7923);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("7f0bf03a",a,!1,{})},3138:(t,e,n)=>{var a=n(3781);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("1f92bc30",a,!1,{})},3214:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.no-page-selected[data-v-7edcdc5d] {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 250%;\n\topacity: .5;\n\tfont-weight: bold;\n\twidth: 100%;\n\theight: 100%;\n}\n.page-loading-spinner[data-v-7edcdc5d] {\n\tdisplay: inline-flex !important;\n\tvertical-align: middle;\n\tmargin-right: .25em;\n\tmargin-left: -0.75em;\n}\n.page-disabled-preview-tag[data-v-7edcdc5d]{\n\tcolor: darkred;\n\tfont-weight: bold;\n}\n","",{version:3,sources:["webpack://./src/App2.vue"],names:[],mappings:";AA6IA;CACA,aAAA;CACA,sBAAA;CACA,mBAAA;CACA,uBAAA;CACA,eAAA;CACA,WAAA;CACA,iBAAA;CACA,WAAA;CACA,YAAA;AACA;AAEA;CACA,+BAAA;CACA,sBAAA;CACA,mBAAA;CACA,oBAAA;AACA;AACA;CACA,cAAA;CACA,iBAAA;AACA",sourcesContent:['<script setup>\nimport {reactive} from "vue";\nimport {\n\tNcContent,\n\tNcAppContent,\n\tNcLoadingIcon\n} from \'@nextcloud/vue\'\nimport Navigation2 from "./components/Navigation2.vue";\nimport Settings from "./components/settings-v2/Settings.vue";\nimport TimeSlotEditor from "./components/views/TimeSlotEditor.vue";\nimport SettingsInfoModal from "./components/modals/SettingsInfoModal.vue";\nimport {CONTEXT, MODAL} from "./use/constants";\nimport {usePagesStore} from "./stores/pages";\n\nconst pagesStore = usePagesStore();\n\nconst state = reactive({\n\tsettingsPageId: \'\',\n\tcontext: CONTEXT.PREVIEW,\n\tcontextData: null,\n\tmodalData: {\n\t\ttype: MODAL.NONE,\n\t\tmessage: \'\'\n\t}\n})\n\nconst handleShowSettingsInfoModal = (data) => {\n\tstate.modalData.type = data.type;\n\tstate.modalData.message = data.message\n}\n\nconst handleCloseSettings = () => {\n\tif (state.settingsPageId !== \'\') {\n\t\tshowPage(state.settingsPageId)\n\t}\n\tstate.settingsPageId = \'\';\n}\n\n/**\n * @param {string} pageId\n * @param {boolean} [reload=true]\n */\nconst showPage = (pageId, reload = true) => {\n\tstate.context = CONTEXT.PREVIEW\n\tif (pageId === \'-1\') {\n\t\tstate.contextData = null\n\t} else {\n\n\t\tif (reload === false && state.contextData && state.contextData.pageUrl\n\t\t\t\t&& state.contextData.pageUrl.includes(\'p=\' + pageId + \'&\')) {\n\t\t\treturn\n\t\t}\n\n\t\tif (pageId[0] === \'p\') {\n\t\t\tstate.contextData = {\n\t\t\t\tpageLoading: true,\n\t\t\t\tpageUrl: \'form?p=\' + pageId + \'&v=\' + Date.now(),\n\t\t\t\t...pagesStore.getPageById(pageId)\n\t\t\t}\n\t\t} else {\n\t\t\tstate.contextData = {\n\t\t\t\tpageLoading: true,\n\t\t\t\tpageUrl: \'dir?p=\' + pageId + \'&v=\' + Date.now(),\n\t\t\t\t...pagesStore.dirPage\n\t\t\t}\n\t\t}\n\t}\n}\n\n/** @param {string} pageId */\nconst showSettings = (pageId) => {\n\tstate.settingsPageId = pageId\n}\n\nlet lastPageId = \'-1\'\nconst showTimeSlotEditor = (data) => {\n\tlastPageId = state.settingsPageId || \'-1\'\n\tstate.settingsPageId = \'\'\n\tstate.context = CONTEXT.EDITOR\n\tstate.contextData = data\n}\n\nconst handleHideTimeslotEditor = () => {\n\tshowPage(lastPageId || \'-1\')\n}\n\n<\/script>\n\n<template>\n\t<NcContent app-name="appointments">\n\t\t<Navigation2\n\t\t\t\t@show-page="showPage"\n\t\t\t\t@show-settings-modal="handleShowSettingsInfoModal"\n\t\t\t\t@show-settings="showSettings"/>\n\t\t<NcAppContent style="position: relative">\n\t\t\t<div style="height: 100%" v-if="state.context===CONTEXT.PREVIEW">\n\t\t\t\t<div v-if="state.contextData===null" class="no-page-selected">\n\t\t\t\t\t{{ t(\'appointments\', \'Please select or create a page\') }}\n\t\t\t\t</div>\n\t\t\t\t<template v-else>\n\t\t\t\t\t<div class="srgdev-appt-main-info">\n\t\t\t\t\t\t<NcLoadingIcon\n\t\t\t\t\t\t\t\tv-if="state.contextData.pageLoading"\n\t\t\t\t\t\t\t\tclass="page-loading-spinner"\n\t\t\t\t\t\t\t\t:size="18"/>\n\t\t\t\t\t\t<span>{{ state.contextData.label + \' \' + t(\'appointments\', \'Preview\') }}</span>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="page-disabled-preview-tag"\n\t\t\t\t\t\t\t\tv-if="state.contextData.enabled === false"> {{ t(\'appointments\', \'Page Is Not Enabled\') }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="srgdev-appt-main-frame-cont">\n\t\t\t\t\t\t<iframe\n\t\t\t\t\t\t\t\tclass="srgdev-appt-main-frame"\n\t\t\t\t\t\t\t\t@load="state.contextData.pageLoading=false"\n\t\t\t\t\t\t\t\tref="pubPageRef"\n\t\t\t\t\t\t\t\t:src="state.contextData.pageUrl"></iframe>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</div>\n\t\t\t<TimeSlotEditor\n\t\t\t\t\tv-if="state.context===CONTEXT.EDITOR"\n\t\t\t\t\t:data="state.contextData"\n\t\t\t\t\t@hide-timeslot-editor="handleHideTimeslotEditor"\n\t\t\t/>\n\t\t</NcAppContent>\n\t\t<Settings\n\t\t\t\tstyle="z-index: 9998"\n\t\t\t\tv-if="!!state.settingsPageId"\n\t\t\t\t:page-id="state.settingsPageId"\n\t\t\t\t@close-settings="handleCloseSettings"\n\t\t\t\t@show-settings-modal="handleShowSettingsInfoModal"\n\t\t\t\t@show-timeslot-editor="showTimeSlotEditor"/>\n\t\t<SettingsInfoModal\n\t\t\t\tv-if="state.modalData.type!==MODAL.NONE"\n\t\t\t\t:data="state.modalData"\n\t\t\t\t@hide-settings-modal="()=>{state.modalData.type=MODAL.NONE}"/>\n\t</NcContent>\n</template>\n\n<style scoped>\n.no-page-selected {\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tfont-size: 250%;\n\topacity: .5;\n\tfont-weight: bold;\n\twidth: 100%;\n\theight: 100%;\n}\n\n.page-loading-spinner {\n\tdisplay: inline-flex !important;\n\tvertical-align: middle;\n\tmargin-right: .25em;\n\tmargin-left: -0.75em;\n}\n.page-disabled-preview-tag{\n\tcolor: darkred;\n\tfont-weight: bold;\n}\n</style>'],sourceRoot:""}]);const r=i},3607:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.flex-wrapper[data-v-669b0236] {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n.wrapper-label[data-v-669b0236] {\n\tdisplay: inline-block;\n\toverflow: hidden;\n\tvertical-align: middle;\n}\n.wrapper-label-accordion[data-v-669b0236],\n.wrapper-label-accordion > .wrapper-label-arrow[data-v-669b0236],\n.wrapper-label-accordion > .wrapper-label-text[data-v-669b0236] {\n\tcursor: pointer;\n}\n.wrapper-label-text[data-v-669b0236] {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n.wrapper-label-text-open[data-v-669b0236] {\n\tfont-weight: bold;\n}\n.wrapper-label-arrow[data-v-669b0236],\n.wrapper-label-loading[data-v-669b0236] {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n.wrapper-label-arrow[data-v-669b0236] {\n\t//margin-left: -8px;\n\tmargin-right: .5em;\n}\n.wrapper-label-arrow[data-v-669b0236] .material-design-icon {\n\tcursor: pointer;\n}\n.wrapper-label-loading[data-v-669b0236] {\n\tmargin-left: .125em;\n}\n.wrapper-help-icon[data-v-669b0236] {\n\tcursor: pointer;\n\topacity: .5;\n}\n.wrapper-help-content[data-v-669b0236] {\n\tpadding: .5em;\n\tmax-width: 32em;\n}\n.flex-wrapper:hover .wrapper-help-icon[data-v-669b0236] {\n\topacity: 1;\n}\n.wrapper-slot[data-v-669b0236] {\n\tmargin-top: .5em;\n\tmargin-left: 2.25em;\n}\n\n","",{version:3,sources:["webpack://./src/components/LabelAccordion.vue"],names:[],mappings:";AA2EA;CACA,aAAA;CACA,mBAAA;CACA,8BAAA;AACA;AAEA;CACA,qBAAA;CACA,gBAAA;CACA,sBAAA;AACA;AAEA;;;CAGA,eAAA;AACA;AAEA;CACA,qBAAA;CACA,sBAAA;AACA;AAEA;CACA,iBAAA;AACA;AAEA;;CAEA,qBAAA;CACA,sBAAA;AACA;AAEA;CACA,mBAAA;CACA,kBAAA;AACA;AAEA;CACA,eAAA;AACA;AAEA;CACA,mBAAA;AACA;AAEA;CACA,eAAA;CACA,WAAA;AACA;AAEA;CACA,aAAA;CACA,eAAA;AACA;AAEA;CACA,UAAA;AACA;AAEA;CACA,gBAAA;CACA,mBAAA;AACA",sourcesContent:['<script setup>\nimport IconMenu from "vue-material-design-icons/MenuSwapOutline.vue";\nimport IconInfo from "vue-material-design-icons/InformationOutline.vue";\nimport NcLoadingIcon from "@nextcloud/vue/dist/Components/NcLoadingIcon.js";\nimport {NcPopover} from "@nextcloud/vue"\nimport {ref, useSlots} from "vue";\n\nconst slots = useSlots()\n\nconst emit = defineEmits([\'open-accordion\'])\n\nconst props = defineProps({\n\tlabel: String,\n\tloading: Boolean,\n\taccordion: Boolean\n})\n\nconst isOpen = ref(false)\n\nconst toggleOpen = () => {\n\tif (props.accordion === true) {\n\t\tif (isOpen.value === false) {\n\t\t\temit(\'open-accordion\')\n\t\t}\n\t\tisOpen.value = !isOpen.value\n\t}\n}\n\n<\/script>\n\n<template>\n\t<div>\n\t\t<div class="flex-wrapper">\n\t\t\t<label\n\t\t\t\t\tv-bind="$attrs"\n\t\t\t\t\t@click="toggleOpen"\n\t\t\t\t\t:class="[\n\t\t\t\t\t\t\'wrapper-label\',\n\t\t\t\t\t\t{\'wrapper-label-accordion\':accordion}\n\t\t\t\t]">\n\t\t\t<span\n\t\t\t\t\tv-if="accordion"\n\t\t\t\t\tclass="wrapper-label-arrow">\n\t\t\t\t<slot name="accordionIcon">\n\t\t\t\t\t<IconMenu :size="24"/>\n\t\t\t\t</slot>\n\t\t\t</span>\n\t\t\t\t<span :class="[\'wrapper-label-text\',{\'wrapper-label-text-open\':isOpen}]">\n\t\t\t\t{{ label }}\n\t\t\t</span>\n\t\t\t\t<span v-if="loading" class="wrapper-label-loading">\n\t\t\t\t<NcLoadingIcon :size="16"/>\n\t\t\t</span>\n\t\t\t</label>\n\t\t\t<div v-if="slots?.helpPopover" class="wrapper-help">\n\t\t\t\t<NcPopover :focus-trap="false">\n\t\t\t\t\t<template #trigger>\n\t\t\t\t\t\t<IconInfo class="wrapper-help-icon" :size="16"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template>\n\t\t\t\t\t\t<div class="wrapper-help-content">\n\t\t\t\t\t\t\t<slot name="helpPopover"/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</NcPopover>\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if="accordion && isOpen"\n\t\t\t\t class="wrapper-slot">\n\t\t\t<slot/>\n\t\t</div>\n\t</div>\n</template>\n\n<style scoped>\n.flex-wrapper {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n}\n\n.wrapper-label {\n\tdisplay: inline-block;\n\toverflow: hidden;\n\tvertical-align: middle;\n}\n\n.wrapper-label-accordion,\n.wrapper-label-accordion > .wrapper-label-arrow,\n.wrapper-label-accordion > .wrapper-label-text {\n\tcursor: pointer;\n}\n\n.wrapper-label-text {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\n.wrapper-label-text-open {\n\tfont-weight: bold;;\n}\n\n.wrapper-label-arrow,\n.wrapper-label-loading {\n\tdisplay: inline-block;\n\tvertical-align: middle;\n}\n\n.wrapper-label-arrow {\n\t//margin-left: -8px;\n\tmargin-right: .5em;\n}\n\n.wrapper-label-arrow >>> .material-design-icon {\n\tcursor: pointer;\n}\n\n.wrapper-label-loading {\n\tmargin-left: .125em;\n}\n\n.wrapper-help-icon {\n\tcursor: pointer;\n\topacity: .5;\n}\n\n.wrapper-help-content {\n\tpadding: .5em;\n\tmax-width: 32em;\n}\n\n.flex-wrapper:hover .wrapper-help-icon {\n\topacity: 1;\n}\n\n.wrapper-slot {\n\tmargin-top: .5em;\n\tmargin-left: 2.25em;\n}\n\n</style>'],sourceRoot:""}]);const r=i},3748:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.editor-loading[data-v-797905e6] {\n\ttext-align: center;\n\tfont-size: 120%\n}\n.editor-hidden[data-v-797905e6] {\n\tvisibility: hidden\n}\n.editor-button-cont-flex[data-v-797905e6] {\n\tmargin: 1em 0;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n.editor-button[data-v-797905e6] {\n\tdisplay: inline-flex;\n}\n.editor-hint[data-v-797905e6] {\n\tposition: absolute;\n\tflex: 1;\n\tright: 2em;\n\ttop: 1.5em;\n\tfont-style: italic;\n\tfont-size: 75%;\n\tcolor: var(--color-text-light);\n\ttext-align: right;\n\tline-height: normal;\n}\n","",{version:3,sources:["webpack://./src/components/views/TimeSlotEditor.vue"],names:[],mappings:";AAsUA;CACA,kBAAA;CACA;AACA;AAEA;CACA;AACA;AAEA;CACA,aAAA;CACA,aAAA;CACA,uBAAA;AACA;AAEA;CACA,oBAAA;AACA;AAEA;CACA,kBAAA;CACA,OAAA;CACA,UAAA;CACA,UAAA;CACA,kBAAA;CACA,cAAA;CACA,8BAAA;CACA,iBAAA;CACA,mBAAA;AACA",sourcesContent:['<script setup>\nimport {MODAL, TS_MODE} from "../../use/constants";\nimport {\n\tNcActions,\n\tNcActionButton,\n\tNcActionInput,\n\tNcButton,\n\tNcLoadingIcon\n} from "@nextcloud/vue";\nimport IconPlus from "vue-material-design-icons/Plus.vue";\nimport IconDelete from "vue-material-design-icons/Delete.vue";\nimport IconCopyNext from "vue-material-design-icons/PageNextOutline.vue";\nimport gridMaker from "../../grid.js"\nimport {onMounted, reactive, nextTick, ref} from \'vue\'\nimport {useSettingsStore} from "../../stores/settings";\nimport WeeklyApptsEditorModal from "../modals/WeeklyApptsEditorModal.vue";\nimport SettingsInfoModal from "../modals/SettingsInfoModal.vue";\nimport SettingsService2 from "../../services/SettingsService2";\nimport {showError, showSuccess} from "@nextcloud/dialogs";\n\nconst COL_COUNT = 7\n\nconst emit = defineEmits([\'hide-timeslot-editor\'])\n\nconst store = useSettingsStore()\nconst settings = store.settings\n\nconst grid_cont = ref(null)\n\n/**\n * data is only set for Simple editor (in weekly template mode data is {})\n * @type {Readonly<ExtractPropTypes<{data: {\n *  tz:String,\n *  week:Number,\n *  dur:Number,\n *  pageId:String,\n *  calColor:String,\n *  calName:String\n * }}>>}\n */\nconst props = defineProps({\n\tdata: [Object, null]\n})\n\nconst gridMode = settings.tsMode === TS_MODE.TEMPLATE\n\t\t? gridMaker.MODE_TEMPLATE\n\t\t: gridMaker.MODE_SIMPLE\n\n// calculate grid shift for template, because a week can start on a different\n// day in different countries, in template data array 0 = Monday,\n// so when the week start on:\n//  Monday:   gridShift = 0\n//  Sunday:   gridShift = 1\n//  Saturday: gridShift = 2\n//\n// https://github.com/nextcloud/server/blob/62d83123d1272d2d042ec294c6d65cd79bbc05ca/lib/private/Template/JSConfigHelper.php#L251\nconst gridShift = window.firstDay === 0 ? 1 : window.firstDay === 6 ? 2 : 0\n\ngridMaker.resetAllColumns()\ngridMaker.setMode(gridMode)\n\nconst getStartDate = () => {\n\tif (gridMode === gridMaker.MODE_TEMPLATE) {\n\t\t// startDate must be 00:00 on a Monday\n\t\tconst startDate = new Date()\n\n\t\tstartDate.setHours(0, 0, 0)\n\t\tlet day = startDate.getDay()\n\t\tif (day === 0) {\n\t\t\tday++\n\t\t} else {\n\t\t\tday = 1 - day\n\t\t}\n\t\tstartDate.setDate(startDate.getDate() + day)\n\n\t\tif (gridShift !== 0) {\n\t\t\t// startDate is Monday 00:00:00 in grid mode\n\t\t\t// we need to adjust because a week can start on Mon, Sun or Sat\n\t\t\tstartDate.setDate(startDate.getDate() - gridShift)\n\t\t}\n\n\t\treturn startDate\n\t} else {\n\t\t// MODE_SIMPLE\n\t\treturn new Date(props.data.week)\n\t}\n}\n\nconst editor = reactive({\n\t/** @type {{ts:number,txt:string,w:string,n:string,hasAppts:boolean}[]} */\n\theader: gridMaker.makeHeader(getStartDate(), COL_COUNT),\n\tmenuIndex: -1,\n\tsimpleLen: 0,\n\tsimpleTs: 0,\n\tmodalData: null,\n\tinfoModal: {\n\t\ttype: MODAL.NONE,\n\t\tdata: \'\',\n\t},\n\tloading: false\n})\n\nonMounted(() => {\n\n\tgridMaker.setup(grid_cont.value, COL_COUNT, \'srgdev-appt-grd-\')\n\n\tif (gridMode === gridMaker.MODE_TEMPLATE) {\n\t\tgridMaker.addPastAppts(settings.template_data, null, gridShift)\n\t\t//activate non-empty columns\n\t\tsettings.template_data.forEach((c, i) => {\n\t\t\tconst iMod = (i + gridShift) % COL_COUNT\n\t\t\tif (editor.header[iMod] !== undefined) {\n\t\t\t\teditor.header[iMod].hasAppts = c.length > 0\n\t\t\t}\n\t\t})\n\t} else {\n\n\t\teditor.loading = true\n\n\t\tconst startDate = getStartDate()\n\t\tconst pd = startDate.getDate() + "-" + (startDate.getMonth() + 1) + "-" + startDate.getFullYear()\n\n\t\tconst service = new SettingsService2()\n\t\tservice.getCalendarWeek(props.data.pageId, pd).then((res) => {\n\t\t\tif (res === null) {\n\t\t\t\tstate.error = t(\'appointments\', \'error: cannot load calendar data\');\n\t\t\t} else {\n\t\t\t\tgridMaker.addPastAppts(pd + String.fromCharCode(31) + res.data, props.data.calColor)\n\t\t\t}\n\t\t\teditor.loading = false\n\t\t})\n\t}\n\tnextTick(gridMaker.scrollGridToTopElm)\n})\n\nconst close = () => {\n\temit(\'hide-timeslot-editor\')\n}\n\nconst handleAddToCalendar = () => {\n\tconst tsa = gridMaker.getStarEnds(props.data.week, props.data.tz === \'UTC\')\n\tnew SettingsService2().addSimpleAppointments({\n\t\td: tsa.join(\',\'),\n\t\ttz: props.data.tz,\n\t\tp: props.data.pageId\n\t}).then(res => {\n\t\tif (res === null) {\n\t\t\tshowError(t(\'appointments\', "Can\'t add appointments to calendar"))\n\t\t} else {\n\t\t\tshowSuccess(t(\'appointments\', "Appointments added to {calendarName} calendar", {calendarName: props.data.calName}))\n\t\t\tclose()\n\t\t}\n\t})\n}\n\nconst saveTemplate = () => {\n\tstore.setOne(\'template_data\', gridMaker.getTemplateData(gridShift), false,\n\t\t\t(d) => {\n\t\t\t\tif (d !== null) {\n\t\t\t\t\temit(\'hide-timeslot-editor\')\n\t\t\t\t}\n\t\t\t})\n}\n\nconst editSingleAppt = (e) => {\n\teditor.modalData = {\n\t\telm: e.detail,\n\t\tgridShift: gridShift,\n\t\tk: store.k\n\t}\n}\n\nconst handleTemplateApptsEditor = (cid) => {\n\teditor.menuIndex = -1\n\teditor.modalData = {\n\t\tgridShift: gridShift,\n\t\telm: null,\n\t\tcid: cid,\n\t\tk: store.k\n\t}\n}\n\nconst handleTmplAddAppts = (evt) => {\n\teditor.modalData = null\n\tconst count = (isNaN(evt.count) || evt.count < 1) ? 1 : evt.count\n\tgridMaker.addAppt(0, evt.dur[0], count, evt.cid, evt)\n\teditor.header[evt.cid].hasAppts = true\n}\n\nconst handleSimpleAddAppts = (index) => {\n\tconst hd = editor.header[index]\n\tconst n = parseInt(hd.n)\n\tif (isNaN(n) || n < 1) {\n\t\tshowError(t(\'appointments\', \'Invalid number of appointments\'))\n\t\treturn\n\t}\n\teditor.menuIndex = -1\n\tconst dur = isNaN(props.data.dur) || props.data.dur < 5 ? 5 : props.data.dur\n\tgridMaker.addAppt(0, dur, n, index, props.data.calColor)\n\thd.hasAppts = true\n}\n\nconst gridApptsDel = (index) => {\n\teditor.menuIndex = -1\n\tgridMaker.resetColumn(index)\n\teditor.header[index].hasAppts = false\n}\n\nconst gridApptsCopy = (index) => {\n\teditor.menuIndex = -1\n\tconst color = props.data && props.data.calColor ? props.data.calColor : null\n\tgridMaker.cloneColumns(index, index + 1, color)\n\teditor.header[index + 1].hasAppts = true\n}\n\n<\/script>\n\n<template>\n\t<div class="srgdev-appt-grid-flex">\n\t\t<div v-show="gridMode===gridMaker.MODE_SIMPLE"\n\t\t\t\t class="srgdev-appt-cal-view-btns">\n\t\t\t<button @click="handleAddToCalendar" class="primary">\n\t\t\t\t{{ t(\'appointments\', \'Add to Calendar\') }}\n\t\t\t</button>\n\t\t\t<button @click="close">\n\t\t\t\t{{ t(\'appointments\', \'Discard\') }}\n\t\t\t</button>\n\t\t</div>\n\t\t<div v-show="gridMode===gridMaker.MODE_TEMPLATE"\n\t\t\t\t class="editor-button-cont-flex">\n\t\t\t<NcButton\n\t\t\t\t\tstyle="margin-right: 1em;overflow: hidden"\n\t\t\t\t\tclass="editor-button"\n\t\t\t\t\ttype="primary"\n\t\t\t\t\t:disabled="store.loading[\'template_data\']===true"\n\t\t\t\t\t@click="saveTemplate()">\n\t\t\t\t<template #icon v-if="store.loading[\'template_data\']===true">\n\t\t\t\t\t<NcLoadingIcon :size="20"/>\n\t\t\t\t</template>\n\t\t\t\t{{ t(\'appointments\', \'Save\') }}\n\t\t\t</NcButton>\n\t\t\t<NcButton\n\t\t\t\t\tstyle="margin-right: 3em"\n\t\t\t\t\tclass="editor-button"\n\t\t\t\t\t@click="close">\n\t\t\t\t{{ t(\'appointments\', \'Cancel\') }}\n\t\t\t</NcButton>\n\t\t\t<div class="editor-hint">\n\t\t\t\t{{ t(\'appointments\', \'Hint: right-click on an appointment to edit.\') }}<br>\n\t\t\t\t{{ t(\'appointments\', \'Time zone\') }}: {{ settings.template_info.tzName }}\n\t\t\t</div>\n\t\t</div>\n\t\t<div v-if="editor.loading===true" class="editor-loading">\n\t\t\tLoading...\n\t\t</div>\n\t\t<div class="srgdev-appt-grid-flex-lower"\n\t\t\t\t :class="{\'editor-hidden\':editor.loading===true}">\n\t\t\t<ul class="srgdev-appt-grid-header">\n\t\t\t\t<li v-for="(hi, index) in editor.header"\n\t\t\t\t\t\tclass="srgdev-appt-gh-li"\n\t\t\t\t\t\t:style="{width:hi.w}">\n\t\t\t\t\t<div class="srgdev-appt-gh-txt">{{ hi.txt }}</div>\n\t\t\t\t\t<NcActions\n\t\t\t\t\t\t\tmenuAlign="right"\n\t\t\t\t\t\t\t:open="editor.menuIndex===index"\n\t\t\t\t\t\t\t@open="editor.menuIndex=index"\n\t\t\t\t\t\t\tclass="srgdev-appt-gh-act1">\n\t\t\t\t\t\t<NcActionInput\n\t\t\t\t\t\t\t\tv-if="gridMode===gridMaker.MODE_SIMPLE"\n\t\t\t\t\t\t\t\t:value.sync="hi.n"\n\t\t\t\t\t\t\t\t@submit="handleSimpleAddAppts(index)"\n\t\t\t\t\t\t\t\tclass="srgdev-appt-gh-act-inp"\n\t\t\t\t\t\t\t\ttype="number">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconPlus :size="20"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t</NcActionInput>\n\t\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t\tv-else\n\t\t\t\t\t\t\t\t:closeAfterClick="true"\n\t\t\t\t\t\t\t\t@click="handleTemplateApptsEditor(index)">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconPlus :size="20"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t(\'appointments\', \'Add Appointments\') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t\t:disabled="!hi.hasAppts"\n\t\t\t\t\t\t\t\t:closeAfterClick="true"\n\t\t\t\t\t\t\t\t@click="gridApptsDel(index)">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconDelete :size="20"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t(\'appointments\', \'Remove All\') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t\t:disabled="!hi.hasAppts"\n\t\t\t\t\t\t\t\t:closeAfterClick="true"\n\t\t\t\t\t\t\t\tv-if="index!==editor.header.length-1"\n\t\t\t\t\t\t\t\t@click="gridApptsCopy(index)">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconCopyNext :size="20"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t(\'appointments\', \'Copy to Next\') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t</NcActions>\n\t\t\t\t</li>\n\t\t\t</ul>\n\t\t\t<div @gridContext="editSingleAppt" ref="grid_cont" class="srgdev-appt-grid-cont"></div>\n\t\t</div>\n\t\t<WeeklyApptsEditorModal\n\t\t\t\tv-if="editor.modalData!==null"\n\t\t\t\t:data="editor.modalData"\n\t\t\t\t@tmpl-add-appts="handleTmplAddAppts"\n\t\t\t\t@tmpl-update-appt="(evt)=>{gridMaker.updateAppt(evt)}"\n\t\t\t\t@show-info-modal="(evt)=>{editor.infoModal=evt}"\n\t\t\t\t@close-modal="editor.modalData=null"/>\n\t\t<SettingsInfoModal\n\t\t\t\tv-if="editor.infoModal.type!==MODAL.NONE"\n\t\t\t\t:data="editor.infoModal"\n\t\t\t\t@hide-settings-modal="()=>{editor.infoModal.type=MODAL.NONE}"/>\n\t</div>\n</template>\n\n<style scoped>\n\n.editor-loading {\n\ttext-align: center;\n\tfont-size: 120%\n}\n\n.editor-hidden {\n\tvisibility: hidden\n}\n\n.editor-button-cont-flex {\n\tmargin: 1em 0;\n\tdisplay: flex;\n\tjustify-content: center;\n}\n\n.editor-button {\n\tdisplay: inline-flex;\n}\n\n.editor-hint {\n\tposition: absolute;\n\tflex: 1;\n\tright: 2em;\n\ttop: 1.5em;\n\tfont-style: italic;\n\tfont-size: 75%;\n\tcolor: var(--color-text-light);\n\ttext-align: right;\n\tline-height: normal;\n}\n</style>\n\n'],sourceRoot:""}]);const r=i},3781:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.tao-h4[data-v-6a35f61e] {\n\tfont-size: 100%;\n\tpadding: 0 0 1em 2em;\n\tborder-bottom: 1px solid var(--color-border);\n\tfont-weight: bold;\n\tmargin: 1em 0;\n}\n.dir-editor-spacer[data-v-6a35f61e] {\n\tmargin-bottom: 1.25em;\n}\n.dir-editor-dual-flex[data-v-6a35f61e] {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: .5em;\n\tmargin-bottom: 1.75em;\n}\n.dir-editor-btn[data-v-6a35f61e] {\n\tdisplay: inline-flex;\n\tmargin-right: 1em;\n}\n","",{version:3,sources:["webpack://./src/components/modals/DirItemEditorModal.vue"],names:[],mappings:";AAuJA;CACA,eAAA;CACA,oBAAA;CACA,4CAAA;CACA,iBAAA;CACA,aAAA;AACA;AAEA;CACA,qBAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,SAAA;CACA,qBAAA;AACA;AAEA;CACA,oBAAA;CACA,iBAAA;AACA",sourcesContent:['<script setup>\nimport {\n\tNcModal,\n\tNcTextField,\n\tNcActions,\n\tNcActionButton,\n\tNcButton,\n\tNcLoadingIcon\n} from "@nextcloud/vue";\nimport IconLinkPlus from "vue-material-design-icons/LinkVariantPlus.vue";\nimport IconWeb from "vue-material-design-icons/Web.vue";\nimport IconSave from "vue-material-design-icons/ContentSaveOutline.vue";\nimport IconCancel from "vue-material-design-icons/Cancel.vue";\nimport {INDEX} from "../../use/constants";\nimport {usePagesStore} from "../../stores/pages";\nimport {useSettingsStore} from "../../stores/settings";\nimport {ref} from "vue";\nimport {parsePageUrls} from "../../use/utils";\n\nconst pagesStore = usePagesStore()\nconst settingsStore = useSettingsStore()\n\nconst emit = defineEmits([\'close-modal\'])\nconst props = defineProps({\n\tindex: {\n\t\ttype: Number,\n\t\trequired: true,\n\t},\n})\n\nconst item = props.index !== INDEX.NEW && settingsStore.dirSettings.dirItems[props.index] !== undefined\n\t\t? {...settingsStore.dirSettings.dirItems[props.index]}\n\t\t: {\n\t\t\ttitle: \'\',\n\t\t\tsubTitle: \'\',\n\t\t\ttext: \'\',\n\t\t\turl: \'\',\n\t\t}\nconst urlRef = ref(item.url)\n\nconst handleSelectPageUrl = (pageId) => {\n\tpagesStore.getPageUrl(pageId, \'E_URL\').then(res => {\n\t\tif (res !== null) {\n\t\t\tconst urls = parsePageUrls(res.data)\n\t\t\tif (urls !== null) {\n\t\t\t\turlRef.value = urls[0]\n\t\t\t}\n\t\t}\n\t})\n}\n\nconst handelSaveItem = () => {\n\tconst cloned = settingsStore.dirSettings.dirItems.map(item => ({...item}))\n\titem.url = urlRef.value\n\tif (props.index === INDEX.NEW) {\n\t\tcloned.push(item)\n\t} else {\n\t\tcloned[props.index] = item\n\t}\n\n\t// we are using setOldValue because we want the spinner\n\tsettingsStore.setOldValue(\'dirItems\', settingsStore.dirSettings.dirItems)\n\n\tsettingsStore.setOne(\'dirItems\', cloned, false, (res) => {\n\t\tif (res !== null) {\n\t\t\tsettingsStore.dirSettings.dirItems = cloned\n\t\t\thandleUpdateShow(false)\n\t\t}\n\t})\n}\n\nconst handleUpdateShow = (evt) => {\n\tif (evt === false) {\n\t\temit(\'close-modal\')\n\t}\n}\n\n<\/script>\n\n<template>\n\t<NcModal\n\t\t\tstyle="z-index: 10002"\n\t\t\t:setReturnFocus="false"\n\t\t\t:closeOnClickOutside="false"\n\t\t\t@update:show="handleUpdateShow">\n\t\t<h4 class="tao-h4">{{ t(\'appointments\', \'Directory Item Editor\') }}</h4>\n\t\t<div class="srgdev-appt-modal-wrap" style="text-align: left">\n\t\t\t<NcTextField\n\t\t\t\t\t:value.sync="item.title"\n\t\t\t\t\tclass="dir-editor-spacer"\n\t\t\t\t\t:label="t(\'appointments\', \'Title\')"/>\n\t\t\t<NcTextField\n\t\t\t\t\t:value.sync="item.subTitle"\n\t\t\t\t\tclass="dir-editor-spacer"\n\t\t\t\t\t:label="t(\'appointments\', \'Subtitle\')"/>\n\t\t\t<NcTextField\n\t\t\t\t\t:value.sync="item.text"\n\t\t\t\t\tclass="dir-editor-spacer"\n\t\t\t\t\t:label="t(\'appointments\', \'Text\')"/>\n\t\t\t<div class="dir-editor-dual-flex">\n\t\t\t\t<NcTextField\n\t\t\t\t\t\t:disabled="pagesStore.loading!==\'\'"\n\t\t\t\t\t\t:value.sync="urlRef"\n\t\t\t\t\t\tstyle="margin-top: 0"\n\t\t\t\t\t\t:label="t(\'appointments\', \'URL\')"/>\n\t\t\t\t<NcActions\n\t\t\t\t\t\t:disabled="pagesStore.loading!==\'\'"\n\t\t\t\t\t\t:menu-name="t(\'appointments\', \'Select Page\')"\n\t\t\t\t\t\t:forceMenu="true">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcLoadingIcon v-if="pagesStore.loading===\'E_URL\'" :size="20"/>\n\t\t\t\t\t\t<IconLinkPlus v-else :size="20"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\tv-for="page in pagesStore.pages"\n\t\t\t\t\t\t\t:key="page.id"\n\t\t\t\t\t\t\t:closeAfterClick="true"\n\t\t\t\t\t\t\t@click="handleSelectPageUrl(page.id)">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconWeb :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ page.label }}\n\t\t\t\t\t</NcActionButton>\n\t\t\t\t</NcActions>\n\t\t\t</div>\n\t\t\t<div class="dir-editor-dual-flex">\n\t\t\t\t<NcButton\n\t\t\t\t\t\t:disabled="pagesStore.loading!==\'\' || settingsStore.loading[\'dirItems\']===true"\n\t\t\t\t\t\tclass="dir-editor-btn"\n\t\t\t\t\t\ttype="primary"\n\t\t\t\t\t\t@click="handelSaveItem">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcLoadingIcon v-if="settingsStore.loading[\'dirItems\']===true" :size="20"/>\n\t\t\t\t\t\t<IconSave v-else :size="20"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t(\'appointments\', \'Save\') }}\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton\n\t\t\t\t\t\tclass="dir-editor-btn"\n\t\t\t\t\t\t@click="handleUpdateShow(false)">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconCancel :size="20"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t(\'appointments\', \'Cancel\') }}\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t</div>\n\t</NcModal>\n</template>\n\n<style scoped>\n.tao-h4 {\n\tfont-size: 100%;\n\tpadding: 0 0 1em 2em;\n\tborder-bottom: 1px solid var(--color-border);\n\tfont-weight: bold;\n\tmargin: 1em 0;\n}\n\n.dir-editor-spacer {\n\tmargin-bottom: 1.25em;\n}\n\n.dir-editor-dual-flex {\n\tdisplay: flex;\n\talign-items: center;\n\tgap: .5em;\n\tmargin-bottom: 1.75em;\n}\n\n.dir-editor-btn {\n\tdisplay: inline-flex;\n\tmargin-right: 1em;\n}\n</style>'],sourceRoot:""}]);const r=i},4151:(t,e,n)=>{var a=n(8430);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("ee5fd48a",a,!1,{})},4463:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.ps-wide-select .ps-vert-spacing[data-v-4fddca30]{\n\twidth: 90%;\n}\n","",{version:3,sources:["webpack://./src/components/settings-v2/ComboSelect.vue"],names:[],mappings:";AAmGA;CACA,UAAA;AACA",sourcesContent:['<script setup>\nimport LabelAccordion from "../LabelAccordion.vue";\nimport PsSelect from "../PsSelect.vue";\nimport {computed, useSlots} from "vue";\n\nconst emit = defineEmits([\'combo-select-input\'])\n\nconst slots = useSlots()\nconst props = defineProps({\n\tpropName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\toptions: {\n\t\ttype: Array,\n\t\trequired: true\n\t},\n\tstore: {\n\t\ttype: Object,\n\t\trequired: true\n\t},\n\tlabel: {\n\t\ttype: String,\n\t\trequired: true\n\t},\n\tdefaultValue: {\n\t\ttype: String|Number,\n\t\trequired: false,\n\t\tdefault: \'-1\'\n\t},\n\tplaceholder: {\n\t\ttype: String,\n\t\trequired: false,\n\t\tdefault: t(\'appointments\', \'Calendar Required\')\n\t},\n\temitInput: {\n\t\ttype: Boolean,\n\t\trequired: false,\n\t\tdefault: false\n\t},\n\tclickInterceptor: {\n\t\ttype: Function,\n\t\trequired: false\n\t}\n})\n\nconst isLoading = computed(() => props.store.loading[props.propName] === true)\nconst dropdownShouldOpen = computed(() => !(props.clickInterceptor && props.store.k === false))\n\n/**\n * @param {{value:String|Number,label:String}} evt\n */\nconst handleInput = (evt) => {\n\tif (props.emitInput === true) {\n\t\temit(\'combo-select-input\', {prop: props.propName, value: evt})\n\t} else {\n\t\tprops.store.setOne(props.propName, evt.value)\n\t}\n}\n/**\n * @param {MouseEvent} evt\n */\nconst handleClick = (evt) => {\n\tif (props.store.k === false && props.clickInterceptor\n\t\t\t&& props.clickInterceptor({\n\t\t\t\tevent: evt,\n\t\t\t\tlabel: props.label,\n\t\t\t\tpropName: props.propName\n\t\t\t}) === true) {\n\t\tevt.stopPropagation()\n\t\tevt.preventDefault()\n\t\treturn false\n\t}\n}\n\n<\/script>\n\n<template>\n\t<div>\n\t\t<LabelAccordion\n\t\t\t\t:label="label"\n\t\t\t\t:loading="isLoading">\n\t\t\t<template #helpPopover v-if="slots?.help">\n\t\t\t\t<slot name="help"/>\n\t\t\t</template>\n\t\t</LabelAccordion>\n\t\t<PsSelect\n\t\t\t\tclass="ps-vert-spacing"\n\t\t\t\t:placeholder-label="placeholder"\n\t\t\t\t:selected-value="store.settings[propName]||defaultValue"\n\t\t\t\t:options="options"\n\t\t\t\t:disabled="isLoading"\n\t\t\t\t:noDrop="clickInterceptor && store.k === false"\n\t\t\t\t@click.native="handleClick"\n\t\t\t\t@input="handleInput"/>\n\t</div>\n</template>\n\n<style scoped>\n.ps-wide-select .ps-vert-spacing{\n\twidth: 90%;\n}\n</style>'],sourceRoot:""}]);const r=i},5153:(t,e,n)=>{var a=n(676);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("0beba35c",a,!1,{})},5241:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.bad-email-list[data-v-3fb71d54] {\n\tmax-height: 16em;\n\toverflow: auto;\n\tmargin-top: 1em;\n\tmargin-bottom: 1em;\n}\n.icon-close[data-v-3fb71d54] {\n\tdisplay: block;\n\theight: 100%;\n}\n","",{version:3,sources:["webpack://./src/components/settings-v2/SectionSecurity.vue"],names:[],mappings:";AA4HA;CACA,gBAAA;CACA,cAAA;CACA,eAAA;CACA,kBAAA;AACA;AAEA;CACA,cAAA;CACA,YAAA;AACA",sourcesContent:['<script setup>\nimport {useSettingsStore} from "../../stores/settings";\nimport ComboCheckbox from "./ComboCheckbox.vue";\nimport {\n\tNcNoteCard,\n\tNcActions,\n\tNcActionInput,\n\tNcUserBubble\n} from "@nextcloud/vue"\nimport ComboInput from "./ComboInput.vue";\nimport LabelAccordion from "../LabelAccordion.vue";\nimport IconPlus from "vue-material-design-icons/Plus.vue";\nimport {ref} from \'vue\'\n\nconst settingsStore = useSettingsStore()\nconst settings = settingsStore.settings\n\nconst badEmail = ref(\'\')\nconst emailInputOpen = ref(false)\n\nconst addBadEmail = () => {\n\tif(settingsStore.loading[\'secEmailBlacklist\']===true){\n\t\treturn\n\t}\n\tconst temp = [...settings.secEmailBlacklist]\n\tif (badEmail.value.match(/^.+@.+\\.[a-zA-Z]{2,}$/) && !temp.includes(badEmail.value)) {\n\t\ttemp.unshift(badEmail.value)\n\t\tsettingsStore.setOne(\'secEmailBlacklist\', temp)\n\t\tbadEmail.value = \'\'\n\t\temailInputOpen.value = false;\n\t}\n}\n\nconst handleDeleteBadEmail = (email) => {\n\tif(settingsStore.loading[\'secEmailBlacklist\']===true){\n\t\treturn\n\t}\n\tconst temp = settings.secEmailBlacklist.filter((elm) => elm !== email)\n\tif (temp.length !== settings.secEmailBlacklist.length) {\n\t\tsettingsStore.setOne(\'secEmailBlacklist\', temp)\n\t}\n}\n\n<\/script>\n\n<template>\n\t<div class="ps-section-wrap">\n\t\t<ComboCheckbox\n\t\t\t\tprop-name="privatePage"\n\t\t\t\t:label="t(\'appointments\', \'Private Page (visitors must be logged-in)\')"\n\t\t\t\t:store="settingsStore"/>\n\n\t\t<ComboCheckbox\n\t\t\t\tclass="ps-vert-spacing"\n\t\t\t\tprop-name="secHcapEnabled"\n\t\t\t\t:label="t(\'appointments\', \'Enable hCaptcha\')"\n\t\t\t\t:store="settingsStore">\n\t\t</ComboCheckbox>\n\t\t<div class="srgdev-appt-sb-indent" v-if="settings.secHcapEnabled">\n\t\t\t<ComboInput\n\t\t\t\t\tprop-name="secHcapSiteKey"\n\t\t\t\t\t:disabled="!settings.secHcapEnabled"\n\t\t\t\t\t:label="t(\'appointments\', \'hCaptcha site key\')"\n\t\t\t\t\t:store="settingsStore"/>\n\t\t\t<ComboInput\n\t\t\t\t\tprop-name="secHcapSecret"\n\t\t\t\t\ttype="password"\n\t\t\t\t\t:disabled="!settings.secHcapEnabled"\n\t\t\t\t\t:label="t(\'appointments\', \'hCaptcha secret\')"\n\t\t\t\t\t:store="settingsStore"/>\n\t\t\t<div style="margin-bottom: 2em">\n\t\t\t\t{{ t(\'appointments\', \'An hCaptcha account is required, more info\') }}\n\t\t\t\t<a target="_blank" class="srgdev-appt-hs-link" href="https://www.hcaptcha.com/">https://www.hcaptcha.com/</a><br>\n\t\t\t\t<NcNoteCard\n\t\t\t\t\t\t:heading="t(\'appointments\', \'Important\')"\n\t\t\t\t\t\ttype="info">\n\t\t\t\t\t{{ t(\'appointments\', \'JavaScript code and/or cookies from hcaptcha.com will be placed into your booking form. You are responsible for ensuring compliance with privacy regulations in your jurisdiction.\') }}\n\t\t\t\t\t<a class="srgdev-appt-hs-link" href="https://docs.hcaptcha.com/faq#should-i-update-my-privacy-policy-when-enabling-hcaptcha">https://docs.hcaptcha.com/faq#should-i-update-my-privacy-policy-when-enabling-hcaptcha</a>\n\t\t\t\t</NcNoteCard>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<LabelAccordion\n\t\t\t\tclass="ps-vert-spacing"\n\t\t\t\t:label="t(\'appointments\',\'Blocked email addresses:\')">\n\t\t\t<template #helpPopover>\n\t\t\t\t{{ t(\'appointments\', \'Email addresses on this list cannot be used to book appointments. To block an entire domain, use a wildcard like this: *@bad-domain.tld\') }}\n\t\t\t</template>\n\t\t</LabelAccordion>\n\t\t<ul class="bad-email-list"\n\t\t\t\tv-if="settings.secEmailBlacklist.length!==0">\n\t\t\t<NcUserBubble v-for="email in settings.secEmailBlacklist"\n\t\t\t\t\t\t\t\t\t\t:key="email"\n\t\t\t\t\t\t\t\t\t\tstyle="margin: .25em"\n\t\t\t\t\t\t\t\t\t\t:margin="5"\n\t\t\t\t\t\t\t\t\t\t:size="30"\n\t\t\t\t\t\t\t\t\t\t:display-name="email">\n\t\t\t\t<template #name>\n\t\t\t\t\t<a href="#"\n\t\t\t\t\t\t title="Delete"\n\t\t\t\t\t\t class="icon-close"\n\t\t\t\t\t\t @click="()=>{handleDeleteBadEmail(email)}"/>\n\t\t\t\t</template>\n\t\t\t</NcUserBubble>\n\t\t</ul>\n\t\t<NcActions :menu-name="t(\'appointments\',\'Add\')"\n\t\t\t\t\t\t\t :open="emailInputOpen"\n\t\t\t\t\t\t\t :manualOpen="true"\n\t\t\t\t\t\t\t @click="()=>{emailInputOpen = !emailInputOpen}"\n\t\t\t\t\t\t\t @update:open="(isOpen)=>emailInputOpen=isOpen"\n\t\t\t\t\t\t\t :disabled="settingsStore.loading[\'secEmailBlacklist\'] === true">\n\t\t\t<template #icon>\n\t\t\t\t<IconPlus :size="20"/>\n\t\t\t</template>\n\t\t\t<NcActionInput\n\t\t\t\t\t@submit="addBadEmail"\n\t\t\t\t\tv-model="badEmail"\n\t\t\t\t\t:label-outside="false"\n\t\t\t\t\t:label="t(\'appointments\',\'Enter email adddress\')"/>\n\t\t</NcActions>\n\t</div>\n</template>\n\n<style scoped>\n.bad-email-list {\n\tmax-height: 16em;\n\toverflow: auto;\n\tmargin-top: 1em;\n\tmargin-bottom: 1em;\n}\n\n.icon-close {\n\tdisplay: block;\n\theight: 100%;\n}\n</style>\n'],sourceRoot:""}]);const r=i},5600:(t,e,n)=>{var a=n(4463);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("413a2016",a,!1,{})},5706:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.ps-nc-select-internal.v-select[data-v-7a9377ae],\n.ps-nc-select-internal.v-select[data-v-7a9377ae] .vs__dropdown-toggle {\n\theight: 36px;\n\tmin-height: 36px;\n}\n.ps-nc-select-internal.v-select[data-v-7a9377ae] .vs__selected-options,\n.ps-nc-select-internal.v-select[data-v-7a9377ae] .vs__selected {\n\theight: 32px;\n\tmin-height: 32px;\n\tpadding-bottom: 0;\n}\n.ps-nc-select-internal.v-select[data-v-7a9377ae] .vs__search {\n\theight: 32px !important;\n\tmargin: 0;\n}\n.ps-nc-select-internal.v-select[data-v-7a9377ae] .vs__selected {\n\tmargin-top: 0;\n}\n.ps-nc-select-internal.v-select[data-v-7a9377ae] .vs__search {\n\topacity: 0;\n\tpointer-events: none;\n}\n","",{version:3,sources:["webpack://./src/components/PsSelect.vue"],names:[],mappings:";AAgCA;;CAEA,YAAA;CACA,gBAAA;AACA;AAEA;;CAEA,YAAA;CACA,gBAAA;CACA,iBAAA;AACA;AAEA;CACA,uBAAA;CACA,SAAA;AACA;AAEA;CACA,aAAA;AACA;AAEA;CACA,UAAA;CACA,oBAAA;AACA",sourcesContent:['<script setup>\nimport {NcSelect} from "@nextcloud/vue";\nimport {computed, useAttrs} from "vue";\n\nconst props = defineProps({\n\tselectedValue: [Number, String],\n\tplaceholderLabel: String\n})\nconst attrs = useAttrs()\n\nconst selectedLabel = computed(() => {\n\tconst opt = attrs.options.find((item) => item.value === props.selectedValue)\n\treturn opt\n\t\t\t? opt.label\n\t\t\t: props.placeholderLabel\n\t\t\t\t\t? props.placeholderLabel\n\t\t\t\t\t: t(\'appointments\', \'Select One Option\')\n})\n\n<\/script>\n\n<template>\n\t<NcSelect\n\t\t\tv-bind="$attrs"\n\t\t\tv-on="$listeners"\n\t\t\t:value="selectedLabel"\n\t\t\t:labelOutside="true"\n\t\t\tclass="ps-nc-select-internal"\n\t\t\t:clearable="false"/>\n</template>\n\n<style scoped>\n.ps-nc-select-internal.v-select,\n.ps-nc-select-internal.v-select >>> .vs__dropdown-toggle {\n\theight: 36px;\n\tmin-height: 36px;\n}\n\n.ps-nc-select-internal.v-select >>> .vs__selected-options,\n.ps-nc-select-internal.v-select >>> .vs__selected {\n\theight: 32px;\n\tmin-height: 32px;\n\tpadding-bottom: 0;\n}\n\n.ps-nc-select-internal.v-select >>> .vs__search {\n\theight: 32px !important;\n\tmargin: 0;\n}\n\n.ps-nc-select-internal.v-select >>> .vs__selected {\n\tmargin-top: 0;\n}\n\n.ps-nc-select-internal.v-select >>> .vs__search {\n\topacity: 0;\n\tpointer-events: none;\n}\n</style>'],sourceRoot:""}]);const r=i},6637:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.appt-accordion-title[data-v-7a9f93d0] {\n  margin-bottom: .25em;\n  cursor: pointer;\n  background-position: left center;\n  padding-left: 2.25em;\n  background-size: 2em;\n  margin-left: -.5em;\n  position: relative;\n}\n.appt-accordion-bold-title[data-v-7a9f93d0]{\n  font-weight: bold;\n}\n.appt-accordion-content[data-v-7a9f93d0] {\n  padding-left: 1.75em;\n}\n","",{version:3,sources:["webpack://./src/components/ApptAccordion.vue"],names:[],mappings:";AAuDA;EACA,oBAAA;EACA,eAAA;EACA,gCAAA;EACA,oBAAA;EACA,oBAAA;EACA,kBAAA;EACA,kBAAA;AACA;AACA;EACA,iBAAA;AACA;AAEA;EACA,oBAAA;AACA",sourcesContent:['<template>\n  <div>\n    <div\n        :class="[isOpen ? \'icon-triangle-s appt-accordion-bold-title\' : \'icon-triangle-e\', \'appt-accordion-title\']"\n        @click="toggle"><a v-if="help!==\'\'"\n                           class="icon-info srgdev-appt-info-link"\n                           :style="helpStyle"\n                           @click="$root.$emit(\'helpWanted\',help)"></a>\n      {{ title }}\n    </div>\n    <div\n        class="appt-accordion-content"\n        v-show="isOpen">\n      <slot name="content"/>\n    </div>\n  </div>\n</template>\n\n<script>\nexport default {\n  name: "ApptAccordion",\n  props: {\n    title: {\n      type: String,\n      default: \'\',\n      required: true\n    },\n    open: {\n      type: Boolean,\n      default: false\n    },\n    help: {\n      type: String,\n      default: \'\',\n    },\n    helpStyle: {\n      type: String,\n      default: \'\',\n    }\n  },\n  data: function () {\n    return {\n      isOpen: this.open\n    }\n  },\n  methods: {\n    toggle() {\n      this.isOpen = !this.isOpen\n    },\n  }\n\n}\n<\/script>\n\n<style scoped>\n.appt-accordion-title {\n  margin-bottom: .25em;\n  cursor: pointer;\n  background-position: left center;\n  padding-left: 2.25em;\n  background-size: 2em;\n  margin-left: -.5em;\n  position: relative;\n}\n.appt-accordion-bold-title{\n  font-weight: bold;\n}\n\n.appt-accordion-content {\n  padding-left: 1.75em;\n}\n</style>'],sourceRoot:""}]);const r=i},6776:(t,e,n)=>{var a=n(9439);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("64714583",a,!1,{})},6828:(t,e,n)=>{var a=n(7343);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("b15d654e",a,!1,{})},7343:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.tao-h4[data-v-25873168] {\n\tfont-size: 100%;\n\tpadding: 0 0 1em 2em;\n\tborder-bottom: 1px solid var(--color-border);\n\tfont-weight: bold;\n\tmargin: 1em 0;\n}\n.appt-slider[data-v-25873168] {\n\tmargin-bottom: 3em;\n\tmargin-right: 0;\n\tbox-sizing: content-box;\n}\n.pml-cont[data-v-25873168] {\n\tposition: relative;\n}\n.pml-m[data-v-25873168],\n.pml-p[data-v-25873168] {\n\tfont-size: 125%;\n\tposition: absolute;\n\theight: 1em;\n\twidth: 1em;\n\tline-height: 1em;\n\ttop: 50%;\n\tmargin-top: -.5em;\n\ttext-align: center;\n\tcursor: pointer;\n\tcolor: var(--color-text-light);\n}\n.pml-m[data-v-25873168]:hover,\n.pml-p[data-v-25873168]:hover {\n\tcolor: var(--color-main-text);\n\ttransform: scale(1.2);\n}\n.pml-p[data-v-25873168] {\n\tright: 1.375em;\n}\n.pml-m[data-v-25873168] {\n\tright: 0;\n}\n.actions-cont[data-v-25873168] {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin-top: 2em;\n}\n.actions-cont-button[data-v-25873168] {\n\tmargin-right: 1em;\n\tmin-width: 5em;\n}\n","",{version:3,sources:["webpack://./src/components/modals/WeeklyApptsEditorModal.vue"],names:[],mappings:";AAsOA;CACA,eAAA;CACA,oBAAA;CACA,4CAAA;CACA,iBAAA;CACA,aAAA;AACA;AAEA;CACA,kBAAA;CACA,eAAA;CACA,uBAAA;AACA;AAEA;CACA,kBAAA;AACA;AAEA;;CAEA,eAAA;CACA,kBAAA;CACA,WAAA;CACA,UAAA;CACA,gBAAA;CACA,QAAA;CACA,iBAAA;CACA,kBAAA;CACA,eAAA;CACA,8BAAA;AACA;AAEA;;CAEA,6BAAA;CACA,qBAAA;AACA;AAEA;CACA,cAAA;AACA;AAEA;CACA,QAAA;AACA;AAEA;CACA,aAAA;CACA,mBAAA;CACA,eAAA;AACA;AAEA;CACA,iBAAA;CACA,cAAA;AACA",sourcesContent:['<script setup>\nimport {\n\tNcButton,\n\tNcModal,\n\tNcTextField\n} from "@nextcloud/vue";\nimport LabelAccordion from "../LabelAccordion.vue";\nimport VueSlider from "vue-slider-component";\nimport {reactive} from "vue";\nimport {MODAL} from "../../use/constants";\n\nconst DUR_MAX = 480\n\nconst emit = defineEmits([\'close-modal\', \'tmpl-add-appts\', \'tmpl-update-appt\', \'show-info-modal\'])\nconst props = defineProps({\n\tdata: {\n\t\ttype: Object,\n\t\trequired: true,\n\t\t// elm: HTMLDivElement | null,\n\t\t// cid: Number,\n\t\t// gridShift: Number,\n\t\t// k: Boolean,\n\t},\n})\n\nconst state = reactive({\n\tcount: 8,\n\tdurations: [30],\n\ttitle: \'\',\n})\n\nif (props.data.elm !== null) {\n\t// editing an appointment\n\tstate.durations = [...props.data.elm.dur]\n\tstate.title = props.data.elm.title\n}\n\n\nconst header = (() => {\n\tlet str = ""\n\tif (window.Intl && typeof window.Intl === "object") {\n\t\tconst lang = document.documentElement.hasAttribute(\'data-locale\')\n\t\t\t\t? [document.documentElement.getAttribute(\'data-locale\').replaceAll(\'_\', \'-\'), document.documentElement.lang]\n\t\t\t\t: [document.documentElement.lang]\n\t\tif (props.data.elm === null) {\n\t\t\t// adding\n\t\t\tif (props.data.cid > -1) {\n\t\t\t\tconst d = new Date()\n\t\t\t\td.setDate(d.getDate() - d.getDay() + 1 - props.data.gridShift + props.data.cid)\n\t\t\t\tstr = new Intl.DateTimeFormat(lang,\n\t\t\t\t\t\t{weekday: "long"}).format(d)\n\t\t\t}\n\t\t} else if (props.data.elm.uTop !== undefined && props.data.elm.cID !== undefined) {\n\t\t\t// single appt. edit\n\n\t\t\tconst d = new Date()\n\t\t\td.setDate(d.getDate() - d.getDay() + 1 - props.data.gridShift + props.data.elm.cID)\n\n\t\t\tconst SH = 0 // same as grid.js\n\t\t\tconst minTotal = SH * 60 + props.data.elm.uTop * 5\n\t\t\tconst hours = (minTotal / 60) | 0\n\t\t\td.setHours(hours, minTotal - hours * 60)\n\t\t\tstr = new Intl.DateTimeFormat(lang,\n\t\t\t\t\t{weekday: "long", hour: "2-digit", minute: "2-digit"}).format(d)\n\t\t}\n\t}\n\treturn str\n})()\n\n\nconst handleUpdateShow = (evt) => {\n\tif (evt === false) {\n\t\temit(\'close-modal\')\n\t}\n}\n\nconst addDurationHandler = () => {\n\n\tif (!Array.isArray(state.durations)) {\n\t\tstate.durations = [state.durations]\n\t}\n\n\tif (props.data.k === false && state.durations.length > 1) {\n\t\temit(\'show-info-modal\', {\n\t\t\ttype: MODAL.CONTRIBUTION,\n\t\t\tmessage: t(\'appointments\', \'More than two duration choices\')\n\t\t})\n\t\treturn\n\t}\n\n\tif (state.durations.length > 7) return\n\n\tconst a = [...state.durations, DUR_MAX].sort((a, b) => a - b)\n\t// find the largest space\n\tlet s = 0\n\tfor (let sp = 0, spn = 0, i = 0, l = a.length - 1; i < l; i++) {\n\t\tspn = a[i + 1] - a[i]\n\t\tif (spn > sp) {\n\t\t\tsp = spn\n\t\t\ts = i\n\t\t}\n\t}\n\tstate.durations.push((((a[s] + ((a[s + 1] - a[s]) >> 1)) / 5) | 0) * 5)\n\n}\nconst removeDurationHandler = () => {\n\tif (Array.isArray(state.durations) && state.durations.length > 1) {\n\t\tstate.durations.splice(-1, 1)\n\t}\n}\n\nconst durationsTooltipFormatter = (v) => {\n\tconst h = (v / 60) | 0\n\tconst m = v - h * 60\n\treturn h + ":" + (m > 9 ? "" + m : "0" + m)\n}\n\nconst handlePrimaryClick = () => {\n\tif (props.data.elm === null) {\n\t\temit(\'tmpl-add-appts\', {\n\t\t\tcount: state.count,\n\t\t\tdur: Array.isArray(state.durations)\n\t\t\t\t\t? state.durations.sort((a, b) => a - b)\n\t\t\t\t\t: [state.durations],\n\t\t\ttitle: state.title,\n\t\t\tcid: props.data.cid\n\t\t})\n\t} else {\n\t\temit(\'tmpl-update-appt\', {\n\t\t\tdur: Array.isArray(state.durations)\n\t\t\t\t\t? state.durations.sort((a, b) => a - b)\n\t\t\t\t\t: [state.durations],\n\t\t\ttitle: state.title,\n\t\t\tcIdx: props.data.elm.cIdx,\n\t\t\tcID: props.data.elm.cID\n\t\t})\n\t\temit(\'close-modal\')\n\t}\n}\n\nconst handleDeleteClick = () => {\n\t// reuse event\n\temit(\'tmpl-update-appt\', {\n\t\tcIdx: props.data.elm.cIdx,\n\t\tcID: props.data.elm.cID,\n\t\tdel: true\n\t})\n\temit(\'close-modal\')\n}\n\nconst primaryButtonText = props.data.elm === null\n\t\t? t(\'appointments\', \'Add\')\n\t\t: t(\'appointments\', \'OK\')\n\n<\/script>\n\n<template>\n\t<NcModal\n\t\t\tstyle="z-index: 10002"\n\t\t\tlabelId="srgdev_appts_editor_name"\n\t\t\t:setReturnFocus="false"\n\t\t\t:show="data !== null"\n\t\t\t@update:show="handleUpdateShow">\n\t\t<h4 id="srgdev_appts_editor_name" v-if="header!==\'\'" class="tao-h4">{{ header }}</h4>\n\t\t<div class="srgdev-appt-modal-wrap" style="text-align: left">\n\t\t\t<template v-if="props.data.elm===null">\n\t\t\t\t<LabelAccordion\n\t\t\t\t\t\t:label="t(\'appointments\', \'Number of Appointments\')"\n\t\t\t\t\t\tfor="atam-slider-count"/>\n\t\t\t\t<vue-slider\n\t\t\t\t\t\t:min="1"\n\t\t\t\t\t\t:max="32"\n\t\t\t\t\t\ttooltip="always"\n\t\t\t\t\t\ttooltipPlacement="bottom"\n\t\t\t\t\t\tid="atam-slider-count"\n\t\t\t\t\t\tclass="ps-slider appt-slider"\n\t\t\t\t\t\tv-model="state.count"/>\n\t\t\t</template>\n\t\t\t<div class="pml-cont">\n\t\t\t\t<label class="slider-label">{{ t(\'appointments\', \'Duration (hours:minutes)\') }}</label>\n\t\t\t\t<span class="pml-p" @click="addDurationHandler">+</span>\n\t\t\t\t<span class="pml-m" @click="removeDurationHandler">−</span>\n\t\t\t</div>\n\t\t\t<vue-slider\n\t\t\t\t\t:min="5"\n\t\t\t\t\t:max="DUR_MAX"\n\t\t\t\t\t:order="false"\n\t\t\t\t\t:interval="5"\n\t\t\t\t\t:process="false"\n\t\t\t\t\ttooltip="always"\n\t\t\t\t\ttooltipPlacement="bottom"\n\t\t\t\t\t:tooltip-formatter="durationsTooltipFormatter"\n\t\t\t\t\tclass="ps-slider appt-slider"\n\t\t\t\t\tv-model="state.durations"/>\n\t\t\t<LabelAccordion\n\t\t\t\t\t:label="t(\'appointments\', \'Title\')"\n\t\t\t\t\tfor="atam-input-title"/>\n\t\t\t<NcTextField\n\t\t\t\t\tid="atam-input-title"\n\t\t\t\t\tplaceholder="Optional"\n\t\t\t\t\t:value.sync="state.title"\n\t\t\t\t\t:label-outside="true"/>\n\t\t\t<div class="actions-cont">\n\t\t\t\t<NcButton\n\t\t\t\t\t\tclass="actions-cont-button"\n\t\t\t\t\t\t:aria-label="primaryButtonText"\n\t\t\t\t\t\ttype="primary"\n\t\t\t\t\t\t@click="handlePrimaryClick">\n\t\t\t\t\t{{ primaryButtonText }}\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton\n\t\t\t\t\t\tv-if="props.data.elm!==null"\n\t\t\t\t\t\tclass="actions-cont-button"\n\t\t\t\t\t\t:aria-label="t(\'appointments\', \'Delete\')"\n\t\t\t\t\t\t@click="handleDeleteClick">\n\t\t\t\t\t{{ t(\'appointments\', \'Delete\') }}\n\t\t\t\t</NcButton>\n\t\t\t\t<NcButton\n\t\t\t\t\t\tclass="actions-cont-button"\n\t\t\t\t\t\t:aria-label="t(\'appointments\', \'Cancel\')"\n\t\t\t\t\t\t@click="handleUpdateShow(false)">\n\t\t\t\t\t{{ t(\'appointments\', \'Cancel\') }}\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t</div>\n\t</NcModal>\n</template>\n\n<style scoped>\n\n.tao-h4 {\n\tfont-size: 100%;\n\tpadding: 0 0 1em 2em;\n\tborder-bottom: 1px solid var(--color-border);\n\tfont-weight: bold;\n\tmargin: 1em 0;\n}\n\n.appt-slider {\n\tmargin-bottom: 3em;\n\tmargin-right: 0;\n\tbox-sizing: content-box;\n}\n\n.pml-cont {\n\tposition: relative;\n}\n\n.pml-m,\n.pml-p {\n\tfont-size: 125%;\n\tposition: absolute;\n\theight: 1em;\n\twidth: 1em;\n\tline-height: 1em;\n\ttop: 50%;\n\tmargin-top: -.5em;\n\ttext-align: center;\n\tcursor: pointer;\n\tcolor: var(--color-text-light);\n}\n\n.pml-m:hover,\n.pml-p:hover {\n\tcolor: var(--color-main-text);\n\ttransform: scale(1.2);\n}\n\n.pml-p {\n\tright: 1.375em;\n}\n\n.pml-m {\n\tright: 0;\n}\n\n.actions-cont {\n\tdisplay: flex;\n\tflex-direction: row;\n\tmargin-top: 2em;\n}\n\n.actions-cont-button {\n\tmargin-right: 1em;\n\tmin-width: 5em;\n}\n</style>'],sourceRoot:""}]);const r=i},7865:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.srgdev-appt-modal-container[data-v-014c0761] .modal-container {\n\twidth: auto;\n}\n","",{version:3,sources:["webpack://./src/components/modals/PageUrlModal.vue"],names:[],mappings:";AAiLA;CACA,WAAA;AACA",sourcesContent:['<script setup>\nimport ApptAccordion from "../ApptAccordion.vue";\nimport IconCheckAll from "vue-material-design-icons/CheckAll.vue";\nimport IconCopy from "vue-material-design-icons/ContentCopy.vue";\nimport IconOpen from "vue-material-design-icons/OpenInNew.vue";\nimport {\n\tNcButton,\n\tNcLoadingIcon,\n\tNcModal\n} from "@nextcloud/vue";\nimport SettingsService2 from "../../services/SettingsService2";\nimport {onMounted, ref} from "vue";\nimport {parsePageUrls} from "../../use/utils";\n\nconst settingsService = new SettingsService2()\n\nconst props = defineProps({\n\tpageData: Object\n})\n//\nconst emit = defineEmits([\'update:pageData\', \'show-warning\'])\n\nconst pageURLs = ref([])\nconst showCopyCheck = ref(false)\n\nonMounted(() => {\n\tif (props.pageData) {\n\t\tsettingsService.getPageUrl(props.pageData.pageId).then(res => {\n\t\t\tif (res !== null) {\n\t\t\t\tif (res.data.message) {\n\t\t\t\t\temit(\'show-warning\', res.data)\n\t\t\t\t} else {\n\t\t\t\t\tconst urls = parsePageUrls(res.data)\n\t\t\t\t\tif (urls !== null) {\n\t\t\t\t\t\tpageURLs.value = urls\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// error, settingsService will show a toast\n\t\t\t\t// and we just close this modal\n\t\t\t\thandleUpdateShow(false)\n\t\t\t}\n\t\t})\n\t}\n})\n\nconst handleUpdateShow = (evt) => {\n\tif (evt === false) {\n\t\tsettingsService.cancel()\n\t\temit(\'update:pageData\', null)\n\t}\n}\n\nconst handleVisitURL = () => {\n\twindow.open(pageURLs.value[0], "_blank");\n}\n\nlet copyCheckTimeout = -1\nconst handleCopyUrl = () => {\n\n\tconst showCopyOkIcon = () => {\n\t\tshowCopyCheck.value = true\n\t\tif (copyCheckTimeout !== -1) {\n\t\t\tclearTimeout(copyCheckTimeout)\n\t\t}\n\t\tcopyCheckTimeout = setTimeout(() => {\n\t\t\tshowCopyCheck.value = false\n\t\t\tclearTimeout(copyCheckTimeout)\n\t\t}, 500)\n\t}\n\n\tconst text = pageURLs.value[0]\n\tif (navigator.clipboard) {\n\t\tnavigator.clipboard.writeText(text).then(() => {\n\t\t\tshowCopyOkIcon()\n\t\t}, (err) => {\n\t\t\tconsole.error(\'copy error:\', err);\n\t\t});\n\t} else {\n\t\t// fallback\n\t\tlet textArea = document.createElement("textarea");\n\t\ttextArea.value = text;\n\n\t\t// Avoid scrolling to bottom\n\t\ttextArea.style.top = "0";\n\t\ttextArea.style.left = "0";\n\t\ttextArea.style.position = "fixed";\n\n\t\ttextArea.style.width = \'2em\';\n\t\ttextArea.style.height = \'2em\';\n\n\t\ttextArea.style.padding = 0;\n\n\t\ttextArea.style.border = \'none\';\n\t\ttextArea.style.outline = \'none\';\n\t\ttextArea.style.boxShadow = \'none\';\n\n\t\ttextArea.style.background = \'transparent\';\n\n\t\tdocument.body.appendChild(textArea);\n\t\ttextArea.focus();\n\t\ttextArea.select();\n\n\t\ttry {\n\t\t\tdocument.execCommand(\'copy\');\n\t\t\tshowCopyOkIcon()\n\t\t} catch (err) {\n\t\t\tconsole.error(\'copy error:\', err)\n\t\t}\n\t\tdocument.body.removeChild(textArea);\n\t}\n}\n\n\n<\/script>\n\n<template>\n\t<NcModal\n\t\t\tclass="srgdev-appt-modal-container"\n\t\t\t:show="props.pageData!==null"\n\t\t\tsize="large"\n\t\t\t@update:show="handleUpdateShow">\n\t\t<div class="srgdev-appt-modal_content">\n\t\t\t<div class="srgdev-appt-modal-header">\n\t\t\t\t{{ t(\'appointments\', \'Page URL\') + (props.pageData && props.pageData.label ? (" - " + props.pageData.label) : "") }}\n\t\t\t</div>\n\t\t\t<div v-if="pageURLs.length===0">\n\t\t\t\t<NcLoadingIcon :size="64"/>\n\t\t\t</div>\n\t\t\t<div v-else>\n\t\t\t\t<div\n\t\t\t\t\t\tclass="srgdev-appt-modal-lbl"\n\t\t\t\t\t\tstyle="user-select: text; cursor: text;">\n\t\t\t\t\t{{ pageURLs[0] }}\n\t\t\t\t</div>\n\t\t\t\t<ApptAccordion\n\t\t\t\t\t\tv-if="pageURLs[1]!==\'\'"\n\t\t\t\t\t\t:title="t(\'appointments\',\'Show iframe/embeddable\')"\n\t\t\t\t\t\t:open="false"\n\t\t\t\t\t\tstyle="display: inline-block">\n\t\t\t\t\t<template #content>\n\t\t\t\t\t\t<div\n\t\t\t\t\t\t\t\tclass="srgdev-appt-modal-lbl_dim"\n\t\t\t\t\t\t\t\tstyle="user-select: text; cursor: text;">\n\t\t\t\t\t\t\t{{ pageURLs[1] }}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</ApptAccordion>\n\t\t\t\t<div>\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\t\tclass="srgdev-appt-modal-btn"\n\t\t\t\t\t\t\t:aria-label="t(\'appointments\',\'Copy\')"\n\t\t\t\t\t\t\ttype="tertiary"\n\t\t\t\t\t\t\t@click="handleCopyUrl">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconCopy v-if="showCopyCheck===false" :size="20"/>\n\t\t\t\t\t\t\t<IconCheckAll v-else :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t(\'appointments\', \'Copy\') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t\t<NcButton\n\t\t\t\t\t\t\tclass="srgdev-appt-modal-btn"\n\t\t\t\t\t\t\t:aria-label="t(\'appointments\',\'Visit\')"\n\t\t\t\t\t\t\ttype="tertiary"\n\t\t\t\t\t\t\t@click="handleVisitURL">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<IconOpen :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t{{ t(\'appointments\', \'Visit\') }}\n\t\t\t\t\t</NcButton>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</NcModal>\n</template>\n\n<style scoped>\n.srgdev-appt-modal-container >>> .modal-container {\n\twidth: auto;\n}\n</style>'],sourceRoot:""}]);const r=i},7923:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.popover-wrapper[data-v-3287338e] {\n\tmargin-top: 2em;\n}\n.popover-trigger[data-v-3287338e] {\n\tmargin: 0 auto;\n}\n.popover-content[data-v-3287338e] {\n\tmargin: 1em;\n}\n.popover-list[data-v-3287338e] {\n\tmargin-top: .5em;\n\tmargin-left: .5em;\n\tlist-style: disc inside;\n}\n\n","",{version:3,sources:["webpack://./src/components/modals/SettingsInfoModal.vue"],names:[],mappings:";AAoFA;CACA,eAAA;AACA;AAEA;CACA,cAAA;AACA;AAEA;CACA,WAAA;AACA;AAEA;CACA,gBAAA;CACA,iBAAA;CACA,uBAAA;AACA",sourcesContent:['<script setup>\nimport {\n\tNcModal,\n\tNcButton,\n\tNcPopover\n} from "@nextcloud/vue";\nimport IconInfo from "vue-material-design-icons/InformationOutline.vue";\nimport {MODAL} from "../../use/constants";\n\nconst emit = defineEmits([\'hide-settings-modal\'])\nconst props = defineProps({\n\tdata: {\n\t\ttype: Object,\n\t\trequired: true\n\t}\n})\n\nconst handleUpdateShow = (evt) => {\n\tif (evt === false) {\n\t\temit(\'hide-settings-modal\')\n\t}\n}\n\n<\/script>\n\n<template>\n\t<NcModal\n\t\t\tstyle="z-index: 10002"\n\t\t\t:enableSwipe="false"\n\t\t\t:outTransition="false"\n\t\t\t:show="data.type!==MODAL.NONE"\n\t\t\t@update:show="handleUpdateShow">\n\t\t<div class="srgdev-appt-modal-wrap">\n\t\t\t<template v-if="data.type===MODAL.CONTRIBUTION">\n\t\t\t\t<div class="srgdev-appt-modal-header">\n\t\t\t\t\t{{ t(\'appointments\', "Contributor only feature") }}\n\t\t\t\t</div>\n\t\t\t\t{{ data.message }}\n\t\t\t\t<NcPopover class="popover-wrapper">\n\t\t\t\t\t<template #trigger>\n\t\t\t\t\t\t<NcButton class="popover-trigger">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconInfo :size="20"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t(\'appointments\', "More Information") }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t</template>\n\t\t\t\t\t<template>\n\t\t\t\t\t\t<div class="popover-content">\n\t\t\t\t\t\t\tContributor features can be unlocked by obtaining a\n\t\t\t\t\t\t\t<strong>contributor key</strong> in any of the following ways:\n\t\t\t\t\t\t\t<ul class="popover-list">\n\t\t\t\t\t\t\t\t<li>Contribute any amount to this app development or sponsor a feature over at the\n\t\t\t\t\t\t\t\t\t<a class="srgdev-appt-hs-link" target="_blank" href="https://www.srgdev.com/gh-support/nextcloudapps">Funding Page</a>.\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>Contribute code via a pull request on\n\t\t\t\t\t\t\t\t\t<a class="srgdev-appt-hs-link" target="_blank" href="https://github.com/SergeyMosin/Appointments">GitHub</a>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>If you are a member of the Nexcloud team on transifex.com please\n\t\t\t\t\t\t\t\t\t<a class="srgdev-appt-hs-link" target="_blank" href="https://www.srgdev.com/contact.html#cnt_ancr">contact me directly</a>.\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>Contact me if none of the above methods work for you.</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</template>\n\t\t\t\t</NcPopover>\n\t\t\t</template>\n\t\t\t<template v-if="data.type===MODAL.INFO">\n\t\t\t\t<div class="srgdev-appt-modal-header">\n\t\t\t\t\t{{ t(\'appointments\', "Information/Warning") }}\n\t\t\t\t</div>\n\t\t\t\t{{ data.message }}\n\t\t\t</template>\n\t\t\t<template v-if="data.type===MODAL.ERROR">\n\t\t\t\t<div class="srgdev-appt-modal-header srgdev-appt-modal-header_error">\n\t\t\t\t\t{{ t(\'appointments\', "Error") }}\n\t\t\t\t</div>\n\t\t\t\t{{ data.message }}\n\t\t\t</template>\n\t\t</div>\n\t</NcModal>\n</template>\n\n<style scoped>\n.popover-wrapper {\n\tmargin-top: 2em;\n}\n\n.popover-trigger {\n\tmargin: 0 auto;\n}\n\n.popover-content {\n\tmargin: 1em;\n}\n\n.popover-list {\n\tmargin-top: .5em;\n\tmargin-left: .5em;\n\tlist-style: disc inside;\n}\n\n</style>'],sourceRoot:""}]);const r=i},8022:(t,e,n)=>{var a=n(8709);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("d3104370",a,!1,{})},8045:(e,n,a)=>{"use strict";var o=a(3814),s=a(2893),i=a(3334),r=a(5899),l=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcContent,{attrs:{"app-name":"appointments"}},[e(n.Navigation2,{on:{"show-page":n.showPage,"show-settings-modal":n.handleShowSettingsInfoModal,"show-settings":n.showSettings}}),t._v(" "),e(n.NcAppContent,{staticStyle:{position:"relative"}},[n.state.context===n.CONTEXT.PREVIEW?e("div",{staticStyle:{height:"100%"}},[null===n.state.contextData?e("div",{staticClass:"no-page-selected"},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Please select or create a page"))+"\n\t\t\t")]):[e("div",{staticClass:"srgdev-appt-main-info"},[n.state.contextData.pageLoading?e(n.NcLoadingIcon,{staticClass:"page-loading-spinner",attrs:{size:18}}):t._e(),t._v(" "),e("span",[t._v(t._s(n.state.contextData.label+" "+t.t("appointments","Preview")))]),t._v(" "),!1===n.state.contextData.enabled?e("div",{staticClass:"page-disabled-preview-tag"},[t._v(" "+t._s(t.t("appointments","Page Is Not Enabled"))+"\n\t\t\t\t\t")]):t._e()],1),t._v(" "),e("div",{staticClass:"srgdev-appt-main-frame-cont"},[e("iframe",{ref:"pubPageRef",staticClass:"srgdev-appt-main-frame",attrs:{src:n.state.contextData.pageUrl},on:{load:function(t){n.state.contextData.pageLoading=!1}}})])]],2):t._e(),t._v(" "),n.state.context===n.CONTEXT.EDITOR?e(n.TimeSlotEditor,{attrs:{data:n.state.contextData},on:{"hide-timeslot-editor":n.handleHideTimeslotEditor}}):t._e()],1),t._v(" "),n.state.settingsPageId?e(n.Settings,{staticStyle:{"z-index":"9998"},attrs:{"page-id":n.state.settingsPageId},on:{"close-settings":n.handleCloseSettings,"show-settings-modal":n.handleShowSettingsInfoModal,"show-timeslot-editor":n.showTimeSlotEditor}}):t._e(),t._v(" "),n.state.modalData.type!==n.MODAL.NONE?e(n.SettingsInfoModal,{attrs:{data:n.state.modalData},on:{"hide-settings-modal":()=>{n.state.modalData.type=n.MODAL.NONE}}}):t._e()],1)};l._withStripped=!0;var p=a(8092),c=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcAppNavigation,{scopedSlots:t._u([{key:"list",fn:function(){return[t._l(n.pagesStore.pages,(function(a){return e(n.NcAppNavigationItem,{key:a.id,attrs:{name:a.label,loading:n.pagesStore.loading===a.id},on:{"update:menuOpen":t=>{n.handleActionsMenu(a.id,t)},click:function(t){return n.handleShowPage(a.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[n.pagesStore.loading!==a.id&&a.enabled?e(n.IconEarth,{attrs:{size:20}}):t._e(),t._v(" "),n.pagesStore.loading===a.id||a.enabled?t._e():e(n.IconEarthOff,{attrs:{size:20}})]},proxy:!0},{key:"actions",fn:function(){return[e(n.NcActionButton,{attrs:{disabled:!!n.pagesStore.loading,"close-after-click":!0},on:{click:function(t){return n.handleEnablePage(a.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[a.enabled?e(n.IconWebOff,{attrs:{size:20}}):e(n.IconWeb,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(a.enabled?t.t("appointments","Stop sharing (disable)"):t.t("appointments","Publish online (enable)"))+"\n\t\t\t\t")]),t._v(" "),e(n.NcActionButton,{attrs:{"close-after-click":!0},on:{click:function(t){return n.handleShowPageUrl(a.id,a.label)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconLink,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Show URL/link"))+"\n\t\t\t\t")]),t._v(" "),e(n.NcActionInput,{staticClass:"app-nav-actions-input",attrs:{disabled:!!n.pagesStore.loading,value:a.label},on:{submit:t=>{n.handleLabelSubmit(a.id,t)}},scopedSlots:t._u([{key:"icon",fn:function(){return[n.pagesStore.loading===n.LOADING_LABEL?e(n.NcLoadingIcon,{attrs:{size:20}}):e(n.IconPencil,{attrs:{size:20}})]},proxy:!0}],null,!0)}),t._v(" "),e(n.NcActionButton,{attrs:{disabled:!!n.pagesStore.loading,"close-after-click":!0},on:{click:function(t){return n.emit("show-settings",a.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconCog,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Settings"))+"\n\t\t\t\t")]),t._v(" "),e(n.NcActionButton,{attrs:{disabled:!!n.pagesStore.loading,"close-after-click":!0},on:{click:function(t){return n.handleDeletePage(a.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconDelete,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Delete Page"))+"\n\t\t\t\t")])]},proxy:!0}],null,!0)})})),t._v(" "),n.pagesStore.dirPage.showInNavigation?e(n.NcAppNavigationItem,{attrs:{name:n.pagesStore.dirPage.label,loading:n.pagesStore.loading===n.LOADING_DIR},on:{"update:menuOpen":t=>{n.handleActionsMenu(n.pagesStore.dirPage.id,t)},click:function(t){return n.handleShowPage(n.pagesStore.dirPage.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconDirectory,{attrs:{size:24}})]},proxy:!0},{key:"actions",fn:function(){return[e(n.NcActionButton,{attrs:{"close-after-click":!0},on:{click:function(t){return n.handleShowPageUrl(n.pagesStore.dirPage.id,n.pagesStore.dirPage.label)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconLink,{attrs:{size:20}})]},proxy:!0}],null,!1,2210361315)},[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Show URL/link"))+"\n\t\t\t\t")]),t._v(" "),e(n.NcActionButton,{attrs:{disabled:!!n.pagesStore.loading,"close-after-click":!0},on:{click:function(t){return n.emit("show-settings",n.pagesStore.dirPage.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconCog,{attrs:{size:20}})]},proxy:!0}],null,!1,564425352)},[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Settings"))+"\n\t\t\t\t")])]},proxy:!0}],null,!1,162866023)}):t._e(),t._v(" "),e(n.NcAppNavigationNew,{staticClass:"app-nav-new-item",attrs:{disabled:!!n.pagesStore.loading,text:t.t("appointments","Add New Page")},on:{click:n.handleAddNewPage},scopedSlots:t._u([{key:"icon",fn:function(){return[n.pagesStore.loading===n.LOADING_PAGES?e(n.NcLoadingIcon,{attrs:{size:20}}):e(n.IconPlus,{attrs:{size:20}})]},proxy:!0}])})]},proxy:!0}])},[t._v(" "),null!==n.showPageUrlData?e(n.PageUrlModal,{attrs:{"page-data":n.showPageUrlData},on:{"update:pageData":function(t){n.showPageUrlData=t},"update:page-data":function(t){n.showPageUrlData=t},"show-warning":t=>{n.showPageUrlData=null,n.emit("show-settings-modal",t)}}}):t._e()],1)};c._withStripped=!0;var d=a(2260),m=a(2296),u=a(3946),g=a(1189),v=a(7352),f=a(4239),A=a(1150),h=a(9531),b=a(8625),_=a(7749),y=a(715),C=a(5289);const S={NONE:0,INFO:1,CONTRIBUTION:2,ERROR:3};Object.freeze(S);const w={SIMPLE:"0",EXTERNAL:"1",TEMPLATE:"2"};Object.freeze(w);const k={PREVIEW:1,EDITOR:2};Object.freeze(k);const x={PAGES:"_p",URL:"_u",SETTINGS:"_s",TIMEZONE:"_t",CALWEEK:"_w",DEBUG:"_d"};Object.freeze(x);const I={NONE:-1,NEW:-2};function N(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function D(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}Object.freeze(I);const O="__canceled__";class E{#t={};async getPages(){return this.#e("get_pages","",x.PAGES).catch((e=>((0,C.Qg)(t("appointments","Can't get pages. Check console")),null)))}async addNewPage(){return this.#e("set_pages","_",x.PAGES).catch((e=>((0,C.Qg)(t("appointments","Can't add new page. Check console")),null)))}async deletePage(e){return this.#e("set_pages",e,x.PAGES).catch((e=>((0,C.Qg)(t("appointments","Can't delete page. Check console")),null)))}async getPageUrl(e){return this.#e("get_puburi",e,x.URL).catch((e=>((0,C.Qg)(t("appointments","Error. Check console")),null)))}async getSettings(e){return this.#e("get_all",e,x.SETTINGS).catch((e=>((0,C.Qg)(t("appointments","Can't get Settings. Check console")),null)))}async getCalendarTimezone(e,n){return this.#e("get_tz",e,x.TIMEZONE,{calId:n}).catch((e=>((0,C.Qg)(t("appointments","Can't get Timezone. Check console")),null)))}async getCalendarWeek(t,e){return this.#e("get_calweek",t,x.CALWEEK,{t:e}).catch((t=>((0,C.Qg)(e("appointments","Can't get calendar data. Check console")),null)))}async addSimpleAppointments(e){const n="__cal_data";this.cancel(n);const a=y.Ay.CancelToken.source();return this.#t[n]=a,y.Ay.post("caladd",e,{cancelToken:a.token}).then((t=>({status:t.status,data:t.data}))).catch((e=>(a.token.reason&&"ERR_CANCELED"===a.token.reason.code&&a.token.reason.message===O||(0,C.Qg)(t("appointments","Error: check console")),null))).finally((()=>{delete this.#t[n]}))}async setOne(e,n,a){return this.#e("set_one",e,n,{k:n,v:a}).catch((e=>((0,C.Qg)(t("appointments","Can't apply settings")),null)))}getDebugData(e,n){return this.#e(e,void 0,x.DEBUG,n,"debug").catch((e=>((0,C.Qg)(t("appointments","error: cannot get debug data")),null)))}cancel(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;if(t){const e=this.#t[t];e&&e.cancel(O)}else for(const t in this.#t)this.#t[t].cancel(O)}async#e(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"state";this.cancel(n);const s=y.Ay.CancelToken.source();return this.#t[n]=s,y.Ay.post(o,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?N(Object(n),!0).forEach((function(e){D(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):N(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({a:t,p:e},a),{cancelToken:s.token}).then((t=>({status:t.status,data:t.data}))).catch((t=>{if(s.token.reason&&"ERR_CANCELED"===s.token.reason.code&&s.token.reason.message===O)return null;throw"error"})).finally((()=>{delete this.#t[n]}))}}const P=e=>e||t("appointments","Public Page"),T=t=>"d"===t[0],L=new E,M="",B="any",z=(0,r.nY)("pages",{state:()=>({pages:[],dirPage:{},loading:M}),actions:{getAllPages(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;this.loading=e,L.getPages().then((e=>{if(this.pages=[],this.dirPage={id:"d0",label:t("appointments","Directory Page"),hasData:!1,showInNavigation:!1},null!==e){for(let t=0,n=e.data,a=n.length;t<a;t++){const e=n[t];"page"===e.type?(e.label=P(e.label),this.pages.push(e)):"dir"===e.type&&(this.dirPage.id=e.id,this.dirPage.hasData=e.hasData)}this.dirPage.showInNavigation=this.pages.length>0}this.loading=M}))},async toggleEnabled(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;const n=R(t,this.pages);return n?(this.loading=e,L.setOne(t,"enabled",!n.enabled).then((t=>(null!==t&&202!==t.status&&(n.enabled=!n.enabled),this.loading=M,t)))):null},updatePageLabel(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B;const a=R(t,this.pages);if(!a)return;this.loading=n;const o=e;a.label=e,L.setOne(t,"label",e).then((t=>{null===t&&(a.label=o),this.loading=M}))},async addNewPage(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.loading=t,L.addNewPage().then((e=>(null!==e&&202!==e.status?this.getAllPages(t):this.loading=M,e)))},async deletePage(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return this.loading=e,L.deletePage(t).then((t=>(null!==t?(202===t.status&&t.data.message&&(0,C.Qg)(t.data.message),this.getAllPages(e)):this.loading=M,t)))},async getPageUrl(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:B;return this.loading=e,L.getPageUrl(t).then((t=>(this.loading=M,t)))},getPageById(t){return R(t,this.pages)},cancelAllRequest(){L.cancel()}}}),R=(e,n)=>{const a=n.find((t=>{if(t.id===e)return t}));return a||((0,C.Qg)(t("appointments","error: page not found")),null)};var U=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcModal,{staticClass:"srgdev-appt-modal-container",attrs:{show:null!==n.props.pageData,size:"large"},on:{"update:show":n.handleUpdateShow}},[e("div",{staticClass:"srgdev-appt-modal_content"},[e("div",{staticClass:"srgdev-appt-modal-header"},[t._v("\n\t\t\t"+t._s(t.t("appointments","Page URL")+(n.props.pageData&&n.props.pageData.label?" - "+n.props.pageData.label:""))+"\n\t\t")]),t._v(" "),0===n.pageURLs.length?e("div",[e(n.NcLoadingIcon,{attrs:{size:64}})],1):e("div",[e("div",{staticClass:"srgdev-appt-modal-lbl",staticStyle:{"user-select":"text",cursor:"text"}},[t._v("\n\t\t\t\t"+t._s(n.pageURLs[0])+"\n\t\t\t")]),t._v(" "),""!==n.pageURLs[1]?e(n.ApptAccordion,{staticStyle:{display:"inline-block"},attrs:{title:t.t("appointments","Show iframe/embeddable"),open:!1},scopedSlots:t._u([{key:"content",fn:function(){return[e("div",{staticClass:"srgdev-appt-modal-lbl_dim",staticStyle:{"user-select":"text",cursor:"text"}},[t._v("\n\t\t\t\t\t\t"+t._s(n.pageURLs[1])+"\n\t\t\t\t\t")])]},proxy:!0}],null,!1,1565864437)}):t._e(),t._v(" "),e("div",[e(n.NcButton,{staticClass:"srgdev-appt-modal-btn",attrs:{"aria-label":t.t("appointments","Copy"),type:"tertiary"},on:{click:n.handleCopyUrl},scopedSlots:t._u([{key:"icon",fn:function(){return[!1===n.showCopyCheck?e(n.IconCopy,{attrs:{size:20}}):e(n.IconCheckAll,{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Copy"))+"\n\t\t\t\t")]),t._v(" "),e(n.NcButton,{staticClass:"srgdev-appt-modal-btn",attrs:{"aria-label":t.t("appointments","Visit"),type:"tertiary"},on:{click:n.handleVisitURL},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconOpen,{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Visit"))+"\n\t\t\t\t")])],1)],1)])])};U._withStripped=!0;var j=function(){var t=this,e=t._self._c;return e("div",[e("div",{class:[t.isOpen?"icon-triangle-s appt-accordion-bold-title":"icon-triangle-e","appt-accordion-title"],on:{click:t.toggle}},[""!==t.help?e("a",{staticClass:"icon-info srgdev-appt-info-link",style:t.helpStyle,on:{click:function(e){return t.$root.$emit("helpWanted",t.help)}}}):t._e(),t._v("\n    "+t._s(t.title)+"\n  ")]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.isOpen,expression:"isOpen"}],staticClass:"appt-accordion-content"},[t._t("content")],2)])};j._withStripped=!0;const W={name:"ApptAccordion",props:{title:{type:String,default:"",required:!0},open:{type:Boolean,default:!1},help:{type:String,default:""},helpStyle:{type:String,default:""}},data:function(){return{isOpen:this.open}},methods:{toggle(){this.isOpen=!this.isOpen}}};a(9198);var F=a(4486);const q=(0,F.A)(W,j,[],!1,null,"7a9f93d0",null).exports;var H=a(8351),V=a(9974),G=a(8098);async function $(t,e){let n="Europe/London";return(new E).getCalendarTimezone(t,e).then((t=>(null!==t&&t.data&&"utc"!==t.data.toLowerCase()&&(n=t.data.trim()),y.Ay.get((0,o.uM)("appointments","ajax/zones.js"))))).then((t=>{if(200===t.status){let e=t.data;if("object"==typeof e&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("zones")){let t="";if(void 0!==e.zones[n])t=e.zones[n].ics.join("\r\n");else if(void 0!==e.aliases[n]){let a=e.aliases[n].aliasTo;void 0!==e.zones[a]&&(n=a,t=e.zones[a].ics.join("\r\n"))}return{name:n,data:"BEGIN:VTIMEZONE\r\nTZID:"+n+"\r\n"+t.trim()+"\r\nEND:VTIMEZONE"}}throw new Error("bad tzr.data")}throw new Error("bad status: "+t.status)})).catch((t=>null))}function X(t){const e=t.split(String.fromCharCode(31));return e.length<2?((0,C.Qg)("error: can not parse page URL"),null):e}const Q={__name:"PageUrlModal",props:{pageData:Object},emits:["update:pageData","show-warning"],setup(t,e){let{emit:n}=e;const a=t,o=new E,i=(0,s.ref)([]),r=(0,s.ref)(!1);(0,s.onMounted)((()=>{a.pageData&&o.getPageUrl(a.pageData.pageId).then((t=>{if(null!==t)if(t.data.message)n("show-warning",t.data);else{const e=X(t.data);null!==e&&(i.value=e)}else l(!1)}))}));const l=t=>{!1===t&&(o.cancel(),n("update:pageData",null))};let c=-1;return{__sfc:!0,settingsService:o,props:a,emit:n,pageURLs:i,showCopyCheck:r,handleUpdateShow:l,handleVisitURL:()=>{window.open(i.value[0],"_blank")},copyCheckTimeout:c,handleCopyUrl:()=>{const t=()=>{r.value=!0,-1!==c&&clearTimeout(c),c=setTimeout((()=>{r.value=!1,clearTimeout(c)}),500)},e=i.value[0];if(navigator.clipboard)navigator.clipboard.writeText(e).then((()=>{t()}),(t=>{}));else{let n=document.createElement("textarea");n.value=e,n.style.top="0",n.style.left="0",n.style.position="fixed",n.style.width="2em",n.style.height="2em",n.style.padding=0,n.style.border="none",n.style.outline="none",n.style.boxShadow="none",n.style.background="transparent",document.body.appendChild(n),n.focus(),n.select();try{document.execCommand("copy"),t()}catch(t){}document.body.removeChild(n)}},ApptAccordion:q,IconCheckAll:H.A,IconCopy:V.A,IconOpen:G.A,NcButton:p.x1,NcLoadingIcon:p.ne,NcModal:p.FH}}},K=Q;a(9006);const Y=(0,F.A)(K,U,[],!1,null,"014c0761",null).exports,J={__name:"Navigation2",emits:["show-page","show-settings","show-settings-modal"],setup(e,n){let{emit:a}=n;const o=(0,s.ref)(null),i=z();(0,s.onMounted)((()=>{i.getAllPages("p")}));return{__sfc:!0,LOADING_PAGES:"p",LOADING_LABEL:"l",LOADING_DIR:"d",LOADING_SHARE:"s",emit:a,showPageUrlData:o,pagesStore:i,handleShowPageUrl:(t,e)=>{o.value={pageId:t,label:e}},handleLabelSubmit:(t,e)=>{if(t&&e.target){const n=e.target.querySelector('input[type="text"]');n&&i.updatePageLabel(t,n.value,"l")}},handleShowPage:t=>{i.loading||a("show-page",t)},handleDeletePage:e=>{confirm(t("appointments","Delete action cannot be undone. Proceed?"))&&i.deletePage(e,e).then((t=>{null!==t&&a("show-page","-1")}))},handleAddNewPage:()=>{i.addNewPage("p").then((t=>{202===t.status&&a("show-settings-modal",{type:S.CONTRIBUTION,message:t.data.message})}))},handleEnablePage:t=>{i.toggleEnabled(t,t).then((e=>{a("show-page",t),202===e.status&&a("show-settings-modal",{type:e.data.type,message:e.data.message})}))},handleActionsMenu:(t,e)=>{!0===e&&a("show-page",t,!1)},IconCog:d.A,IconEarth:m.A,IconEarthOff:u.A,IconLink:g.A,IconPencil:v.A,IconPlus:f.A,IconWeb:A.A,IconWebOff:h.A,IconDelete:b.A,IconDirectory:_.A,NcActionButton:p.Ko,NcActionInput:p.Az,NcAppNavigation:p.hN,NcAppNavigationItem:p.G_,NcAppNavigationNew:p.TM,NcLoadingIcon:p.ne,PageUrlModal:Y}}};a(1033);const Z=(0,F.A)(J,c,[],!1,null,"733acb55",null).exports;var tt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e(n.NcAppSettingsDialog,{class:{"hide-navigation":n.settingsStore.loading[n.LOADING_ALL]},attrs:{name:n.label,open:!!t.pageId,"show-navigation":!n.settingsStore.loading[n.LOADING_ALL]},on:{"update:open":n.handleUpdateOpen}},[[n.settingsStore.loading[n.LOADING_ALL]?e(n.NcAppSettingsSection,{staticStyle:{"text-align":"center"},attrs:{id:"loading",name:t.t("appointments","Loading Settings")}},[e("div",{staticStyle:{"margin-bottom":"2em"}},[e(n.NcLoadingIcon,{attrs:{size:64}})],1)]):t._e(),t._v(" "),n.settingsStore.loading[n.LOADING_ALL]?t._e():[e(n.NcButton,{staticClass:"preview-button",attrs:{"aria-label":t.t("appointments","Preview Changes"),readonly:n.readonly,disabled:"loading"===n.pageUrl,type:"tertiary-no-background"},on:{click:n.handleShowPreview},scopedSlots:t._u([{key:"icon",fn:function(){return["loading"===n.pageUrl?e(n.NcLoadingIcon,{attrs:{size:20}}):e(n.IconPreview,{attrs:{size:20}})]},proxy:!0}],null,!1,1438310680)},[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Preview Changes"))+"\n\t\t\t\t")]),t._v(" "),!1===n._isDir?[e(n.NcAppSettingsSection,{attrs:{id:"calendars",name:t.t("appointments","Calendars and Schedule")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Manage appointments and calendar settings"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionCalendars,{on:{"show-settings-modal":t=>{n.emit("show-settings-modal",t)},"show-timeslot-editor":t=>{n.emit("show-timeslot-editor",t)}}})],1),t._v(" "),e(n.NcAppSettingsSection,{attrs:{id:"contact",name:t.t("appointments","Contact Information")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Form header and event organizer settings"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionContact)],1),t._v(" "),e(n.NcAppSettingsSection,{attrs:{id:"email",name:t.t("appointments","Email and Notifications")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Control when emails and notifications are sent"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionEmail)],1),t._v(" "),e(n.NcAppSettingsSection,{attrs:{id:"page_and_form",name:t.t("appointments","Form Settings")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Control what your visitors see"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionPage)],1),t._v(" "),e(n.NcAppSettingsSection,{attrs:{id:"security",name:t.t("appointments","Security")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Security related settings"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionSecurity)],1),t._v(" "),e(n.NcAppSettingsSection,{attrs:{id:"reminders",name:t.t("appointments","Reminders")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Send appointment reminders to attendees"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionReminders,{on:{"show-settings-modal":t=>{n.emit("show-settings-modal",t)}}})],1),t._v(" "),!1===n.readOnlyProps.talk_integration_disabled?e(n.NcAppSettingsSection,{attrs:{id:"talk",name:t.t("appointments","Talk Integration")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Talk room settings for appointments"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionTalk,{on:{"show-settings-modal":t=>{n.emit("show-settings-modal",t)}}})],1):t._e(),t._v(" "),!1===n.readOnlyProps.bbb_integration_disabled?e(n.NcAppSettingsSection,{attrs:{id:"bbb",name:t.t("appointments","Video Integration")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Video room settings for appointments"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionBbb)],1):t._e(),t._v(" "),e(n.NcAppSettingsSection,{attrs:{id:"advanced",name:t.t("appointments","Advanced")}},[e("h4",{staticClass:"ps-section-subtitle"},[t._v("\n\t\t\t\t\t\t\t"+t._s(t.t("appointments","Advanced settings and configurations"))+"\n\t\t\t\t\t\t")]),t._v(" "),e(n.SectionAdvanced)],1),t._v(" "),!1===n.settingsStore.k&&void 0!==n.settingsStore.settings.__ckey?e(n.NcAppSettingsSection,{attrs:{id:"ckey",name:t.t("appointments","Contributor Key")}},[e("div",{staticClass:"ps-section-wrap"},[e(n.NcTextField,{staticClass:"ps-text-field ps-vert-spacing",attrs:{label:!0===n.settingsStore.loading.__ckey?t.t("appointments","Verifying key"):t.t("appointments","Enter key"),value:n.settingsStore.settings.__ckey,disabled:!0===n.settingsStore.loading.__ckey,showTrailingButton:!0,trailingButtonIcon:"arrowRight"},on:{"trailing-button-click":n.handleCKey,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:n.handleCKey.apply(null,arguments)},"update:value":function(e){return t.$set(n.settingsStore.settings,"__ckey",e)}}})],1)]):t._e()]:e(n.SettingsDir)]]],2)],1)};tt._withStripped=!0;var et=a(6451),nt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},[e(n.ComboInput,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"titleTemplate",placeholder:"%I %N",label:t.t("appointments","Event Title Template"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","Following template tokens can be used to customize Appointment's Title:"))),e("br"),t._v(" "),e("strong",[t._v("%I")]),t._v(" - "+t._s(t.t("appointments","Icon"))+" (✔️)"),e("br"),t._v(" "),e("strong",[t._v("%N")]),t._v(" - "+t._s(t.t("appointments","Attendee name"))),e("br"),t._v(" "),e("strong",[t._v("%O")]),t._v(" - "+t._s(t.t("appointments","Organization Name"))),e("br"),t._v(" "),e("strong",[t._v("%P")]),t._v(" - "+t._s(t.t("appointments","Page Tag"))),e("br"),t._v(" "),e("strong",[t._v("%T")]),t._v(" - "+t._s(t.t("appointments","Mask Token (first three letters of name + semi-random token)"))),e("br"),t._v(" "),e("strong",[t._v("%E")]),t._v(" - "+t._s(t.t("appointments","Event Preset Title"))),e("br"),e("br"),t._v("\n\t\t\t"+t._s(t.t("appointments","For example template like {tokens} will set new appointments title to something like John Smith (Good Org)",{tokens:"%N (%O)"}))+"\n\t\t")]},proxy:!0}])}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"confirmedRdrUrl",label:t.t("appointments","Redirect Confirmed URL"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments",'When this URL is specified, visitors will be redirected there after confirming their email address. A base64-encoded query parameter, "d=...", containing a JSON object with relevant data, will be added to the URL.'))+"\n\t\t")]},proxy:!0}])}),t._v(" "),e("div",{staticClass:"srgdev-appt-sb-indent"},[e(n.ComboCheckbox,{staticStyle:{"margin-top":"-1em"},attrs:{"prop-name":"confirmedRdrId",disabled:""===n.settingsStore.settings.confirmedRdrUrl,label:t.t("appointments","Generate ID"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"confirmedRdrData",disabled:""===n.settingsStore.settings.confirmedRdrUrl,label:t.t("appointments","Include Form Data"),store:n.settingsStore}})],1),t._v(" "),e(n.LabelAccordion,{staticClass:"ps-vert-spacing",attrs:{label:t.t("appointments","Weekly Template"),accordion:!0},scopedSlots:t._u([{key:"accordionIcon",fn:function(){return[e(n.IconWeekly,{attrs:{size:24}})]},proxy:!0}])},[t._v(" "),e(n.ComboSelect,{attrs:{"prop-name":"tmmSubscriptionsSync","default-value":"0",label:t.t("appointments","Subscriptions Sync Interval"),store:n.settingsStore,options:n.syncOptions},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t"+t._s(t.t("appointments","When linked (subscription) calendars are selected for conflict check, the Appointments app can pull data from remote servers before checking for scheduling conflicts. It is impractical to pull the data on every request, as this would increase processing time, especially if multiple remote calendars are selected. Your calendar system has a cache synchronization mechanism to facilitate timely updates. This option is provided just in case you feel that the data is not refreshed often enough."))+"\n\t\t\t")]},proxy:!0}])})],1),t._v(" "),e(n.LabelAccordion,{staticClass:"ps-vert-spacing",attrs:{label:t.t("appointments","External Mode"),accordion:!0},scopedSlots:t._u([{key:"accordionIcon",fn:function(){return[e(n.IconExternal,{attrs:{size:24}})]},proxy:!0}])},[t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"nrPushRec",label:t.t("appointments","Optimize recurrence"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t"+t._s(t.t("appointments",'If recurrent events are used in the "Source Calendar" the start (DTSTART) date will be pushed forward once in a while in order to improve performance.'))+"\n\t\t\t")]},proxy:!0}])}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"nrRequireCat",label:t.t("appointments","Require 'Appointment' category"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t"+t._s(t.t("appointments",'When this option is set only events with with "Category" set to "Appointment" (in English) will be considered.'))+"\n\t\t\t")]},proxy:!0}])})],1),t._v(" "),e(n.LabelAccordion,{staticClass:"ps-vert-spacing",attrs:{label:t.t("appointments","Debugging"),accordion:!0},scopedSlots:t._u([{key:"accordionIcon",fn:function(){return[e(n.IconDebug,{attrs:{size:24}})]},proxy:!0}])},[t._v(" "),e(n.SectionAdvancedDebugging)],1)],1)};function at(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function ot(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}nt._withStripped=!0;const st=new E,it=[],rt={};let lt="";const pt="__all__",ct={talk_formDefLabel:"",talk_formDefPlaceholder:"",talk_formDefReal:"",talk_formDefVirtual:"",talk_integration_disabled:!1,bbb_integration_disabled:!1,bjm:"",cliUrl:"",defaultLang:"",token:""},dt=(0,r.nY)("settings",{state:()=>({settings:{enabled:!1,label:"",organization:"",email:"",address:"",phone:"",confirmedRdrUrl:"",confirmedRdrId:!1,confirmedRdrData:!1,mainCalId:"-1",destCalId:"-1",nrSrcCalId:"-1",nrDstCalId:"-1",nrPushRec:!0,nrRequireCat:!1,nrAutoFix:!1,tmmDstCalId:"-1",tmmMoreCals:[],tmmSubscriptions:[],tmmSubscriptionsSync:"0",prepTime:"0",bufferBefore:0,bufferAfter:0,whenCanceled:"mark",allDayBlock:!1,titleTemplate:"",privatePage:!1,tsMode:"2",icsFile:!1,skipEVS:!1,attMod:!0,attDel:!0,meReq:!1,meConfirm:!1,meCancel:!1,vldNote:"",cnfNote:"",icsNote:"",formTitle:"",nbrWeeks:"1",showEmpty:!0,startFNED:!1,showWeekends:!1,time2Cols:!1,endTime:!1,hidePhone:!1,gdpr:"",gdprNoChb:!1,pageTitle:"",prefillInputs:0,prefilledType:0,formFinishText:"",metaNoIndex:!1,pageStyle:"",useNcTheme:!1,template_data:[],template_info:{tzName:"",tzData:""},fi_html:"",fi_json:[],secHcapSiteKey:"",secHcapSecret:"",secHcapEnabled:!1,secEmailBlacklist:[],reminders_data_0_seconds:"0",reminders_data_0_actions:!1,reminders_data_1_seconds:"0",reminders_data_1_actions:!1,reminders_data_2_seconds:"0",reminders_data_2_actions:!1,reminders_moreText:"",reminders_friday:!1,talk_enabled:!1,talk_delete:!1,talk_emailText:"",talk_lobby:!1,talk_password:!1,talk_nameFormat:0,talk_formFieldEnable:!1,talk_formLabel:"",talk_formPlaceholder:"",talk_formTxtReal:"",talk_formTxtVirtual:"",talk_formTxtTypeChange:"",bbbEnabled:!1,bbbDelete:!0,bbbAutoDelete:!0,bbbPassword:!1,bbbFormEnabled:!1,debugging_mode:0},dirSettings:{dirItems:[],privatePage:!1,pageTitle:"",pageStyle:"",useNcTheme:!1},calendars:[],k:!1,loading:{}}),actions:{async getAllSettings(t){return this._updateLoading(pt,!0),st.getSettings(t).then((e=>{const n=null!==e;if(n){const n=e.data;if(T(t))for(const t in this.dirSettings)n.settings.hasOwnProperty(t)&&(this.dirSettings[t]=n.settings[t]);else{for(const t in this.settings)n.settings.hasOwnProperty(t)&&(this.settings[t]=n.settings[t]);this.settings.label=P(this.settings.label),n.settings.hasOwnProperty("reminders")&&Object.assign(this.settings,this._flattenReminders(n.settings.reminders,"_")),this.calendars=n.cals.split(String.fromCharCode(31)).map((t=>{const e=t.split(String.fromCharCode(30));return{name:e[0],color:e[1],id:e[2],isReadOnly:"1"===e[3],isSubscription:"1"===e[4]}})),this.k=!!n.k,this.settings.__ckey="";for(const t in ct)n.settings[t]&&(ct[t]=n.settings[t])}lt=t}return this._updateLoading(pt,!1),n}))},setOne(t,e){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;arguments.length>2&&void 0!==arguments[2]&&arguments[2]?(it[t]&&clearTimeout(it[t]),it[t]=setTimeout((()=>{this._setOne(t,e).then((t=>{n&&n(t)})),delete it[t]}),1e3)):this._setOne(t,e).then((t=>{n&&n(t)}))},async _setOne(t,e){if(!lt)return(0,C.Qg)("error: page id missing"),null;const n="d"===lt[0]?this.dirSettings:this.settings;let a,o,s;return rt.hasOwnProperty(t)?(a=rt[t],delete rt[t]):(a=n[t],n[t]=e),a===e?e:(this._updateLoading(t,!0),t.startsWith("reminders_")?(o="reminders",s=this._inflateReminders(n,"_")):(o=t,s=e),st.setOne(lt,o,s).then((e=>(null!==e&&202!==e.status||(n[t]=a),this._updateLoading(t,!1),e))))},setOldValue(t,e){rt[t]=e},cancelServiceRequest(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;t||(this.loading={}),st.cancel(t)},_updateLoading(t,e){e?this.loading[t]=!0:delete this.loading[t],this.loading=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?at(Object(n),!0).forEach((function(e){ot(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},this.loading)},_flattenReminders(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"reminders";if(null===t)return{};if("object"==typeof t){const a={};for(const o in t){const s=""+n+e+o,i=t[o];"object"==typeof i?Object.assign(a,this._flattenReminders(i,e,s)):a[s]=i}return a}{const e={};return e[""+n]=t,e}},_inflateReminders(t,e){const n={};for(const a in t){if(!a.startsWith("reminders_"))continue;const o=a.split(e),s=o.length-1;for(let e=1,i=n;e<o.length;e++){const n=o[e];i.hasOwnProperty(n)||(i[n]=e===s?t[a]:/^\d$/.test(o[e+1])?[]:{}),i=i[n]}}return n}}});var mt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e("div",{staticClass:"flex-wrapper"},[e("label",t._b({class:["wrapper-label",{"wrapper-label-accordion":t.accordion}],on:{click:n.toggleOpen}},"label",t.$attrs,!1),[t.accordion?e("span",{staticClass:"wrapper-label-arrow"},[t._t("accordionIcon",(function(){return[e(n.IconMenu,{attrs:{size:24}})]}))],2):t._e(),t._v(" "),e("span",{class:["wrapper-label-text",{"wrapper-label-text-open":n.isOpen}]},[t._v("\n\t\t\t"+t._s(t.label)+"\n\t\t")]),t._v(" "),t.loading?e("span",{staticClass:"wrapper-label-loading"},[e(n.NcLoadingIcon,{attrs:{size:16}})],1):t._e()]),t._v(" "),n.slots?.helpPopover?e("div",{staticClass:"wrapper-help"},[e(n.NcPopover,{attrs:{"focus-trap":!1},scopedSlots:t._u([{key:"trigger",fn:function(){return[e(n.IconInfo,{staticClass:"wrapper-help-icon",attrs:{size:16}})]},proxy:!0}],null,!1,3809570866)},[t._v(" "),[e("div",{staticClass:"wrapper-help-content"},[t._t("helpPopover")],2)]],2)],1):t._e()]),t._v(" "),t.accordion&&n.isOpen?e("div",{staticClass:"wrapper-slot"},[t._t("default")],2):t._e()])};mt._withStripped=!0;var ut=a(9435),gt=a(410),vt=a(8126);const ft={__name:"LabelAccordion",props:{label:String,loading:Boolean,accordion:Boolean},emits:["open-accordion"],setup(t,e){let{emit:n}=e;const a=t,o=(0,s.useSlots)(),i=(0,s.ref)(!1);return{__sfc:!0,slots:o,emit:n,props:a,isOpen:i,toggleOpen:()=>{!0===a.accordion&&(!1===i.value&&n("open-accordion"),i.value=!i.value)},IconMenu:ut.A,IconInfo:gt.A,NcLoadingIcon:vt.A,NcPopover:p.rI}}};a(646);const At=(0,F.A)(ft,mt,[],!1,null,"669b0236",null).exports;var ht=a(9513),bt=a(4311),_t=a(7468),yt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e(n.LabelAccordion,{attrs:{label:t.label,loading:n.isLoading},scopedSlots:t._u([n.slots?.help?{key:"helpPopover",fn:function(){return[t._t("help")]},proxy:!0}:null],null,!0)}),t._v(" "),"textarea"===t.type?e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.settings[t.propName],expression:"settings[propName]"}],staticClass:"ps-textarea ps-vert-spacing",attrs:{placeholder:t.placeholder},domProps:{value:n.settings[t.propName]},on:{focus:n.handleFocus,blur:function(e){return t.store.setOne(t.propName,n.settings[t.propName])},input:function(e){e.target.composing||t.$set(n.settings,t.propName,e.target.value)}}}):"password"===t.type?e(n.NcPasswordField,{staticClass:"ps-text-field ps-vert-spacing",attrs:{"label-outside":!0,placeholder:t.placeholder,type:t.type,disabled:t.disabled||n.isLoading,value:n.settings[t.propName]},on:{"update:value":function(e){return t.$set(n.settings,t.propName,e)},focus:n.handleFocus,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.store.setOne(t.propName,n.settings[t.propName])},blur:function(e){return t.store.setOne(t.propName,n.settings[t.propName])}}}):e(n.NcTextField,{staticClass:"ps-text-field ps-vert-spacing",attrs:{"label-outside":!0,placeholder:t.placeholder,type:t.type,disabled:t.disabled||n.isLoading,value:n.settings[t.propName]},on:{"update:value":function(e){return t.$set(n.settings,t.propName,e)},focus:n.handleFocus,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.store.setOne(t.propName,n.settings[t.propName])},blur:function(e){return t.store.setOne(t.propName,n.settings[t.propName])}}})],1)};yt._withStripped=!0;const Ct={__name:"ComboInput",props:{propName:{type:String,required:!0},store:{type:Object,required:!0},label:{type:String,required:!0},settingsType:{type:String,required:!1,default:"settings"},type:{type:String,required:!1,default:"text"},placeholder:{type:String,required:!1},disabled:{Type:Boolean,required:!1},focusInterceptor:{type:Function,required:!1}},setup(t){const e=t,n=(0,s.useSlots)(),a=e.store[e.settingsType],o=(0,s.computed)((()=>!0===e.store.loading[e.propName]));return{__sfc:!0,slots:n,props:e,settings:a,isLoading:o,handleFocus:t=>{if(e.focusInterceptor&&!0===e.focusInterceptor({event:t,label:e.label,propName:e.propName}))return t.preventDefault(),t.stopPropagation(),void t.currentTarget.blur();e.store.setOldValue(e.propName,a[e.propName])},LabelAccordion:At,NcTextField:p.v,NcPasswordField:p.b9}}};const St=(0,F.A)(Ct,yt,[],!1,null,"f5361222",null).exports;var wt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e(n.LabelAccordion,{attrs:{label:t.label,loading:n.isLoading},scopedSlots:t._u([n.slots?.help?{key:"helpPopover",fn:function(){return[t._t("help")]},proxy:!0}:null],null,!0)}),t._v(" "),e(n.PsSelect,{staticClass:"ps-vert-spacing",attrs:{"placeholder-label":t.placeholder,"selected-value":t.store.settings[t.propName]||t.defaultValue,options:t.options,disabled:n.isLoading,noDrop:t.clickInterceptor&&!1===t.store.k},on:{input:n.handleInput},nativeOn:{click:function(t){return n.handleClick.apply(null,arguments)}}})],1)};wt._withStripped=!0;var kt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcSelect,t._g(t._b({staticClass:"ps-nc-select-internal",attrs:{value:n.selectedLabel,labelOutside:!0,clearable:!1}},"NcSelect",t.$attrs,!1),t.$listeners))};kt._withStripped=!0;const xt={__name:"PsSelect",props:{selectedValue:[Number,String],placeholderLabel:String},setup(e){const n=e,a=(0,s.useAttrs)(),o=(0,s.computed)((()=>{const e=a.options.find((t=>t.value===n.selectedValue));return e?e.label:n.placeholderLabel?n.placeholderLabel:t("appointments","Select One Option")}));return{__sfc:!0,props:n,attrs:a,selectedLabel:o,NcSelect:p.EQ}}};a(1755);const It=(0,F.A)(xt,kt,[],!1,null,"7a9377ae",null).exports,Nt={__name:"ComboSelect",props:{propName:{type:String,required:!0},options:{type:Array,required:!0},store:{type:Object,required:!0},label:{type:String,required:!0},defaultValue:{type:String|Number,required:!1,default:"-1"},placeholder:{type:String,required:!1,default:t("appointments","Calendar Required")},emitInput:{type:Boolean,required:!1,default:!1},clickInterceptor:{type:Function,required:!1}},emits:["combo-select-input"],setup(t,e){let{emit:n}=e;const a=t,o=(0,s.useSlots)(),i=(0,s.computed)((()=>!0===a.store.loading[a.propName])),r=(0,s.computed)((()=>!(a.clickInterceptor&&!1===a.store.k)));return{__sfc:!0,emit:n,slots:o,props:a,isLoading:i,dropdownShouldOpen:r,handleInput:t=>{!0===a.emitInput?n("combo-select-input",{prop:a.propName,value:t}):a.store.setOne(a.propName,t.value)},handleClick:t=>{if(!1===a.store.k&&a.clickInterceptor&&!0===a.clickInterceptor({event:t,label:a.label,propName:a.propName}))return t.stopPropagation(),t.preventDefault(),!1},LabelAccordion:At,PsSelect:It}}};a(5600);const Dt=(0,F.A)(Nt,wt,[],!1,null,"4fddca30",null).exports;var Ot=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"wrapper-checkbox",class:{"wrapper-checkbox__help-padding":n.slots?.help}},[e(n.PsCheckbox,{staticClass:"ps-settings-checkbox",attrs:{label:t.label,checked:n.settings[t.propName],disabled:n.isLoading||t.disabled,loading:n.isLoading,indeterminate:t.indeterminate},on:{"update:checked":e=>{t.store.setOne(t.propName,e),n.emit("value-updated",{propName:t.propName,value:e})}},nativeOn:{"!click":function(t){return n.handleClick.apply(null,arguments)}}}),t._v(" "),n.slots?.help?e("div",{staticClass:"wrapper-checkbox-help"},[e(n.NcPopover,{scopedSlots:t._u([{key:"trigger",fn:function(){return[e(n.IconInfo,{staticClass:"wrapper-help-icon",attrs:{size:16}})]},proxy:!0}],null,!1,3809570866)},[t._v(" "),[e("div",{staticClass:"wrapper-help-content"},[t._t("help")],2)]],2)],1):t._e()],1)};Ot._withStripped=!0;var Et=function(){var t=this;return(0,t._self._c)(t._self._setupProxy.NcCheckboxRadioSwitch,t._g(t._b({},"NcCheckboxRadioSwitch",t.$attrs,!1),t.$listeners),[t._v("\n\t"+t._s(t.label)+"\n")])};Et._withStripped=!0;const Pt={__name:"PsCheckbox",props:{label:String},setup:t=>({__sfc:!0,props:t,NcCheckboxRadioSwitch:p.AO})};a(5153);const Tt=(0,F.A)(Pt,Et,[],!1,null,"6acc3854",null).exports,Lt={__name:"ComboCheckbox",props:{propName:{type:String,required:!0},store:{type:Object,required:!0},label:{type:String,required:!0},settingsType:{type:String,required:!1,default:"settings"},disabled:{type:Boolean,required:!1,default:!1},indeterminate:{type:Boolean,required:!1,default:!1},clickInterceptor:{type:Function,required:!1}},emits:["value-updated"],setup(t,e){let{emit:n}=e;const a=t,o=(0,s.useSlots)(),i=a.store[a.settingsType],r=(0,s.computed)((()=>!0===a.store.loading[a.propName]));return{__sfc:!0,slots:o,emit:n,props:a,settings:i,isLoading:r,handleClick:t=>{if(!1===a.store.k&&a.clickInterceptor&&!0===a.clickInterceptor({event:t,label:a.label,propName:a.propName}))return t.stopPropagation(),t.preventDefault(),!1},PsCheckbox:Tt,NcPopover:p.rI,IconInfo:gt.A}}};a(6776);const Mt=(0,F.A)(Lt,Ot,[],!1,null,"2e4beec0",null).exports;var Bt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticStyle:{"margin-top":"1.25em"}},[e(n.NcButton,{staticClass:"ps-vert-spacing",attrs:{"aria-label":t.t("appointments","Settings Dump")},on:{click:function(t){return n.handleAction("settings_dump",{p:n.pageId})}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconDownload,{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("appointments","Settings Dump"))+"\n\t")]),t._v(" "),e(n.LabelAccordion,{attrs:{label:t.t("appointments","Get raw calendar data")}}),t._v(" "),e(n.PsSelect,{staticClass:"ps-vert-spacing",attrs:{"placeholder-label":t.t("appointments","Calendar Required"),"selected-value":-1,options:n.calendarOptions},on:{input:t=>{n.handleAction("get_raw",{p:n.pageId,cal_id:t.value})}}}),t._v(" "),e(n.LabelAccordion,{attrs:{label:t.t("appointments","Sync remote calendar now")}}),t._v(" "),e(n.PsSelect,{staticClass:"ps-vert-spacing",attrs:{"placeholder-label":t.t("appointments","Calendar Required"),"selected-value":-1,options:n.remoteCalendarOptions,noDrop:0===n.remoteCalendarOptions.length},on:{input:t=>{n.handleAction("sync",{p:n.pageId,cal_id:t.value})}}}),t._v(" "),e(n.ComboSelect,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"debugging_mode",label:t.t("appointments","Debugging Mode"),"placeholder-label":t.t("appointments","Debugging Mode"),"default-value":0,options:n.debugModeOptions,store:n.settingsStore}}),t._v(" "),""!==n.debugRequest.action?e(n.DebugDataModal,{attrs:{size:"large",request:n.debugRequest},on:{"close-modal":n.handleCloseModal}}):t._e(),t._v(" "),e(n.NcTextField,{attrs:{label:"Get by Event UID",trailingButtonIcon:"arrowRight",showTrailingButton:!0,trailingButtonLabel:"Send"},on:{"trailing-button-click":n.sendUid},model:{value:n.eventUid,callback:function(t){n.eventUid=t},expression:"eventUid"}})],1)};Bt._withStripped=!0;var zt=a(9979),Rt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcModal,{staticStyle:{"z-index":"10002"},attrs:{size:"large",setReturnFocus:"false"},on:{"update:show":n.handleUpdateShow}},[e("div",{staticClass:"srgdev-appt-modal-wrap"},[n.state.loading?e("div",[t._v("\n\t\t\t"+t._s(t.t("appointments","Loading..."))+"\n\t\t")]):""!==n.state.error?e("div",[t._v("\n\t\t\t"+t._s(n.state.error)+"\n\t\t")]):e("pre",{staticStyle:{"font-size":"90%",padding:"0 1em","text-align":"left"}},[e("code",{domProps:{innerHTML:t._s(n.state.response)}})])])])};Rt._withStripped=!0;const Ut={__name:"DebugDataModal",props:{request:{type:Object,required:!0}},emits:["close-modal"],setup(e,n){let{emit:a}=n;const o=e,i=(0,s.reactive)({loading:!1,error:"",response:""});(0,s.onMounted)((()=>{i.loading=!0;(new E).getDebugData(o.request.action,o.request.data).then((e=>{if(null===e)i.error=t("appointments","error: cannot load debug data");else{const t=dt();i.response=e.data+("settings_dump"===o.request.action?JSON.stringify(t.settings,null,2)+"\r\n"+JSON.stringify(ct,null,2)+"\r\n"+JSON.stringify(t.calendars,null,2):"")}i.loading=!1}))}));return{__sfc:!0,emit:a,props:o,state:i,handleUpdateShow:t=>{!1===t&&a("close-modal")},NcModal:p.FH}}};const jt=(0,F.A)(Ut,Rt,[],!1,null,"af8f9ccc",null).exports,Wt={__name:"SectionAdvancedDebugging",setup(e){const n=dt(),a=(0,s.ref)({action:"",data:{}}),o=[{value:0,label:t("appointments","Debugging Off")},{value:1,label:t("appointments","Log remote blockers")},{value:2,label:t("appointments","Log template durations")}],i=(0,s.inject)("pageId",""),r=(t,e)=>{a.value.action=t,a.value.data=e},l=(0,s.computed)((()=>n.calendars.reduce(((t,e)=>(t.push({label:e.name,value:e.id}),t)),[]))),c=(0,s.computed)((()=>n.calendars.reduce(((t,e)=>(e.isSubscription&&t.push({label:e.name,value:e.id}),t)),[]))),d=(0,s.ref)("");return{__sfc:!0,settingsStore:n,debugRequest:a,debugModeOptions:o,pageId:i,handleAction:r,handleCloseModal:function(){a.value.action="",a.value.data={}},calendarOptions:l,remoteCalendarOptions:c,eventUid:d,sendUid:()=>{r("uid_info",{p:i,uid:d.value})},PsSelect:It,LabelAccordion:At,NcButton:p.x1,NcTextField:p.v,IconDownload:zt.A,DebugDataModal:jt,ComboSelect:Dt}}};const Ft=(0,F.A)(Wt,Bt,[],!1,null,"b2a95c3c",null).exports,qt={__name:"SectionAdvanced",setup(e){const n=dt();return{__sfc:!0,settingsStore:n,settings:n.settings,syncOptions:[{label:t("appointments","System Native Sync"),value:"0"},{label:t("appointments","1 Hour"),value:"60"},{label:t("appointments","2 Hours"),value:"120"},{label:t("appointments","4 Hours"),value:"240"},{label:t("appointments","8 Hours"),value:"480"},{label:t("appointments","12 Hours"),value:"720"},{label:t("appointments","1 day"),value:"1440"}],LabelAccordion:At,IconWeekly:ht.A,IconExternal:bt.A,IconDebug:_t.A,ComboInput:St,ComboSelect:Dt,ComboCheckbox:Mt,SectionAdvancedDebugging:Ft}}};const Ht=(0,F.A)(qt,nt,[],!1,null,"06a352d5",null).exports;var Vt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},[e(n.ComboCheckbox,{attrs:{"prop-name":"bbbEnabled",label:t.t("appointments","Create video rooms for confirmed appointments"),store:n.settingsStore},on:{"value-updated":n.checkTalkEnabled}}),t._v(" "),e("div",{class:{"sb_disable_nav-item":!n.settings.bbbEnabled}},[e(n.ComboCheckbox,{attrs:{"prop-name":"bbbDelete",disabled:!n.settings.bbbEnabled,label:t.t("appointments","Delete when appointments is removed"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"bbbPassword",disabled:!n.settings.bbbEnabled,label:t.t("appointments","Guest password"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("When this option is selected, video rooms will be password-protected, and an autogenerated pseudo-random password will be sent to attendees along with the room link.")]},proxy:!0}])}),t._v(" "),e(n.ComboCheckbox,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"bbbFormEnabled",disabled:!n.settings.bbbEnabled,label:t.t("appointments","Add 'Meeting Type' form field"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments",'When this option is enabled, a "select" drop-down will be added to the form with a choice of "In-person" or "Online (audio/video)". If a visitor selects an "In-person" meeting, a Talk room for this appointment will NOT be created.'))+"\n\t\t\t\t")]},proxy:!0}])})],1)],1)};Vt._withStripped=!0;const Gt={__name:"SectionBbb",setup(t){const e=dt(),n=e.settings;return{__sfc:!0,settingsStore:e,settings:n,checkTalkEnabled:t=>{"bbbEnabled"===t.propName&&!0===t.value&&(n.talk_enabled=!1)},ComboCheckbox:Mt}}};const $t=(0,F.A)(Gt,Vt,[],!1,null,"476e4704",null).exports;var Xt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},[e(n.ComboSelect,{attrs:{"prop-name":"tsMode","default-value":n.TS_MODE.TEMPLATE,label:t.t("appointments","Time slot mode"),store:n.settingsStore,options:n.modeOptions},scopedSlots:t._u([{key:"help",fn:function(){return[e("strong",[t._v(t._s(t.t("appointments","Weekly Template")))]),t._v(": "+t._s(t.t("appointments","In this mode you can set a weekly template and it will be repeated automatically."))),e("br"),t._v(" "),e("strong",[t._v(t._s(t.t("appointments","Simple")))]),t._v(": "+t._s(t.t("appointments",'Use provided "Add Appointment Slots" dialog to add "available" time slots. Recurrence is not supported in this mode.'))),e("br"),t._v(" "),e("strong",[t._v(t._s(t.t("appointments","External")))]),t._v(": "+t._s(t.t("appointments",'Use Calendar App or any other CalDAV compatible client to add "available" timeslots. Most recurrence rules are supported in this mode. Two calendars are required: a "Source Calendar" to keep track of your availability timeslots and a "Destination Calendar" for booked appointments.'))),e("br")]},proxy:!0}])}),t._v(" "),!0!==n.settingsStore.loading.tsMode&&n.settings.tsMode===n.TS_MODE.TEMPLATE?e(n.SectionCalendarsWeekly,t._g({staticClass:"ps-vert-spacing",attrs:{"calendar-options":n.calendarOptions},on:{"combo-select-input":n.handleSetCal,"show-editor":()=>{n.emit("show-timeslot-editor",null)}}},t.$listeners)):!0!==n.settingsStore.loading.tsMode&&n.settings.tsMode===n.TS_MODE.SIMPLE?e(n.SectionCalendarsSimple,{staticClass:"ps-vert-spacing",attrs:{"calendar-options":n.calendarOptions},on:{"combo-select-input":n.handleSetCal,"show-editor":t=>{n.emit("show-timeslot-editor",t)}}}):!0!==n.settingsStore.loading.tsMode&&n.settings.tsMode===n.TS_MODE.EXTERNAL?e(n.SectionCalendarsExternal,{staticClass:"ps-vert-spacing",attrs:{"calendar-options":n.calendarOptions},on:{"combo-select-input":n.handleSetCal}}):t._e(),t._v(" "),!0!==n.settingsStore.loading.tsMode?e(n.LabelAccordion,{staticClass:"ps-vert-spacing",attrs:{label:t.t("appointments","Time Slot Settings"),accordion:!0},scopedSlots:t._u([{key:"accordionIcon",fn:function(){return[e(n.IconTimeslot,{attrs:{size:24}})]},proxy:!0}],null,!1,355134374)},[t._v(" "),e(n.ComboSelect,{attrs:{"prop-name":"prepTime","default-value":"0",label:t.t("appointments","Minimum lead time"),store:n.settingsStore,options:n.leadTimeOptions}}),t._v(" "),e(n.ComboSelect,{attrs:{"prop-name":"whenCanceled","default-value":"0",label:t.t("appointments","When attendee cancels"),store:n.settingsStore,options:n.cancelationOptions}}),t._v(" "),e(n.ComboCheckbox,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"allDayBlock",label:t.t("appointments","Include all day events in conflict check"),store:n.settingsStore}})],1):t._e(),t._v(" "),!0!==n.settingsStore.loading.tsMode&&n.settings.tsMode!==n.TS_MODE.SIMPLE?e(n.LabelAccordion,{staticClass:"ps-vert-spacing",attrs:{label:t.t("appointments","Booked appointment buffers"),loading:!0===n.settingsStore.loading.bufferBefore,accordion:!0},scopedSlots:t._u([{key:"accordionIcon",fn:function(){return[e(n.IconBuffer,{attrs:{size:24}})]},proxy:!0},{key:"helpPopover",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","It is possible to block off a period of time before and after a booked (and pending) appointment. This could be useful when some preparation/travel time is required before, or cleanup/cool-off time needs to be blocked off after an appointment."))+"\n\t\t")]},proxy:!0}],null,!1,3435444980)},[t._v(" "),t._v(" "),e(n.LabelAccordion,{staticStyle:{"margin-top":".5em"},attrs:{label:t.t("appointments","Before"),for:"ps-buffer-before"}}),t._v(" "),e(n.VueSlider,{staticClass:"ps-slider",attrs:{min:0,max:120,interval:5,lazy:!0,disabled:!0===n.settingsStore.loading.bufferBefore,tooltip:"always",tooltipPlacement:"right","tooltip-formatter":"{value} "+n.minute,id:"ps-buffer-before",value:n.settings.bufferBefore},on:{change:t=>{n.settingsStore.setOne("bufferBefore",t)}}}),t._v(" "),e(n.LabelAccordion,{staticStyle:{"margin-top":".5em"},attrs:{label:t.t("appointments","After"),for:"ps-buffer-after"}}),t._v(" "),e(n.VueSlider,{staticClass:"ps-slider",attrs:{min:0,max:120,interval:5,lazy:!0,disabled:!0===n.settingsStore.loading.bufferBefore,tooltip:"always",tooltipPlacement:"right","tooltip-formatter":"{value} "+n.minute,id:"ps-buffer-after",value:n.settings.bufferBefore},on:{change:t=>{n.settingsStore.setOne("bufferBefore",t)}}})],1):t._e()],1)};Xt._withStripped=!0;a(670);var Qt=a(378),Kt=a.n(Qt),Yt=a(4317),Jt=a(9548),Zt=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e(n.ComboSelect,t._g({attrs:{"prop-name":"tmmDstCalId",options:t.calendarOptions,store:n.settingsStore,label:t.t("appointments","Destination calendar (Booked)"),"emit-input":!0},scopedSlots:t._u([{key:"help",fn:function(){return[t._v(t._s(t.t("appointments","Booked/pending appointments will be placed into this calendar.")))]},proxy:!0}])},t.$listeners)),t._v(" "),e(n.NcButton,{staticClass:"ps-vert-spacing",attrs:{disabled:"-1"===n.settings.tmmDstCalId||!0===n.templateInfoLoading,"aria-label":t.t("appointments","Edit Template")},on:{click:n.handleEditTemplate},scopedSlots:t._u([{key:"icon",fn:function(){return[!1===n.templateInfoLoading?e(n.IconPencil,{attrs:{size:20}}):e(n.NcLoadingIcon,{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t"+t._s(t.t("appointments","Edit Template"))+"\n\t")]),t._v(" "),e(n.LabelAccordion,{staticClass:"ps-vert-spacing",attrs:{label:t.t("appointments","Check for conflicts in…"),loading:n.conflictCalsLoading,accordion:!0},scopedSlots:t._u([{key:"accordionIcon",fn:function(){return[e(n.IconCalendarAlert,{attrs:{size:24}})]},proxy:!0},{key:"helpPopover",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","These calendars will be checked for conflicting events in addition to the Destination Calendar."))+"\n\t\t")]},proxy:!0}])},[t._v(" "),t._v(" "),t._l(n.conflictCals,(function(a){return e("div",{key:a.id},[e("input",{directives:[{name:"model",rawName:"v-model",value:n.conflictCalsModel,expression:"conflictCalsModel"}],staticClass:"checkbox ps-checkbox",attrs:{type:"checkbox",disabled:n.conflictCalsLoading,id:"srgdev-appt_tmm_more_"+a.id},domProps:{value:a,checked:Array.isArray(n.conflictCalsModel)?t._i(n.conflictCalsModel,a)>-1:n.conflictCalsModel},on:{change:function(e){var o=n.conflictCalsModel,s=e.target,i=!!s.checked;if(Array.isArray(o)){var r=a,l=t._i(o,r);s.checked?l<0&&(n.conflictCalsModel=o.concat([r])):l>-1&&(n.conflictCalsModel=o.slice(0,l).concat(o.slice(l+1)))}else n.conflictCalsModel=i}}}),t._v(" "),e("label",{staticClass:"srgdev-appt-sb-label-inline",class:{"ps-label-subscription":a.isSubscription},attrs:{for:"srgdev-appt_tmm_more_"+a.id}},[t._v("\n\t\t\t\t"+t._s(a.name)+"\n\t\t\t")])])}))],2)],1)};Zt._withStripped=!0;var te=a(7409);const ee={__name:"SectionCalendarsWeekly",props:{calendarOptions:{required:!0}},emits:["show-editor","show-settings-modal"],setup(e,n){let{emit:a}=n;const o=e,i=dt(),r=i.settings,l=(0,s.inject)("pageId",""),c=(0,s.computed)((()=>i.calendars.filter((t=>"2"===r.tsMode&&t.id!==r.tmmDstCalId)))),d=(0,s.computed)({get:()=>c.value.filter((t=>-1!==r.tmmMoreCals.indexOf(t.id)||-1!==r.tmmSubscriptions.indexOf(t.id))),set(t){const e=[],n=[];t.forEach((t=>{t.isSubscription?n.push(t.id):e.push(t.id)}));const o=t=>{202===t.status&&a("show-settings-modal",{type:S.CONTRIBUTION,message:t.data.message})};e.length!==r.tmmMoreCals.length?i.setOne("tmmMoreCals",e,!1,o):i.setOne("tmmSubscriptions",n,!1,o)}}),m=(0,s.computed)((()=>!0===i.loading.tmmMoreCals||!0===i.loading.tmmSubscriptions)),u=(0,s.ref)(!1);return{__sfc:!0,emit:a,props:o,settingsStore:i,settings:r,pageId:l,conflictCals:c,conflictCalsModel:d,conflictCalsLoading:m,templateInfoLoading:u,handleEditTemplate:()=>{"-1"!==r.tmmDstCalId&&(u.value=!0,$(l,r.tmmDstCalId).then((e=>{null===e?((0,C.Qg)(t("appointments","Can't load time zones")),u.value=!1):e.name!==r.template_info.tzName?i.setOne("template_info",{tzName:e.name,tzData:e.data},!1,(e=>{u.value=!1,null===e?(0,C.Qg)(t("appointments","Can't sync time zones")):a("show-editor")})):(u.value=!1,a("show-editor"))})))},IconCalendarAlert:te.A,LabelAccordion:At,NcButton:p.x1,NcLoadingIcon:vt.A,IconPencil:v.A,ComboSelect:Dt}}};const ne=(0,F.A)(ee,Zt,[],!1,null,"77e916ee",null).exports;var ae=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e(n.ComboSelect,t._g({attrs:{"prop-name":"mainCalId",options:t.calendarOptions,store:n.settingsStore,label:t.t("appointments","Main calendar"),"emit-input":!0},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","When you create new appointment slots they are placed here and are shown in your public page(s). It is recommended to use a dedicated calendar."))+"\n\t\t")]},proxy:!0}])},t.$listeners)),t._v(" "),e(n.ComboSelect,t._g({attrs:{"prop-name":"destCalId",options:t.calendarOptions,store:n.settingsStore,label:t.t("appointments","Calendar for booked appointments"),placeholder:t.t("appointments","Use Main calendar"),"emit-input":!0},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","If this calendar is different from the Main Calendar, once an appointment is booked it will be moved here."))+"\n\t\t")]},proxy:!0}])},t.$listeners)),t._v(" "),e(n.LabelAccordion,{staticClass:"ps-vert-spacing",attrs:{label:t.t("appointments","Add Appointment Slots"),accordion:!0},on:{"open-accordion":n.addAccordionOpen},scopedSlots:t._u([{key:"accordionIcon",fn:function(){return[e(n.IconCalendarAdd,{attrs:{size:24}})]},proxy:!0}])},[t._v(" "),n.state.tzLoading?e("div",[t._v("\n\t\t\t"+t._s(t.t("appointments","Loading..."))+"\n\t\t")]):n.state.error?e("div",[t._v("\n\t\t\t"+t._s(t.t("appointments","Error: Can't load time zones"))+"\n\t\t")]):""!==n.state.tzName?[e(n.LabelAccordion,{attrs:{label:t.t("appointments","Select Dates")}}),t._v(" "),e(n.DatePicker,{staticStyle:{width:"auto","min-width":"21em"},attrs:{editable:!1,"disabled-date":n.compNotBefore,appendToBody:!1,"popup-style":n.datePickerPopupStyle,placeholder:t.t("appointments","Select Dates"),lang:n.lang,formatter:n.weekFormat,type:"week"},on:{input:n.setToStartOfWeek},model:{value:n.state.apptWeek,callback:function(e){t.$set(n.state,"apptWeek",e)},expression:"state.apptWeek"}}),t._v(" "),e("div",{staticClass:"srgdev-appt-info-lcont srgdev-appt-tz-cont"},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Time zone:")+" "+n.state.tzName)+"\n\t\t\t")]),t._v(" "),e("label",{staticClass:"select-label",attrs:{for:"appt_dur-select"}},[t._v(t._s(t.t("appointments","Appointment Duration:")))]),t._v(" "),e(n.VueSlider,{staticClass:"appt-slider",attrs:{min:5,max:120,interval:5,tooltip:"always",tooltipPlacement:"bottom","tooltip-formatter":"{value} Min",id:"appt_dur-select"},model:{value:n.state.apptDur,callback:function(e){t.$set(n.state,"apptDur",e)},expression:"state.apptDur"}}),t._v(" "),e(n.NcButton,{staticClass:"srgdev-appt-sb-genbtn",staticStyle:{"margin-top":"3.5em","margin-bottom":"2em","padding-left":"3em","padding-right":"3em"},attrs:{disabled:null===n.state.apptWeek,"aria-label":t.t("appointments","Start")},on:{click:n.showSimpleEditor}},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Start"))+"\n\t\t\t")])]:t._e()],2)],1)};ae._withStripped=!0;var oe=a(5393),se=a(4042);const ie={__name:"SectionCalendarsSimple",props:{calendarOptions:{required:!0}},emits:["show-editor"],setup(e,n){let{emit:a}=n;const o=e,i=(0,s.inject)("pageId",""),r=dt(),l=r.settings,c=(0,s.reactive)({tzLoading:!1,error:!1,tzName:"",tzData:"",apptWeek:null,apptDur:30,rsValue:"58",remType:"empty",remModalData:null}),d=(()=>{let t,e;const n={firstDayOfWeek:0===window.firstDay?0:6===window.firstDay?6:1};if(window.Intl&&"object"==typeof window.Intl){t=[];let a=new Date(1970,1,1),o=new Intl.DateTimeFormat([],{weekday:"short"});for(let e=1;e<8;e++)a.setDate(e),t[e-1]=o.format(a);o=new Intl.DateTimeFormat([],{month:"short"}),a.setDate(1),e=[];for(let t=0;t<12;t++)a.setMonth(t),e[t]=o.format(a);n.monthsShort=e}return{days:t,formatLocale:n}})(),m=t=>{t.setHours(0,0,0,0);const e=d.formatLocale.firstDayOfWeek,n=(t.getDay()+(7-e))%7,a=new Date(t.getTime());return a.setDate(a.getDate()-n),a},u=(()=>{const t=m(new Date);return t.setHours(1,30,0,0),t})();return{__sfc:!0,emit:a,props:o,pageId:i,settingsStore:r,settings:l,state:c,lang:d,getStartOfWeek:m,notBeforeDate:u,compNotBefore:t=>(t.setHours(1,30,0,0),t<u),datePickerPopupStyle:{top:"75%",left:"50% !important",transform:"translate(-50%,0)"},weekFormat:{stringify:(t,e)=>{if(t){const e=new Date(t.getTime());if(e.setDate(e.getDate()+6),window.Intl&&"object"==typeof window.Intl){let n=new Intl.DateTimeFormat([],{month:"short",day:"2-digit"});return n.format(t)+" - "+n.format(e)}return t.toLocaleDateString()+" - "+e.toLocaleDateString()}return""}},setToStartOfWeek:()=>{null!==c.apptWeek&&(c.apptWeek=m(c.apptWeek))},addAccordionOpen:()=>{c.tzLoading=!0,c.tzName="UTC",c.tzData="UTC",$(i,l.mainCalId).then((t=>{null===t?c.error=!0:(c.tzName=t.name,c.tzData=t.data)})).finally((()=>{c.tzLoading=!1})),c.apptDur=30,c.apptWeek=null},showSimpleEditor:()=>{if("-1"===l.mainCalId)return void(0,C.Qg)(t("appointments","error: main calendar required"));const e=r.calendars.find((t=>t.id===l.mainCalId));if(!e)return void(0,C.Qg)(t("appointments","error: cannot find calendar with ID "+l.mainCalId));const n={tz:c.tzData,week:c.apptWeek.getTime(),dur:c.apptDur,pageId:i,calColor:e.color,calName:e.name};a("show-editor",n)},LabelAccordion:At,IconCalendarAdd:oe.A,DatePicker:se.A,VueSlider:Kt(),NcButton:p.x1,ComboSelect:Dt}}};a(4151);const re=(0,F.A)(ie,ae,[],!1,null,"0152d426",null).exports;var le=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e(n.ComboSelect,t._g({attrs:{"prop-name":"nrSrcCalId",options:t.calendarOptions,store:n.settingsStore,label:t.t("appointments","Source Calendar (Free Slots)"),"emit-input":!0},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments",'Any event with "Show As" (a.k.a. "Time As" a.k.a. "Free/Busy" a.k.a. "Time Transparency") set to "Free" will be available for booking in the public form. Most recurrence rules are supported.'))+"\n\t\t\t"),e("br"),t._v("\n\t\t\t"+t._s(t.t("appointments","If an event's title/summary starts with an '_' character, the title will be displayed next to or below the time in the form. For example, '_Language Lessons' will be displayed as 'Language Lessons'."))+"\n\t\t")]},proxy:!0}])},t.$listeners)),t._v(" "),e(n.ComboSelect,t._g({attrs:{"prop-name":"nrDstCalId",options:t.calendarOptions,store:n.settingsStore,label:t.t("appointments","Destination Calendar (Booked)"),"emit-input":!0},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments",'Booked appointments will be placed here. In addition to booked appointments, any events in this calendar marked as "Busy" will prevent conflicting timeslots in the "Source Calendar" from appearing in the public form.'))+"\n\t\t")]},proxy:!0}])},t.$listeners))],1)};le._withStripped=!0;const pe={__name:"SectionCalendarsExternal",props:{calendarOptions:{required:!0}},setup:t=>({__sfc:!0,props:t,settingsStore:dt(),ComboSelect:Dt})};const ce=(0,F.A)(pe,le,[],!1,null,"44c30d23",null).exports,de={__name:"SectionCalendars",emits:["show-settings-modal","show-timeslot-editor"],setup(e,n){let{emit:a}=n;const o=t("appointments","Min"),i=dt(),r=i.settings,l=(0,s.computed)((()=>i.calendars.reduce(((t,e)=>(e.isReadOnly||e.isSubscription||t.push({label:e.name,value:e.id}),t)),[]))),p=[{label:t("appointments","Weekly Template"),value:w.TEMPLATE},{label:t("appointments","Simple"),value:w.SIMPLE},{label:t("appointments","External"),value:w.EXTERNAL}],c=[{label:t("appointments","No lead time"),value:"0"},{label:t("appointments","15 minutes"),value:"15"},{label:t("appointments","30 minutes"),value:"30"},{label:t("appointments","1 hour"),value:"60"},{label:t("appointments","2 hours"),value:"120"},{label:t("appointments","4 hours"),value:"240"},{label:t("appointments","8 hours"),value:"480"},{label:t("appointments","12 hours"),value:"720"},{label:t("appointments","1 day"),value:"1440"},{label:t("appointments","2 days"),value:"2880"},{label:t("appointments","4 days"),value:"5760"},{label:t("appointments","1 week"),value:"10080"},{label:t("appointments","2 weeks"),value:"20160"},{label:t("appointments","4 weeks"),value:"40320"}],d=[{label:t("appointments","Reset (make the timeslot available)"),value:"reset"},{label:t("appointments","Mark the appointment as canceled"),value:"mark"}];return{__sfc:!0,minute:o,emit:a,settingsStore:i,settings:r,calendarOptions:l,modeOptions:p,leadTimeOptions:c,cancelationOptions:d,handleSetCal:t=>{const e=t.value.value||"-1";i.setOne(t.prop,e,!1,(t=>{if(r.tsMode===w.TEMPLATE&&null!==t){let t="";-1!==r.tmmMoreCals.indexOf(e)?t="tmmMoreCals":-1!==r.tmmSubscriptions.indexOf(e)&&(t="tmmSubscriptions"),""!==t&&(r[t]=r[t].filter((t=>t!==e)))}}))},LabelAccordion:At,VueSlider:Kt(),TS_MODE:w,IconBuffer:Yt.A,IconTimeslot:Jt.A,SectionCalendarsWeekly:ne,SectionCalendarsSimple:re,SectionCalendarsExternal:ce,ComboSelect:Dt,ComboCheckbox:Mt}}};const me=(0,F.A)(de,Xt,[],!1,null,"4bbbf7b8",null).exports;var ue=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},[e(n.ComboInput,{attrs:{"prop-name":"organization",label:t.t("appointments","Name/Organization"),store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"email",type:"email",placeholder:t.t("appointments","Set to User Profile email"),label:t.t("appointments","Organizer Email"),store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{type:"textarea","prop-name":"address",label:t.t("appointments","Location"),store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"phone",type:"tel",label:t.t("appointments","Phone"),store:n.settingsStore}})],1)};ue._withStripped=!0;const ge={__name:"SectionContact",setup:t=>({__sfc:!0,settingsStore:dt(),ComboInput:St})};const ve=(0,F.A)(ge,ue,[],!1,null,"493382d4",null).exports;var fe=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},[e(n.ComboCheckbox,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"icsFile",label:t.t("appointments","Attach .ics file to confirm/cancel emails"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","An .ics attachment will automatically be generated for notification emails, allowing better integration with email/calendar apps that support it."))+"\n\t\t")]},proxy:!0}])}),t._v(" "),e(n.LabelAccordion,{attrs:{label:t.t("appointments","Email Attendee when the appointment is:")},scopedSlots:t._u([{key:"helpPopover",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments",'Attendees will be notified via email when their upcoming appointments are updated or deleted in the calendar app or through some other external mechanism. Only changes to Date/Time, Status, or Location will trigger the "Modified" notification.'))+"\n\t\t")]},proxy:!0}])}),t._v(" "),e("div",{staticClass:"srgdev-appt-sb-indent"},[e(n.ComboCheckbox,{attrs:{"prop-name":"attMod",label:t.t("appointments","Modified (Time, Status, Location)"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"attDel",label:t.t("appointments","Deleted"),store:n.settingsStore}})],1),t._v(" "),e(n.LabelAccordion,{attrs:{label:t.t("appointments","Email Me when an appointment is:")},scopedSlots:t._u([{key:"helpPopover",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","A notification email will be sent to you when an appointment is booked via the public page or when an upcoming appointment is confirmed or canceled through the email links."))+"\n\t\t")]},proxy:!0}])}),t._v(" "),e("div",{staticClass:"srgdev-appt-sb-indent"},[e(n.ComboCheckbox,{attrs:{"prop-name":"meReq",label:t.t("appointments","Requested"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"meConfirm",label:t.t("appointments","Confirmed"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"meCancel",label:t.t("appointments","Canceled"),store:n.settingsStore}})],1),t._v(" "),e(n.ComboCheckbox,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"skipEVS",label:t.t("appointments","Skip email validation step"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments",'When this option is selected, the "... action needed" validation email will NOT be sent to the attendee. Instead, the "... Appointment is confirmed" message will be sent right away, and the "All done" page will be shown when the form is submitted.'))+"\n\t\t")]},proxy:!0}])}),t._v(" "),!1===n.settings.skipEVS?e(n.ComboInput,{attrs:{type:"textarea","prop-name":"vldNote",label:t.t("appointments","Additional VALIDATION email text:"),store:n.settingsStore}}):t._e(),t._v(" "),e(n.ComboInput,{attrs:{type:"textarea","prop-name":"cnfNote",label:t.t("appointments","Additional CONFIRMATION email text:"),store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{type:"textarea","prop-name":"icsNote",label:t.t("appointments","Additional ICS file description:"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","This text will be appended to the end of the event's 'DESCRIPTION' property. Do NOT use HTML here, as most apps do NOT render it."))+"\n\t\t")]},proxy:!0}])})],1)};fe._withStripped=!0;const Ae={__name:"SectionEmail",setup(t){const e=dt();return{__sfc:!0,settingsStore:e,settings:e.settings,ComboCheckbox:Mt,LabelAccordion:At,ComboInput:St}}};const he=(0,F.A)(Ae,fe,[],!1,null,"2e9f17a5",null).exports;var be=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},[e(n.ComboInput,{attrs:{"prop-name":"formTitle",label:t.t("appointments","Form Title"),store:n.settingsStore}}),t._v(" "),e(n.ComboSelect,{attrs:{"prop-name":"nbrWeeks","default-value":"1",label:t.t("appointments","Show appointments for next"),store:n.settingsStore,options:n.availableWeeksOptions}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"useNcTheme",label:t.t("appointments","Auto Style"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"showEmpty",label:t.t("appointments","Show Empty Days"),store:n.settingsStore}}),t._v(" "),!0===n.settings.showEmpty?e("div",{staticClass:"srgdev-appt-sb-indent"},[e(n.ComboCheckbox,{attrs:{"prop-name":"startFNED",label:t.t("appointments","Start on current day instead of Monday"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"showWeekends",label:t.t("appointments","Show Empty Weekends"),store:n.settingsStore}})],1):t._e(),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"time2Cols",disabled:!0===n.settings.endTime,indeterminate:!0===n.settings.endTime,label:t.t("appointments","Show time in two columns"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"endTime",label:t.t("appointments","Show end time"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"hidePhone",label:t.t("appointments","Hide phone number field"),store:n.settingsStore}}),t._v(" "),e(n.LabelAccordion,{attrs:{label:t.t("appointments","Advanced Form Settings"),accordion:!0},scopedSlots:t._u([{key:"accordionIcon",fn:function(){return[e(n.IconAdvanced,{attrs:{size:24}})]},proxy:!0}])},[t._v(" "),e(n.ComboInput,{attrs:{type:"textarea","prop-name":"gdpr",label:t.t("appointments","GDPR Compliance"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments",'Any text in the "GDPR Compliance" field will trigger the display of the "GDPR" checkbox. The checkbox can be hidden when the "GDPR text only (no checkbox)" option is selected. A checkbox with plain text (no HTML) or any HTML/links without a checkbox will work as is.'))+"\n\t\t\t\t\t"),e("br"),e("br"),t._v("\n\t\t\t\t\t"+t._s(t.t("appointments",'However, if you need to include both the checkbox and HTML or a link to your privacy policy you should separate it from the "label" element, and the "for" attribute of the "label" MUST be set to "appt_gdpr_id." For example:'))+"\n\t\t\t\t\t"),e("code",{staticClass:"srgdev-appt-hs-code"},[t._v('<label for="appt_gdpr_id">Some text </label>\n\t\t\t\t\t\t<a href="PRIVACY_POLCY_URL">Privacy Policy</a>\n\t\t\t\t\t\t<label for="appt_gdpr_id"> some more text.</label>\n\t\t\t\t\t')])]},proxy:!0}])}),t._v(" "),e(n.ComboCheckbox,{staticStyle:{"margin-top":"-1em","margin-bottom":".75em"},attrs:{"prop-name":"gdprNoChb",label:t.t("appointments","GDPR text only (no checkbox)"),store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"pageTitle",label:t.t("appointments","Page Header Title"),store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{type:"textarea","prop-name":"formFinishText",label:t.t("appointments","Additional Form Submitted Page Text"),store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Allowed HTML tags: {tags}",{tags:"div, p, span, br"}))+"\n\t\t\t\t")]},proxy:!0}])}),t._v(" "),e(n.NcActions,{staticStyle:{"margin-top":"-1em","margin-bottom":"1em"},attrs:{type:"tertiary",forceName:!0}},[e(n.NcActionLink,{attrs:{target:"_blank",href:n.previewLink},on:{click:n.handlePreviewClick},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconOpen,{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t\tPreview Form Submitted Page\n\t\t\t\t")])],1),t._v(" "),e(n.ComboSelect,{staticClass:"ps-wide-select",attrs:{"prop-name":"prefillInputs","default-value":0,label:t.t("appointments","Allow Prefilled Inputs"),store:n.settingsStore,options:n.prefillInputsOptions},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","You can pre-fill fields in the form by adding a URL query parameter, example:"))+"\n\t\t\t\t\t"),e("pre",{staticStyle:{"tab-size":"2"}},[e("code",{staticClass:"srgdev-appt-hs-code",staticStyle:{"white-space":"pre","font-size":"90%"}},[t._v("https://your.domain.com/page_url"),e("span",{staticStyle:{"font-weight":"bold"}},[t._v("?name=John Smith&email=atendee@email.com")])])])]},proxy:!0}])}),t._v(" "),e(n.ComboSelect,{staticClass:"ps-wide-select",attrs:{"prop-name":"prefilledType","default-value":0,label:t.t("appointments","Prefilled Inputs Appearance"),store:n.settingsStore,options:n.prefilledTypeOptions}}),t._v(" "),e(n.ComboInput,{attrs:{type:"textarea","prop-name":"pageStyle",label:t.t("appointments","Style Override"),placeholder:"<style>...</style>",store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments",'Insert custom "style" element to override default page style. Try something like this for example:'))+"\n\t\t\t\t\t"),e("pre",{staticStyle:{"tab-size":"2"}},[e("code",{staticClass:"srgdev-appt-hs-code",staticStyle:{"white-space":"pre","font-size":"90%"}},[t._v("<style>\n\t#header{\n\t\tbackground: transparent !important;\n\t}\n\t#content{\n\t\tbackground: linear-gradient(to bottom, #ff00cc, #333399) !important;\n\t}\n\t#body-public #content {\n\t\tmin-height: 100%;\n\t}\n\tform{\n\t\tbackground:whitesmoke;box-shadow: 3px 3px 25px 0px rgba(0,0,0,0.75);\n\t}\n\t.srgdev-ncfp-form-header{\n\t\tborder-bottom: 3px solid #961AB1;\n\t}\n</style>")])])]},proxy:!0}])}),t._v(" "),e(n.SectionPageFormEditor,{attrs:{store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"metaNoIndex",label:t.t("appointments","Add {taginfo} tag",{taginfo:"/noindex/ meta"}),store:n.settingsStore}})],1)],1)};be._withStripped=!0;var _e=a(4278),ye=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e(n.LabelAccordion,{attrs:{label:t.t("appointments","Extra Fields (JSON Object)"),loading:n.isLoading},scopedSlots:t._u([{key:"helpPopover",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","Advanced feature, more info at: "))+"\n\t\t\t"),e("a",{staticClass:"srgdev-appt-hs-link",attrs:{href:"https://github.com/SergeyMosin/Appointments/issues/24#issuecomment-721103321",target:"_blank"}},[t._v("https://github.com/SergeyMosin/Appointments/issues/24#issuecomment-721103321")])]},proxy:!0}])}),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:n.model,expression:"model"}],staticClass:"ps-textarea ps-vert-spacing",attrs:{placeholder:"[{...}]"},domProps:{value:n.model},on:{focus:n.handleFocus,blur:n.handleBlur,input:function(t){t.target.composing||(n.model=t.target.value)}}})],1)};ye._withStripped=!0;const Ce={__name:"SectionPageFormEditor",props:{store:{type:Object,required:!0}},setup(t){const e=t,n="fi_json",a=(0,s.ref)(""),o=()=>{try{const t=e.store.settings[n];Array.isArray(t)?t.forEach((t=>{delete t.name})):delete t.name,a.value=JSON.stringify(t,null,2)||""}catch(t){(0,C.I9)("warning: bad form JSON Object"),a.value=""}};(0,s.onMounted)((()=>{o()}));const i=(0,s.computed)((()=>!0===e.store.loading[n]));return{__sfc:!0,propName:n,props:e,model:a,fiJsonToModel:o,isLoading:i,handleFocus:()=>{""===a.value&&o()},handleBlur:()=>{let t;try{t=""===a.value.trim()?[]:JSON.parse(a.value)}catch(t){return void(0,C.I9)("warning: can not parse JSON Object")}e.store.setOne(n,t)},LabelAccordion:At}}};const Se=(0,F.A)(Ce,ye,[],!1,null,"2ed8f497",null).exports,we={__name:"SectionPage",setup(e){const n=dt(),a=n.settings,o=[{value:"1",label:t("appointments","One Week")},{value:"2",label:t("appointments","Two Weeks")},{value:"3",label:t("appointments","Three Weeks")},{value:"4",label:t("appointments","Four Weeks")},{value:"5",label:t("appointments","Five Weeks")},{value:"8",label:t("appointments","Eight Weeks")},{value:"12",label:t("appointments","Twelve Weeks")},{value:"18",label:t("appointments","Eighteen Weeks")},{value:"24",label:t("appointments","Twenty Four Weeks")},{value:"32",label:t("appointments","Thirty Two Weeks")},{value:"40",label:t("appointments","Forty Weeks")},{value:"48",label:t("appointments","Forty Eight Weeks")}],i=[{value:0,label:t("appointments","Disabled")},{value:1,label:t("appointments","From Query String")}],r=[{value:0,label:t("appointments","Regular Inputs (default)")},{value:1,label:t("appointments","Readonly / Plain Text")},{value:2,label:t("appointments","Hide Prefilled Inputs")}],l=(0,s.ref)("#");return{__sfc:!0,settingsStore:n,settings:a,availableWeeksOptions:o,prefillInputsOptions:i,prefilledTypeOptions:r,previewLink:l,handlePreviewClick:()=>{const t="3b719b44-8ec9-41e9-b161-00fb1515b1ed";l.value=window.location.origin+window.location.pathname.replace(/\/*$/,"")+"/pub/"+ct.token+"/"+(a.skipEVS?"cncf?d=2"+t:"form?sts=0&d="+t)},ComboInput:St,ComboCheckbox:Mt,ComboSelect:Dt,IconAdvanced:_e.A,IconOpen:G.A,LabelAccordion:At,SectionPageFormEditor:Se,NcActions:p.B6,NcActionLink:p.Ki}}};const ke=(0,F.A)(we,be,[],!1,null,"718d03e0",null).exports;var xe=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},["cron"!==n.readOnlyProps.bjm&&"webcron"!==n.readOnlyProps.bjm?e(n.NcNoteCard,{attrs:{heading:t.t("appointments","Warning"),type:"warning"}},[t._v("\n\t\tYou are using "),e("strong",[t._v("AJAX")]),t._v(" scheduling method, which\n\t\tis the least reliable. Please consider "),e("strong",[t._v("Webcron")]),t._v(" or\n\t\t"),e("strong",[t._v("Cron")]),t._v(" scheduling methods. More information is available in\n\t\t"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/background_jobs_configuration.html#parameters",target:"_blank"}},[t._v("Admin Manual: Cron jobs")]),t._v(" section.\n\t")]):t._e(),t._v(" "),""===n.readOnlyProps.cliUrl?e(n.NcNoteCard,{attrs:{heading:t.t("appointments","Warning"),type:"warning"}},[t._v("\n\t\tThe "),e("strong",[t._v("overwrite.cli.url")]),t._v(" parameter is set to an invalid URL,\n\t\t"),e("strong",[t._v("action links")]),t._v(" will not be included in the reminder emails. More information is available in\n\t\t"),e("a",{staticStyle:{"text-decoration":"underline"},attrs:{href:"https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html#proxy-configurations",target:"_blank"}},[t._v("Admin Manual")]),t._v(".\n\t")]):t._e(),t._v(" "),t._l([0,1,2],(function(a){return e("div",{key:a},[e(n.ComboSelect,{attrs:{label:a+1+". "+t.t("appointments","Time before appointment"),"prop-name":"reminders_data_"+a+"_seconds","default-value":"0",placeholder:t.t("appointments","Not set"),options:n.reminderOptions,"click-interceptor":0===a?void 0:n.handleInterceptor,store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{staticClass:"reminder-action-checkbox",attrs:{label:t.t("appointments","Add action links"),"prop-name":"reminders_data_"+a+"_actions","click-interceptor":0===a?void 0:n.handleInterceptor,store:n.settingsStore}})],1)})),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"reminders_moreText",type:"textarea",label:t.t("appointments","Additional reminder email text"),store:n.settingsStore}}),t._v(" "),e(n.LabelAccordion,{staticStyle:{"font-style":"italic"},attrs:{label:t.t("appointments","Default Cron/Email Language: {langCode}",{langCode:n.readOnlyProps.defaultLang})},scopedSlots:t._u([{key:"helpPopover",fn:function(){return[t._v("\n\t\t\tThis language is used for all system notification including Reminders.\n\t\t")]},proxy:!0}])})],2)};xe._withStripped=!0;const Ie={__name:"SectionReminders",emits:["show-settings-modal"],setup(e,n){let{emit:a}=n;const o=dt(),s=o.settings,i=[{value:"0",label:t("appointments","Not set")},{value:"3600",label:t("appointments","1 hour")},{value:"7200",label:t("appointments","2 hours")},{value:"14400",label:t("appointments","4 hours")},{value:"28800",label:t("appointments","8 hours")},{value:"86400",label:t("appointments","24 hours")}];!0===o.k&&i.push({value:"172800",label:t("appointments","2 days")},{value:"259200",label:t("appointments","3 days")},{value:"345600",label:t("appointments","4 days")},{value:"432000",label:t("appointments","5 days")},{value:"518400",label:t("appointments","6 days")},{value:"604800",label:t("appointments","7 days")});return{__sfc:!0,emit:a,settingsStore:o,settings:s,reminderOptions:i,handleInterceptor:e=>!0!==o.k&&(a("show-settings-modal",{type:S.CONTRIBUTION,message:t("appointments","Multiple Reminders")}),!0),NcNoteCard:p.mQ,readOnlyProps:ct,ComboInput:St,ComboCheckbox:Mt,ComboSelect:Dt,LabelAccordion:At}}};a(1348);const Ne=(0,F.A)(Ie,xe,[],!1,null,"5f383f73",null).exports;var De=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},[e(n.ComboCheckbox,{attrs:{"prop-name":"talk_enabled",label:t.t("appointments","Create rooms for confirmed appointments"),store:n.settingsStore},on:{"value-updated":n.checkBbbEnabled}}),t._v(" "),e("div",{class:{"sb_disable_nav-item":!n.settings.talk_enabled}},[e(n.ComboCheckbox,{attrs:{"prop-name":"talk_delete",disabled:!n.settings.talk_enabled,label:t.t("appointments","Delete when appointments is removed"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"talk_lobby",disabled:!n.settings.talk_enabled,label:t.t("appointments","Enable lobby"),"click-interceptor":n.handleInterceptor,store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{attrs:{"prop-name":"talk_password",disabled:!n.settings.talk_enabled,label:t.t("appointments","Guest password"),"click-interceptor":n.handleInterceptor,store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("When this option is selected, Talk rooms will be password-protected, and an autogenerated pseudo-random password will be sent to attendees along with a room/conversation link.")]},proxy:!0}])}),t._v(" "),e(n.ComboSelect,{attrs:{"prop-name":"talk_nameFormat",disabled:!n.settings.talk_enabled,"default-value":0,placeholder:t.t("appointments","One option required"),label:t.t("appointments","Talk room name"),"click-interceptor":n.handleInterceptor,store:n.settingsStore,options:n.roomNameOptions}}),t._v(" "),e(n.ComboInput,{attrs:{type:"textarea","prop-name":"talk_emailText",placeholder:t.t("appointments","Chat/Call link:")+" https://my_domain.com/index.php/call/to6d6y4e",disabled:!n.settings.talk_enabled,label:t.t("appointments","Custom email text (optional)"),"focus-interceptor":n.handleInterceptor,store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t"+t._s(t.t("appointments","You can override default email message. There are two tokens available, {token1} and if you use password protection {token2}, they will be replaced with the rooms URL and the password if used. Example:",{token1:"{{url}}",token2:"{{pass}}"}))+"\n\t\t\t\t"),e("code",{pre:!0,attrs:{class:"srgdev-appt-hs-code"}},[t._v("Please use this link {{url}} to contact me.\n\t\t\t\t\tYour password is: {{pass}}\n\t\t\t\t")])]},proxy:!0}])}),t._v(" "),e(n.ComboCheckbox,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"talk_formFieldEnable",disabled:!n.settings.talk_enabled,label:t.t("appointments","Add 'Meeting Type' form field"),"click-interceptor":n.handleInterceptor,store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t"+t._s(t.t("appointments",'When this option is enabled, a "select" drop-down will be added to the form with a choice of "In-person" or "Online (audio/video)". If a visitor selects an "In-person" meeting, a Talk room for this appointment will NOT be created.'))+"\n\t\t\t")]},proxy:!0}])}),t._v(" "),n.settings.talk_enabled&&n.settings.talk_formFieldEnable?e("div",{staticClass:"ps-vert-spacing srgdev-appt-sb-indent",staticStyle:{"padding-bottom":".5em"}},[e(n.ComboInput,{attrs:{"prop-name":"talk_formLabel",label:t.t("appointments","Custom label text (optional)"),placeholder:n.readOnlyProps.talk_formDefLabel,"focus-interceptor":n.handleInterceptor,store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"talk_formPlaceholder",label:t.t("appointments","Custom placeholder text (optional)"),placeholder:n.readOnlyProps.talk_formDefPlaceholder,"focus-interceptor":n.handleInterceptor,store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"talk_formTxtReal",label:t.t("appointments","Custom 'In-person' option text (optional)"),placeholder:n.readOnlyProps.talk_formDefReal,"focus-interceptor":n.handleInterceptor,store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"talk_formTxtVirtual",label:t.t("appointments","Custom 'Online' option text (optional)"),placeholder:n.readOnlyProps.talk_formDefVirtual,"focus-interceptor":n.handleInterceptor,store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{type:"textarea","prop-name":"talk_formTxtTypeChange",label:t.t("appointments","Custom type change email text (optional)"),"focus-interceptor":n.handleInterceptor,store:n.settingsStore},scopedSlots:t._u([{key:"help",fn:function(){return[t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","If this field is not empty and has two tokens {token1} (can contain any text) and {token2} (MUST be new_type), then this text will be attached to the email and attendees will be able to switch their meeting type simply by clicking the link {token}. Example:",{token1:"{{link_text}}",token2:"{{new_type}}"}))+"\n\t\t\t\t\t"),e("code",{pre:!0,attrs:{class:"srgdev-appt-hs-code"}},[t._v("Click {{here}} to change your appointment type to {{new_type}}.\n\t\t\t\t\t")]),t._v("\n\t\t\t\t\t"+t._s(t.t("appointments","Talk rooms will be created and deleted automatically when a meeting type changes."))+"\n\t\t\t\t")]},proxy:!0}],null,!1,2505586375)})],1):t._e()],1)],1)};De._withStripped=!0;const Oe={__name:"SectionTalk",emits:["show-settings-modal"],setup(e,n){let{emit:a}=n;const o=dt(),s=o.settings,i=[{value:0,label:t("appointments","Guest name + Date/Time")},{value:1,label:t("appointments","Date/Time + Guest name")},{value:2,label:t("appointments","Guest name only")}];return{__sfc:!0,emit:a,settingsStore:o,settings:s,roomNameOptions:i,checkBbbEnabled:t=>{"talk_enabled"===t.propName&&!0===t.value&&(s.bbbEnabled=!1)},handleInterceptor:e=>{if(!0===o.k)return!1;let n;switch(e.propName){case"talk_lobby":n=t("appointments","Automatically enable Talk lobby when an appointment is confirmed.");break;case"talk_password":n=t("appointments","Automatically set Talk room pseudo random password when an appointment is confirmed.");break;case"name":n=t("appointments","Customize Talk room name.");break;case"talk_emailText":n=t("appointments","Customize Talk room URL email text.");break;case"talk_formFieldEnable":case"talk_formLabel":case"talk_formPlaceholder":case"talk_formTxtReal":case"talk_formTxtVirtual":n=t("appointments",'Custom "Meeting type" form fields.');break;default:n="Custom Feature"}return a("show-settings-modal",{type:S.CONTRIBUTION,message:n}),!0},readOnlyProps:ct,ComboCheckbox:Mt,ComboSelect:Dt,ComboInput:St}}};const Ee=(0,F.A)(Oe,De,[],!1,null,"e6aa72c2",null).exports;var Pe=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",[e(n.NcAppSettingsSection,{attrs:{id:"dir-items",name:t.t("appointments","Items/Links")}},[e("div",{staticClass:"ps-section-wrap"},[0===n.settingsStore.dirSettings.dirItems.length?e("div",{staticClass:"dir-items-empty"},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","no items found"))+"\n\t\t\t")]):t._e(),t._v(" "),t._l(n.settingsStore.dirSettings.dirItems,(function(a,o){return e("div",{staticClass:"srgdev-appt-dir-pl"},[e(n.NcActions,{staticClass:"srgdev-appt-dir-pl_actions",staticStyle:{position:"absolute"},attrs:{disabled:!0===n.settingsStore.loading[n.LOADING_DIR],menuAlign:"right"},scopedSlots:t._u([{key:"icon",fn:function(){return[n.state.loadingIndex===o?e(n.NcLoadingIcon,{attrs:{size:20}}):t._e()]},proxy:!0}],null,!0)},[t._v(" "),e(n.NcActionButton,{attrs:{closeAfterClick:!0},on:{click:function(t){return n.editDirItem(o)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconPencil,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("appointments","Edit"))+"\n\t\t\t\t\t")]),t._v(" "),e(n.NcActionButton,{attrs:{closeAfterClick:!0},on:{click:function(t){return n.deleteDirItem(o)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconDelete,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("appointments","Delete"))+"\n\t\t\t\t\t")])],1),t._v(" "),e("div",{staticClass:"srgdev-appt-dir-pl_title"},[t._v(t._s(a.title))]),t._v(" "),e("div",{staticClass:"srgdev-appt-dir-pl_sub"},[t._v(t._s(a.subTitle))]),t._v(" "),e("div",{staticClass:"srgdev-appt-dir-pl_url"},[t._v(t._s(a.url))])],1)})),t._v(" "),e(n.NcButton,{staticClass:"dir-add-new-button",attrs:{"aria-label":t.t("appointments","Add New Item"),type:"primary",disabled:!0===n.settingsStore.loading[n.LOADING_DIR]},on:{click:n.addDirItem},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconPlus,{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Add New Item"))+"\n\t\t\t")])],2)]),t._v(" "),e(n.NcAppSettingsSection,{attrs:{id:"dir-page-settings",name:t.t("appointments","Page Settings")}},[e("div",{staticClass:"ps-section-wrap"},[e(n.ComboInput,{attrs:{"prop-name":"pageTitle",label:t.t("appointments","Page Header Title"),"settings-type":"dirSettings",store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"useNcTheme",label:t.t("appointments","Auto Style"),"settings-type":"dirSettings",store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"pageStyle",type:"textarea",label:t.t("appointments","Style Override"),placeholder:"<style>...</style>","settings-type":"dirSettings",store:n.settingsStore}})],1)]),t._v(" "),n.state.editorIndex!==n.INDEX.NONE?e(n.DirItemEditorModal,{attrs:{index:n.state.editorIndex},on:{"close-modal":function(t){n.state.editorIndex=n.INDEX.NONE}}}):t._e()],1)};Pe._withStripped=!0;var Te=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcModal,{staticStyle:{"z-index":"10002"},attrs:{setReturnFocus:!1,closeOnClickOutside:!1},on:{"update:show":n.handleUpdateShow}},[e("h4",{staticClass:"tao-h4"},[t._v(t._s(t.t("appointments","Directory Item Editor")))]),t._v(" "),e("div",{staticClass:"srgdev-appt-modal-wrap",staticStyle:{"text-align":"left"}},[e(n.NcTextField,{staticClass:"dir-editor-spacer",attrs:{value:n.item.title,label:t.t("appointments","Title")},on:{"update:value":function(e){return t.$set(n.item,"title",e)}}}),t._v(" "),e(n.NcTextField,{staticClass:"dir-editor-spacer",attrs:{value:n.item.subTitle,label:t.t("appointments","Subtitle")},on:{"update:value":function(e){return t.$set(n.item,"subTitle",e)}}}),t._v(" "),e(n.NcTextField,{staticClass:"dir-editor-spacer",attrs:{value:n.item.text,label:t.t("appointments","Text")},on:{"update:value":function(e){return t.$set(n.item,"text",e)}}}),t._v(" "),e("div",{staticClass:"dir-editor-dual-flex"},[e(n.NcTextField,{staticStyle:{"margin-top":"0"},attrs:{disabled:""!==n.pagesStore.loading,value:n.urlRef,label:t.t("appointments","URL")},on:{"update:value":function(t){n.urlRef=t}}}),t._v(" "),e(n.NcActions,{attrs:{disabled:""!==n.pagesStore.loading,"menu-name":t.t("appointments","Select Page"),forceMenu:!0},scopedSlots:t._u([{key:"icon",fn:function(){return["E_URL"===n.pagesStore.loading?e(n.NcLoadingIcon,{attrs:{size:20}}):e(n.IconLinkPlus,{attrs:{size:20}})]},proxy:!0}])},[t._v(" "),t._l(n.pagesStore.pages,(function(a){return e(n.NcActionButton,{key:a.id,attrs:{closeAfterClick:!0},on:{click:function(t){return n.handleSelectPageUrl(a.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconWeb,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(a.label)+"\n\t\t\t\t")])}))],2)],1),t._v(" "),e("div",{staticClass:"dir-editor-dual-flex"},[e(n.NcButton,{staticClass:"dir-editor-btn",attrs:{disabled:""!==n.pagesStore.loading||!0===n.settingsStore.loading.dirItems,type:"primary"},on:{click:n.handelSaveItem},scopedSlots:t._u([{key:"icon",fn:function(){return[!0===n.settingsStore.loading.dirItems?e(n.NcLoadingIcon,{attrs:{size:20}}):e(n.IconSave,{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Save"))+"\n\t\t\t")]),t._v(" "),e(n.NcButton,{staticClass:"dir-editor-btn",on:{click:function(t){return n.handleUpdateShow(!1)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconCancel,{attrs:{size:20}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Cancel"))+"\n\t\t\t")])],1)],1)])};Te._withStripped=!0;var Le=a(7617),Me=a(4032),Be=a(9264);function ze(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function Re(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ze(Object(n),!0).forEach((function(e){Ue(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Ue(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const je={__name:"DirItemEditorModal",props:{index:{type:Number,required:!0}},emits:["close-modal"],setup(t,e){let{emit:n}=e;const a=t,o=z(),i=dt(),r=a.index!==I.NEW&&void 0!==i.dirSettings.dirItems[a.index]?Re({},i.dirSettings.dirItems[a.index]):{title:"",subTitle:"",text:"",url:""},l=(0,s.ref)(r.url),c=t=>{!1===t&&n("close-modal")};return{__sfc:!0,pagesStore:o,settingsStore:i,emit:n,props:a,item:r,urlRef:l,handleSelectPageUrl:t=>{o.getPageUrl(t,"E_URL").then((t=>{if(null!==t){const e=X(t.data);null!==e&&(l.value=e[0])}}))},handelSaveItem:()=>{const t=i.dirSettings.dirItems.map((t=>Re({},t)));r.url=l.value,a.index===I.NEW?t.push(r):t[a.index]=r,i.setOldValue("dirItems",i.dirSettings.dirItems),i.setOne("dirItems",t,!1,(e=>{null!==e&&(i.dirSettings.dirItems=t,c(!1))}))},handleUpdateShow:c,NcModal:p.FH,NcTextField:p.v,NcActions:p.B6,NcActionButton:p.Ko,NcButton:p.x1,NcLoadingIcon:p.ne,IconLinkPlus:Le.A,IconWeb:A.A,IconSave:Me.A,IconCancel:Be.A}}};a(3138);const We=(0,F.A)(je,Te,[],!1,null,"6a35f61e",null).exports;function Fe(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function qe(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const He={__name:"SettingsDir",setup(t){const e=dt(),n=(0,s.reactive)({editorIndex:I.NONE,loadingIndex:I.NONE});return{__sfc:!0,settingsStore:e,state:n,addDirItem:()=>{n.editorIndex=I.NEW},editDirItem:t=>{(0,s.nextTick)((()=>{n.editorIndex=t}))},deleteDirItem:t=>{n.loadingIndex=t;const a=e.dirSettings.dirItems.map((t=>function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Fe(Object(n),!0).forEach((function(e){qe(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Fe(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}({},t)));e.setOldValue("dirItems",a);const o=e.dirSettings.dirItems.filter(((e,n)=>n!==t));e.setOne("dirItems",o,!1,(t=>{null!==t&&(e.dirSettings.dirItems=o),n.loadingIndex=I.NONE}))},LOADING_DIR:"__dir__",NcActionButton:p.Ko,NcActions:p.B6,NcAppSettingsSection:p.Te,NcButton:p.x1,NcLoadingIcon:p.ne,IconPencil:v.A,IconPlus:f.A,IconDelete:b.A,DirItemEditorModal:We,INDEX:I,ComboInput:St,ComboCheckbox:Mt}}};a(8022);const Ve=(0,F.A)(He,Pe,[],!1,null,"7ee3ba00",null).exports;var Ge=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"ps-section-wrap"},[e(n.ComboCheckbox,{attrs:{"prop-name":"privatePage",label:t.t("appointments","Private Page (visitors must be logged-in)"),store:n.settingsStore}}),t._v(" "),e(n.ComboCheckbox,{staticClass:"ps-vert-spacing",attrs:{"prop-name":"secHcapEnabled",label:t.t("appointments","Enable hCaptcha"),store:n.settingsStore}}),t._v(" "),n.settings.secHcapEnabled?e("div",{staticClass:"srgdev-appt-sb-indent"},[e(n.ComboInput,{attrs:{"prop-name":"secHcapSiteKey",disabled:!n.settings.secHcapEnabled,label:t.t("appointments","hCaptcha site key"),store:n.settingsStore}}),t._v(" "),e(n.ComboInput,{attrs:{"prop-name":"secHcapSecret",type:"password",disabled:!n.settings.secHcapEnabled,label:t.t("appointments","hCaptcha secret"),store:n.settingsStore}}),t._v(" "),e("div",{staticStyle:{"margin-bottom":"2em"}},[t._v("\n\t\t\t"+t._s(t.t("appointments","An hCaptcha account is required, more info"))+"\n\t\t\t"),e("a",{staticClass:"srgdev-appt-hs-link",attrs:{target:"_blank",href:"https://www.hcaptcha.com/"}},[t._v("https://www.hcaptcha.com/")]),e("br"),t._v(" "),e(n.NcNoteCard,{attrs:{heading:t.t("appointments","Important"),type:"info"}},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","JavaScript code and/or cookies from hcaptcha.com will be placed into your booking form. You are responsible for ensuring compliance with privacy regulations in your jurisdiction."))+"\n\t\t\t\t"),e("a",{staticClass:"srgdev-appt-hs-link",attrs:{href:"https://docs.hcaptcha.com/faq#should-i-update-my-privacy-policy-when-enabling-hcaptcha"}},[t._v("https://docs.hcaptcha.com/faq#should-i-update-my-privacy-policy-when-enabling-hcaptcha")])])],1)],1):t._e(),t._v(" "),e(n.LabelAccordion,{staticClass:"ps-vert-spacing",attrs:{label:t.t("appointments","Blocked email addresses:")},scopedSlots:t._u([{key:"helpPopover",fn:function(){return[t._v("\n\t\t\t"+t._s(t.t("appointments","Email addresses on this list cannot be used to book appointments. To block an entire domain, use a wildcard like this: *@bad-domain.tld"))+"\n\t\t")]},proxy:!0}])}),t._v(" "),0!==n.settings.secEmailBlacklist.length?e("ul",{staticClass:"bad-email-list"},t._l(n.settings.secEmailBlacklist,(function(a){return e(n.NcUserBubble,{key:a,staticStyle:{margin:".25em"},attrs:{margin:5,size:30,"display-name":a},scopedSlots:t._u([{key:"name",fn:function(){return[e("a",{staticClass:"icon-close",attrs:{href:"#",title:"Delete"},on:{click:()=>{n.handleDeleteBadEmail(a)}}})]},proxy:!0}],null,!0)})})),1):t._e(),t._v(" "),e(n.NcActions,{attrs:{"menu-name":t.t("appointments","Add"),open:n.emailInputOpen,manualOpen:!0,disabled:!0===n.settingsStore.loading.secEmailBlacklist},on:{click:()=>{n.emailInputOpen=!n.emailInputOpen},"update:open":t=>n.emailInputOpen=t},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconPlus,{attrs:{size:20}})]},proxy:!0}])},[t._v(" "),e(n.NcActionInput,{attrs:{"label-outside":!1,label:t.t("appointments","Enter email adddress")},on:{submit:n.addBadEmail},model:{value:n.badEmail,callback:function(t){n.badEmail=t},expression:"badEmail"}})],1)],1)};Ge._withStripped=!0;const $e={__name:"SectionSecurity",setup(t){const e=dt(),n=e.settings,a=(0,s.ref)(""),o=(0,s.ref)(!1);return{__sfc:!0,settingsStore:e,settings:n,badEmail:a,emailInputOpen:o,addBadEmail:()=>{if(!0===e.loading.secEmailBlacklist)return;const t=[...n.secEmailBlacklist];a.value.match(/^.+@.+\.[a-zA-Z]{2,}$/)&&!t.includes(a.value)&&(t.unshift(a.value),e.setOne("secEmailBlacklist",t),a.value="",o.value=!1)},handleDeleteBadEmail:t=>{if(!0===e.loading.secEmailBlacklist)return;const a=n.secEmailBlacklist.filter((e=>e!==t));a.length!==n.secEmailBlacklist.length&&e.setOne("secEmailBlacklist",a)},ComboCheckbox:Mt,NcNoteCard:p.mQ,NcActions:p.B6,NcActionInput:p.Az,NcUserBubble:p.Z9,ComboInput:St,LabelAccordion:At,IconPlus:f.A}}};a(2114);const Xe=(0,F.A)($e,Ge,[],!1,null,"3fb71d54",null).exports,Qe={__name:"Settings",props:{pageId:{type:String,required:!0}},emits:["close-settings","show-timeslot-editor","show-settings-modal"],setup(e,n){let{emit:a}=n;const o=e,i=dt(),r=z(),l=T(o.pageId);(0,s.provide)("pageId",o.pageId);const c=(0,s.computed)((()=>l?t("appointments","Directory Page"):r.getPageById(o.pageId).label));(0,s.onMounted)((()=>{i.getAllSettings(o.pageId).then((t=>{!1===t&&d(!1)}))}));const d=t=>{!1===t&&(i.cancelServiceRequest(x.SETTINGS),a("close-settings"))};let m=(0,s.ref)("");(0,s.watch)(m,(t=>{""!==t&&"loading"!==t&&window.open(t,"appointment_setting_preview").focus()}));return{__sfc:!0,settingsStore:i,pagesStore:r,emit:a,props:o,_isDir:l,label:c,handleUpdateOpen:d,pageUrl:m,handleShowPreview:()=>{m.value="loading";(new E).getPageUrl(o.pageId).then((t=>{if(null!==t){const e=X(t.data);null!==e&&(m.value=e[0])}}))},handleCKey:()=>{i.setOldValue("__ckey",""),i.setOne("__ckey",i.settings.__ckey,!1,(e=>{null!==e&&200===e.status?(alert(t("appointments","Thank You")+"\n"+t("appointments","Key accepted. All contributor only features are unlocked.")),i.settings.__ckey="",i.k=!0):(0,C.Qg)(t("appointments","Error: Please check key"))}))},NcAppSettingsDialog:p.q4,NcAppSettingsSection:p.Te,NcLoadingIcon:p.ne,NcButton:p.x1,NcTextField:p.v,IconPreview:et.A,SectionAdvanced:Ht,SectionBbb:$t,SectionCalendars:me,SectionContact:ve,SectionEmail:he,SectionPage:ke,SectionReminders:Ne,SectionTalk:Ee,SettingsDir:Ve,readonly:s.readonly,LOADING_ALL:pt,readOnlyProps:ct,SectionSecurity:Xe}}};a(2127);const Ke=(0,F.A)(Qe,tt,[],!1,null,"01c49de5",null).exports;var Ye=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"srgdev-appt-grid-flex"},[e("div",{directives:[{name:"show",rawName:"v-show",value:n.gridMode===n.gridMaker.MODE_SIMPLE,expression:"gridMode===gridMaker.MODE_SIMPLE"}],staticClass:"srgdev-appt-cal-view-btns"},[e("button",{staticClass:"primary",on:{click:n.handleAddToCalendar}},[t._v("\n\t\t\t"+t._s(t.t("appointments","Add to Calendar"))+"\n\t\t")]),t._v(" "),e("button",{on:{click:n.close}},[t._v("\n\t\t\t"+t._s(t.t("appointments","Discard"))+"\n\t\t")])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:n.gridMode===n.gridMaker.MODE_TEMPLATE,expression:"gridMode===gridMaker.MODE_TEMPLATE"}],staticClass:"editor-button-cont-flex"},[e(n.NcButton,{staticClass:"editor-button",staticStyle:{"margin-right":"1em",overflow:"hidden"},attrs:{type:"primary",disabled:!0===n.store.loading.template_data},on:{click:function(t){return n.saveTemplate()}},scopedSlots:t._u([!0===n.store.loading.template_data?{key:"icon",fn:function(){return[e(n.NcLoadingIcon,{attrs:{size:20}})]},proxy:!0}:null],null,!0)},[t._v("\n\t\t\t"+t._s(t.t("appointments","Save"))+"\n\t\t")]),t._v(" "),e(n.NcButton,{staticClass:"editor-button",staticStyle:{"margin-right":"3em"},on:{click:n.close}},[t._v("\n\t\t\t"+t._s(t.t("appointments","Cancel"))+"\n\t\t")]),t._v(" "),e("div",{staticClass:"editor-hint"},[t._v("\n\t\t\t"+t._s(t.t("appointments","Hint: right-click on an appointment to edit."))),e("br"),t._v("\n\t\t\t"+t._s(t.t("appointments","Time zone"))+": "+t._s(n.settings.template_info.tzName)+"\n\t\t")])],1),t._v(" "),!0===n.editor.loading?e("div",{staticClass:"editor-loading"},[t._v("\n\t\tLoading...\n\t")]):t._e(),t._v(" "),e("div",{staticClass:"srgdev-appt-grid-flex-lower",class:{"editor-hidden":!0===n.editor.loading}},[e("ul",{staticClass:"srgdev-appt-grid-header"},t._l(n.editor.header,(function(a,o){return e("li",{staticClass:"srgdev-appt-gh-li",style:{width:a.w}},[e("div",{staticClass:"srgdev-appt-gh-txt"},[t._v(t._s(a.txt))]),t._v(" "),e(n.NcActions,{staticClass:"srgdev-appt-gh-act1",attrs:{menuAlign:"right",open:n.editor.menuIndex===o},on:{open:function(t){n.editor.menuIndex=o}}},[n.gridMode===n.gridMaker.MODE_SIMPLE?e(n.NcActionInput,{staticClass:"srgdev-appt-gh-act-inp",attrs:{value:a.n,type:"number"},on:{"update:value":function(e){return t.$set(a,"n",e)},submit:function(t){return n.handleSimpleAddAppts(o)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconPlus,{attrs:{size:20}})]},proxy:!0}],null,!0)}):e(n.NcActionButton,{attrs:{closeAfterClick:!0},on:{click:function(t){return n.handleTemplateApptsEditor(o)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconPlus,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("appointments","Add Appointments"))+"\n\t\t\t\t\t")]),t._v(" "),e(n.NcActionButton,{attrs:{disabled:!a.hasAppts,closeAfterClick:!0},on:{click:function(t){return n.gridApptsDel(o)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconDelete,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("appointments","Remove All"))+"\n\t\t\t\t\t")]),t._v(" "),o!==n.editor.header.length-1?e(n.NcActionButton,{attrs:{disabled:!a.hasAppts,closeAfterClick:!0},on:{click:function(t){return n.gridApptsCopy(o)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconCopyNext,{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("appointments","Copy to Next"))+"\n\t\t\t\t\t")]):t._e()],1)],1)})),0),t._v(" "),e("div",{ref:"grid_cont",staticClass:"srgdev-appt-grid-cont",on:{gridContext:n.editSingleAppt}})]),t._v(" "),null!==n.editor.modalData?e(n.WeeklyApptsEditorModal,{attrs:{data:n.editor.modalData},on:{"tmpl-add-appts":n.handleTmplAddAppts,"tmpl-update-appt":t=>{n.gridMaker.updateAppt(t)},"show-info-modal":t=>{n.editor.infoModal=t},"close-modal":function(t){n.editor.modalData=null}}}):t._e(),t._v(" "),n.editor.infoModal.type!==n.MODAL.NONE?e(n.SettingsInfoModal,{attrs:{data:n.editor.infoModal},on:{"hide-settings-modal":()=>{n.editor.infoModal.type=n.MODAL.NONE}}}):t._e()],1)};Ye._withStripped=!0;var Je=a(4454);const Ze=new function(){const t=3e5;let e;const n={ce:null,uOffset:-1,elms:[],curDrag:null,diff:-1,uMax:-1,apptLayer:null,gridLayer:null,scrollCont:null,headerElm:null,headerHeight:0,mc_elm:[],mc_cols:[],sorted:[],mode:0};function a(){n.scrollCont.scrollTop=document.getElementById("grid-scroll-top").offsetTop}function o(t,a,o,l,p){let c=document.createElement("div");c.className=e+"appt",1!==n.mode&&null!==p&&(c.style.backgroundColor=p),c.uTop=t,c.uLen=a,null!==o?(c.cIdx=o,c.cID=l,c.style.zIndex=""+(n.mc_elm[l].length+1),0!==n.mode&&null!==p&&(c.dur=p.dur,c.title=p.title)):(c.className+=" "+e+"appt-empty",c.style.zIndex="-1");let d=n.elms[t],m=n.elms[t+a-1];c.style.top=d.offsetTop+"px",c.style.height=m.offsetTop+m.offsetHeight-d.offsetTop-.25+"px";let u=document.createElement("div");return u.className=e+"appt_txt",u.appendChild(document.createTextNode(i(c))),c.appendChild(u),void 0!==c.title&&""!==c.title&&(u=document.createElement("div"),u.className=e+"appt_txt",u.appendChild(document.createTextNode(c.title)),c.appendChild(u)),null!==o&&(c.addEventListener("mousedown",r),1===n.mode&&c.addEventListener("contextmenu",s),n.mc_elm[l].push(c)),c}function s(t){n.scrollCont.lastElementChild.dispatchEvent(new CustomEvent("gridContext",{detail:t.target})),t.preventDefault(),t.stopPropagation()}function i(t){return 0===n.mode||1===t.dur.length?n.elms[t.uTop].dxt+" - "+n.elms[t.uTop+t.uLen].dxt:n.elms[t.uTop].dxt+" ("+t.dur.join(", ")+")"}function r(t){if(void 0!==t.button&&2===t.button)return;const e=this.cID;void 0!==e&&(n.mc_cols[e].style.pointerEvents="none",n.diff=t.offsetY,n.curDrag=this,l(n.mc_elm[e],n.curDrag),n.headerHeight=n.headerElm.offsetHeight,window.addEventListener("mouseup",c),t.stopPropagation(),t.preventDefault())}function l(t,e){for(let a,o,s=t,i=n.sorted,r=e,l=+r.style.zIndex,p=0,c=s.length;p<c;p++)a=s[p],a!==r?(o=+a.style.zIndex,o>l&&(a.style.zIndex=--o)):(o=s.length,a.style.zIndex=o),o--,void 0===i[o]?i[o]={idx:p,m:0,h:a.uTop,l:a.uTop+a.uLen}:(i[o].idx=p,i[o].m=0,i[o].h=a.uTop,i[o].l=a.uTop+a.uLen)}function p(t){const e=t.length;for(let t,a=1,o=n.sorted;a<e;a++){t=o[a];for(let e,n=0;n<a;n++)e=o[n],e.h<t.l&&t.h<e.l&&(t.m=Math.max(t.m,e.m+3))}for(let a,o=0,s=n.sorted;o<e;o++)a=s[o],t[a.idx].style.marginRight=a.m+"px"}function c(){n.mc_cols[n.curDrag.cID].style.pointerEvents="all",n.diff=-1,n.uOffset=-1,null!==n.ce&&(n.ce.removeAttribute("top_ok"),n.ce=null);const t=n.mc_elm[n.curDrag.cID],e=n.sorted[t.length-1];e.h=+n.curDrag.uTop,e.l=e.h+n.curDrag.uLen,p(t),n.curDrag=null,window.removeEventListener("mouseup",c)}function d(){if(n.diff<0||null===n.curDrag)return;const t=n;if(-1===t.uOffset){let e=this.mIdx-Math.floor(t.diff/this.offsetHeight)-1;e<0&&(e=0);let n=t.elms[this.mIdx].offsetTop-t.diff;for(let a,o=t.uMax;e<o;e++)if(a=t.elms[e],n<t.elms[e].offsetTop){t.uOffset=this.mIdx-e;break}}let e=this.mIdx-t.uOffset;if(e<0?e=0:e>t.uMax&&(e=t.uMax),t.curDrag.uTop===e)return;let a=t.elms[e];if(null!==t.ce&&t.ce.removeAttribute("top_ok"),void 0!==a){a.setAttribute("top_ok",""),t.ce=a;const n=t.curDrag;if(n.uTop<e){e+n.uLen>t.uMax&&(e=t.uMax-n.uLen+1);const a=t.scrollCont.offsetHeight+t.scrollCont.scrollTop-(t.elms[e+n.uLen].offsetTop+t.headerHeight);a<10&&t.scrollCont.scrollBy(0,Math.abs(10-a))}else{e<0&&(e=0);const n=t.elms[e].offsetTop-t.scrollCont.scrollTop;n<10&&t.scrollCont.scrollBy(0,-Math.abs(10-n))}n.uTop=e,n.firstElementChild.textContent=i(n),n.style.top=t.elms[e].offsetTop+"px"}else t.ce=null}function m(t){return Math.floor(99/t)+"%"}return{MODE_SIMPLE:0,MODE_TEMPLATE:1,setup:function(a,o){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";n.scrollCont=a.parentElement,n.headerElm=n.scrollCont.firstElementChild,e=s;let i=document.createElement("div");i.className=e+"grid_layer",a.appendChild(i),n.gridLayer=i,i=document.createElement("div"),i.className=e+"appt_layer",a.appendChild(i),n.apptLayer=i,function(){const a=7,o=2,s=document.documentElement.hasAttribute("data-locale")?[document.documentElement.getAttribute("data-locale").replaceAll("_","-"),document.documentElement.lang]:[document.documentElement.lang];let i;if(window.Intl&&"object"==typeof window.Intl){i=new Intl.DateTimeFormat(s,{hour:"numeric",minute:"2-digit"}).format}else i=function(t){return t.toLocaleTimeString()};let r=document.createDocumentFragment(),l=new Date;l.setMilliseconds(0),l.setSeconds(0),l.setMinutes(0);const p=l.setHours(8);let c=l.setHours(0);for(let s,m,u=n.elms,g=o,v=288,f=0;f<v;f++){m=document.createElement("div");let n=6e4*l.getTimezoneOffset();l.setTime(c),s=i(l),g===o?(m.className=e+"grid-line "+e+"line-vis",c===p&&(m.id="grid-scroll-top"),m.appendChild(document.createTextNode(s)),g=0):(m.className=e+"grid-line "+e+"line-hid",g++),m.style.top=f*a+"px",m.tss=c-n,m.dxt=s,m.mIdx=f,m.addEventListener("mouseenter",d),u[f]=m,r.appendChild(m),c+=t}n.uMax=n.elms.length-1;let m=document.createElement("div");l.setTime(c),m.dxt=i(l),n.elms.push(m);let u=n.gridLayer;u.style.height=(n.elms.length-1)*a+"px",u.appendChild(r)}(),function(t){for(let a,o=n.apptLayer,s=m(t),i=0;i<t;i++)a=document.createElement("div"),a.className=e+"appt_columns",a.style.width=s,o.appendChild(a),n.mc_cols[i]=a,n.mc_elm[i]=[]}(o)},addAppt:function(t,e,s,i,r){e<5?e=5:e>480&&(e=480);let c=Math.floor(e/5),d=n.uMax-c+1;if((t+=96)<0)t=0;else if(t>d)return;const m=n.mc_elm[i].length;let u=document.createDocumentFragment();for(let e,n=0;n<s&&(e=n*c+t,!(e>d));n++)u.appendChild(o(e,c,n+m,i,r));n.mc_cols[i].appendChild(u);const g=n.mc_elm[i];l(g,g[g.length-1]),p(g),a()},cloneColumns:function(t,e,a){if(0!==n.mc_elm[e].length||0===n.mc_elm[t].length)return;let s=document.createDocumentFragment();const i=1===n.mode;n.mc_elm[t].forEach(((t,n)=>{s.appendChild(o(t.uTop,t.uLen,n,e,i?{dur:[...t.dur],title:t.title}:a))})),n.mc_cols[e].appendChild(s),n.mc_elm[t].forEach(((t,a)=>{let o=n.mc_elm[e][a];o.style.zIndex=t.style.zIndex,o.style.marginRight=t.style.marginRight}))},resetColumn:function(t){let e=n.mc_cols[t];for(let a=n.mc_elm[t],o=a.length,s=0;s<o;s++)e.removeChild(a[s]),a[s]=null;n.mc_elm[t]=[]},resetAllColumns:function(){for(let t=0,e=n.mc_cols.length;t<e;t++){n.mc_elm[t]=[];let e=n.mc_cols[t];for(;e.lastElementChild;)e.removeChild(e.lastElementChild)}},getStarEnds:function(e,a){function o(t){const e=t.getMonth()+1,n=t.getDate(),a=t.getHours(),o=t.getMinutes();return t.getFullYear()+(e<10?"0"+e:""+e)+(n<10?"0"+n:""+n)+"T"+(a<10?"0"+a:""+a)+(o<10?"0"+o:""+o)+"00"}let s=[(new Date).toISOString().slice(0,-5).replace(/[\-:]/g,"")+"Z"],i=0;for(let r,l=new Date,p=0,c=n.mc_cols.length;p<c;p++){l.setTime(e),l.setHours(0),r=l.setDate(l.getDate()+p);for(let e,c=0,d=n.mc_elm[p],m=0,u=d.length;m<u;m++)e=d[m],l.setTime(e.uTop*t+r),a&&(c=6e4*l.getTimezoneOffset(),l.setTime(l.getTime()+c)),s[++i]=o(l),l.setTime((e.uTop+e.uLen)*t+r+c),s[++i]=o(l)}return s},addPastAppts:function(t,e){if(!t)return;if(null===e)return void function(t,e){for(let a,s,i,r=t.length,c=0;c<r;c++)if(0!==t[c].length){s=(c+e)%7,a=document.createDocumentFragment();for(let e,n,i,r=t[c],l=r.length,p=0;p<l;p++)i=r[p],e=Math.floor((i.start-0)/300),n=Math.floor(i.dur[0]/5),a.appendChild(o(e,n,p,s,i));n.mc_cols[s].appendChild(a),i=n.mc_elm[s],l(i,i[0]),p(i)}}(t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:0);const a=t.split(String.fromCharCode(31)),s=a.shift().split("-"),i=Date.UTC(s[2],s[1]-1,s[0]);for(let t,s=0,r=a.length;s<r;s++)if(t=a[s],!(t.length<3)){if(s>0){const n=t.indexOf(String.fromCharCode(30));if(-1===n)continue;e=t.substr(0,n),t=t.substr(n+1)}for(let a,s,r,l,p,c,d,m=new Date,u=t.split(","),g=u.length,v=0;v<g;v++)p=u[v],a=p.indexOf(":",8),m.setTime(1e3*p.substr(a+2)),s=m.getTime(),m.setTime(1e3*p.substr(1,a-1)),c=Math.floor((s-m.getTime())/3e5),d=Math.floor(Math.abs(Date.UTC(m.getFullYear(),m.getMonth(),m.getDate())-i)/864e5),d<0||d>6||(l=Math.floor(60*(m.getHours()-0)/5+m.getMinutes()/5),l>=0&&l+c<=288&&(r=o(l,c,null,d,e),n.mc_cols[d].appendChild(r)))}},setMode:function(t){n.mode=t},updateAppt:function(t){const a=n.mc_elm[t.cID],o=a[t.cIdx];if(void 0!==t.del)return o.parentElement.removeChild(o),a.splice(t.cIdx,1),a.forEach(((t,e)=>{t.cIdx=e,t.style.zIndex=e+1})),this.sorted=[],void(0!==a.length&&(l(a,a[a.length-1]),p(a)));o.dur=t.dur,o.title=t.title;const s=Math.floor(t.dur[0]/5),r=o.uTop;let c=n.elms[r],d=n.elms[r+s-1];if(o.uLen=s,o.style.height=d.offsetTop+d.offsetHeight-c.offsetTop-.25+"px",o.firstElementChild.textContent=i(o),""===t.title)o.children.length>1&&o.removeChild(o.lastElementChild);else if(o.children.length>1)o.lastElementChild.textContent=t.title;else{const n=document.createElement("div");n.className=e+"appt_txt",n.appendChild(document.createTextNode(t.title)),o.appendChild(n)}l(a,o),p(a)},getTemplateData:function(t){const e=[];for(let a,o=0+t,s=n.mc_cols.length+t;o<s;o++){a=[];for(let t,e=n.mc_elm[o%7],s=0,i=e.length;s<i;s++)t=e[s],a.push({start:0+300*t.uTop,dur:t.dur,title:t.title.replaceAll(","," ")});e.push(a)}return e},scrollGridToTopElm:a,makeHeader:function(t,e){const a=m(e);let o;if(window.Intl&&"object"==typeof window.Intl){const t=document.documentElement.hasAttribute("data-locale")?[document.documentElement.getAttribute("data-locale").replaceAll("_","-"),document.documentElement.lang]:[document.documentElement.lang];o=(0===n.mode?new Intl.DateTimeFormat(t,{weekday:"short",month:"2-digit",day:"2-digit"}):new Intl.DateTimeFormat(t,{weekday:"long"})).format}else{const t=0===n.mode?10:3;o=function(e){return e.toDateString().slice(0,t)}}const s=[];for(let n=t.getTime(),i=0;i<e;i++)s[i]={ts:n,txt:o(t),w:a,n:"8",hasAppts:!1},n=t.setDate(t.getDate()+1);return s}}};var tn=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcModal,{staticStyle:{"z-index":"10002"},attrs:{labelId:"srgdev_appts_editor_name",setReturnFocus:!1,show:null!==t.data},on:{"update:show":n.handleUpdateShow}},[""!==n.header?e("h4",{staticClass:"tao-h4",attrs:{id:"srgdev_appts_editor_name"}},[t._v(t._s(n.header))]):t._e(),t._v(" "),e("div",{staticClass:"srgdev-appt-modal-wrap",staticStyle:{"text-align":"left"}},[null===n.props.data.elm?[e(n.LabelAccordion,{attrs:{label:t.t("appointments","Number of Appointments"),for:"atam-slider-count"}}),t._v(" "),e(n.VueSlider,{staticClass:"ps-slider appt-slider",attrs:{min:1,max:32,tooltip:"always",tooltipPlacement:"bottom",id:"atam-slider-count"},model:{value:n.state.count,callback:function(e){t.$set(n.state,"count",e)},expression:"state.count"}})]:t._e(),t._v(" "),e("div",{staticClass:"pml-cont"},[e("label",{staticClass:"slider-label"},[t._v(t._s(t.t("appointments","Duration (hours:minutes)")))]),t._v(" "),e("span",{staticClass:"pml-p",on:{click:n.addDurationHandler}},[t._v("+")]),t._v(" "),e("span",{staticClass:"pml-m",on:{click:n.removeDurationHandler}},[t._v("−")])]),t._v(" "),e(n.VueSlider,{staticClass:"ps-slider appt-slider",attrs:{min:5,max:n.DUR_MAX,order:!1,interval:5,process:!1,tooltip:"always",tooltipPlacement:"bottom","tooltip-formatter":n.durationsTooltipFormatter},model:{value:n.state.durations,callback:function(e){t.$set(n.state,"durations",e)},expression:"state.durations"}}),t._v(" "),e(n.LabelAccordion,{attrs:{label:t.t("appointments","Title"),for:"atam-input-title"}}),t._v(" "),e(n.NcTextField,{attrs:{id:"atam-input-title",placeholder:"Optional",value:n.state.title,"label-outside":!0},on:{"update:value":function(e){return t.$set(n.state,"title",e)}}}),t._v(" "),e("div",{staticClass:"actions-cont"},[e(n.NcButton,{staticClass:"actions-cont-button",attrs:{"aria-label":n.primaryButtonText,type:"primary"},on:{click:n.handlePrimaryClick}},[t._v("\n\t\t\t\t"+t._s(n.primaryButtonText)+"\n\t\t\t")]),t._v(" "),null!==n.props.data.elm?e(n.NcButton,{staticClass:"actions-cont-button",attrs:{"aria-label":t.t("appointments","Delete")},on:{click:n.handleDeleteClick}},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Delete"))+"\n\t\t\t")]):t._e(),t._v(" "),e(n.NcButton,{staticClass:"actions-cont-button",attrs:{"aria-label":t.t("appointments","Cancel")},on:{click:function(t){return n.handleUpdateShow(!1)}}},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Cancel"))+"\n\t\t\t")])],1)],2)])};tn._withStripped=!0;const en={__name:"WeeklyApptsEditorModal",props:{data:{type:Object,required:!0}},emits:["close-modal","tmpl-add-appts","tmpl-update-appt","show-info-modal"],setup(e,n){let{emit:a}=n;const o=e,i=480,r=(0,s.reactive)({count:8,durations:[30],title:""});null!==o.data.elm&&(r.durations=[...o.data.elm.dur],r.title=o.data.elm.title);const l=(()=>{let t="";if(window.Intl&&"object"==typeof window.Intl){const e=document.documentElement.hasAttribute("data-locale")?[document.documentElement.getAttribute("data-locale").replaceAll("_","-"),document.documentElement.lang]:[document.documentElement.lang];if(null===o.data.elm){if(o.data.cid>-1){const n=new Date;n.setDate(n.getDate()-n.getDay()+1-o.data.gridShift+o.data.cid),t=new Intl.DateTimeFormat(e,{weekday:"long"}).format(n)}}else if(void 0!==o.data.elm.uTop&&void 0!==o.data.elm.cID){const n=new Date;n.setDate(n.getDate()-n.getDay()+1-o.data.gridShift+o.data.elm.cID);const a=60*0+5*o.data.elm.uTop,s=a/60|0;n.setHours(s,a-60*s),t=new Intl.DateTimeFormat(e,{weekday:"long",hour:"2-digit",minute:"2-digit"}).format(n)}}return t})(),c=null===o.data.elm?t("appointments","Add"):t("appointments","OK");return{__sfc:!0,DUR_MAX:i,emit:a,props:o,state:r,header:l,handleUpdateShow:t=>{!1===t&&a("close-modal")},addDurationHandler:()=>{if(Array.isArray(r.durations)||(r.durations=[r.durations]),!1===o.data.k&&r.durations.length>1)return void a("show-info-modal",{type:S.CONTRIBUTION,message:t("appointments","More than two duration choices")});if(r.durations.length>7)return;const e=[...r.durations,i].sort(((t,e)=>t-e));let n=0;for(let t=0,a=0,o=0,s=e.length-1;o<s;o++)a=e[o+1]-e[o],a>t&&(t=a,n=o);r.durations.push(5*((e[n]+(e[n+1]-e[n]>>1))/5|0))},removeDurationHandler:()=>{Array.isArray(r.durations)&&r.durations.length>1&&r.durations.splice(-1,1)},durationsTooltipFormatter:t=>{const e=t/60|0,n=t-60*e;return e+":"+(n>9?""+n:"0"+n)},handlePrimaryClick:()=>{null===o.data.elm?a("tmpl-add-appts",{count:r.count,dur:Array.isArray(r.durations)?r.durations.sort(((t,e)=>t-e)):[r.durations],title:r.title,cid:o.data.cid}):(a("tmpl-update-appt",{dur:Array.isArray(r.durations)?r.durations.sort(((t,e)=>t-e)):[r.durations],title:r.title,cIdx:o.data.elm.cIdx,cID:o.data.elm.cID}),a("close-modal"))},handleDeleteClick:()=>{a("tmpl-update-appt",{cIdx:o.data.elm.cIdx,cID:o.data.elm.cID,del:!0}),a("close-modal")},primaryButtonText:c,NcButton:p.x1,NcModal:p.FH,NcTextField:p.v,LabelAccordion:At,VueSlider:Kt()}}};a(6828);const nn=(0,F.A)(en,tn,[],!1,null,"25873168",null).exports;var an=function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcModal,{staticStyle:{"z-index":"10002"},attrs:{enableSwipe:!1,outTransition:!1,show:t.data.type!==n.MODAL.NONE},on:{"update:show":n.handleUpdateShow}},[e("div",{staticClass:"srgdev-appt-modal-wrap"},[t.data.type===n.MODAL.CONTRIBUTION?[e("div",{staticClass:"srgdev-appt-modal-header"},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Contributor only feature"))+"\n\t\t\t")]),t._v("\n\t\t\t"+t._s(t.data.message)+"\n\t\t\t"),e(n.NcPopover,{staticClass:"popover-wrapper",scopedSlots:t._u([{key:"trigger",fn:function(){return[e(n.NcButton,{staticClass:"popover-trigger",scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.IconInfo,{attrs:{size:20}})]},proxy:!0}],null,!1,3373127437)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("appointments","More Information"))+"\n\t\t\t\t\t")])]},proxy:!0}],null,!1,2909054914)},[t._v(" "),[e("div",{staticClass:"popover-content"},[t._v("\n\t\t\t\t\t\tContributor features can be unlocked by obtaining a\n\t\t\t\t\t\t"),e("strong",[t._v("contributor key")]),t._v(" in any of the following ways:\n\t\t\t\t\t\t"),e("ul",{staticClass:"popover-list"},[e("li",[t._v("Contribute any amount to this app development or sponsor a feature over at the\n\t\t\t\t\t\t\t\t"),e("a",{staticClass:"srgdev-appt-hs-link",attrs:{target:"_blank",href:"https://www.srgdev.com/gh-support/nextcloudapps"}},[t._v("Funding Page")]),t._v(".\n\t\t\t\t\t\t\t")]),t._v(" "),e("li",[t._v("Contribute code via a pull request on\n\t\t\t\t\t\t\t\t"),e("a",{staticClass:"srgdev-appt-hs-link",attrs:{target:"_blank",href:"https://github.com/SergeyMosin/Appointments"}},[t._v("GitHub")])]),t._v(" "),e("li",[t._v("If you are a member of the Nexcloud team on transifex.com please\n\t\t\t\t\t\t\t\t"),e("a",{staticClass:"srgdev-appt-hs-link",attrs:{target:"_blank",href:"https://www.srgdev.com/contact.html#cnt_ancr"}},[t._v("contact me directly")]),t._v(".\n\t\t\t\t\t\t\t")]),t._v(" "),e("li",[t._v("Contact me if none of the above methods work for you.")])])])]],2)]:t._e(),t._v(" "),t.data.type===n.MODAL.INFO?[e("div",{staticClass:"srgdev-appt-modal-header"},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Information/Warning"))+"\n\t\t\t")]),t._v("\n\t\t\t"+t._s(t.data.message)+"\n\t\t")]:t._e(),t._v(" "),t.data.type===n.MODAL.ERROR?[e("div",{staticClass:"srgdev-appt-modal-header srgdev-appt-modal-header_error"},[t._v("\n\t\t\t\t"+t._s(t.t("appointments","Error"))+"\n\t\t\t")]),t._v("\n\t\t\t"+t._s(t.data.message)+"\n\t\t")]:t._e()],2)])};an._withStripped=!0;const on={__name:"SettingsInfoModal",props:{data:{type:Object,required:!0}},emits:["hide-settings-modal"],setup(t,e){let{emit:n}=e;return{__sfc:!0,emit:n,props:t,handleUpdateShow:t=>{!1===t&&n("hide-settings-modal")},NcModal:p.FH,NcButton:p.x1,NcPopover:p.rI,IconInfo:gt.A,MODAL:S}}};a(2414);const sn=(0,F.A)(on,an,[],!1,null,"3287338e",null).exports,rn={__name:"TimeSlotEditor",props:{data:[Object,null]},emits:["hide-timeslot-editor"],setup(e,n){let{emit:a}=n;const o=e,i=dt(),r=i.settings,l=(0,s.ref)(null),c=r.tsMode===w.TEMPLATE?Ze.MODE_TEMPLATE:Ze.MODE_SIMPLE,d=0===window.firstDay?1:6===window.firstDay?2:0;Ze.resetAllColumns(),Ze.setMode(c);const m=()=>{if(c===Ze.MODE_TEMPLATE){const t=new Date;t.setHours(0,0,0);let e=t.getDay();return 0===e?e++:e=1-e,t.setDate(t.getDate()+e),0!==d&&t.setDate(t.getDate()-d),t}return new Date(o.data.week)},u=(0,s.reactive)({header:Ze.makeHeader(m(),7),menuIndex:-1,simpleLen:0,simpleTs:0,modalData:null,infoModal:{type:S.NONE,data:""},loading:!1});(0,s.onMounted)((()=>{if(Ze.setup(l.value,7,"srgdev-appt-grd-"),c===Ze.MODE_TEMPLATE)Ze.addPastAppts(r.template_data,null,d),r.template_data.forEach(((t,e)=>{const n=(e+d)%7;void 0!==u.header[n]&&(u.header[n].hasAppts=t.length>0)}));else{u.loading=!0;const e=m(),n=e.getDate()+"-"+(e.getMonth()+1)+"-"+e.getFullYear();(new E).getCalendarWeek(o.data.pageId,n).then((e=>{null===e?state.error=t("appointments","error: cannot load calendar data"):Ze.addPastAppts(n+String.fromCharCode(31)+e.data,o.data.calColor),u.loading=!1}))}(0,s.nextTick)(Ze.scrollGridToTopElm)}));const g=()=>{a("hide-timeslot-editor")};return{__sfc:!0,COL_COUNT:7,emit:a,store:i,settings:r,grid_cont:l,props:o,gridMode:c,gridShift:d,getStartDate:m,editor:u,close:g,handleAddToCalendar:()=>{const e=Ze.getStarEnds(o.data.week,"UTC"===o.data.tz);(new E).addSimpleAppointments({d:e.join(","),tz:o.data.tz,p:o.data.pageId}).then((e=>{null===e?(0,C.Qg)(t("appointments","Can't add appointments to calendar")):((0,C.Te)(t("appointments","Appointments added to {calendarName} calendar",{calendarName:o.data.calName})),g())}))},saveTemplate:()=>{i.setOne("template_data",Ze.getTemplateData(d),!1,(t=>{null!==t&&a("hide-timeslot-editor")}))},editSingleAppt:t=>{u.modalData={elm:t.detail,gridShift:d,k:i.k}},handleTemplateApptsEditor:t=>{u.menuIndex=-1,u.modalData={gridShift:d,elm:null,cid:t,k:i.k}},handleTmplAddAppts:t=>{u.modalData=null;const e=isNaN(t.count)||t.count<1?1:t.count;Ze.addAppt(0,t.dur[0],e,t.cid,t),u.header[t.cid].hasAppts=!0},handleSimpleAddAppts:e=>{const n=u.header[e],a=parseInt(n.n);if(isNaN(a)||a<1)return void(0,C.Qg)(t("appointments","Invalid number of appointments"));u.menuIndex=-1;const s=isNaN(o.data.dur)||o.data.dur<5?5:o.data.dur;Ze.addAppt(0,s,a,e,o.data.calColor),n.hasAppts=!0},gridApptsDel:t=>{u.menuIndex=-1,Ze.resetColumn(t),u.header[t].hasAppts=!1},gridApptsCopy:t=>{u.menuIndex=-1;const e=o.data&&o.data.calColor?o.data.calColor:null;Ze.cloneColumns(t,t+1,e),u.header[t+1].hasAppts=!0},MODAL:S,NcActions:p.B6,NcActionButton:p.Ko,NcActionInput:p.Az,NcButton:p.x1,NcLoadingIcon:p.ne,IconPlus:f.A,IconDelete:b.A,IconCopyNext:Je.A,gridMaker:Ze,WeeklyApptsEditorModal:nn,SettingsInfoModal:sn}}};a(273);const ln=(0,F.A)(rn,Ye,[],!1,null,"797905e6",null).exports;function pn(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,a)}return n}function cn(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?pn(Object(n),!0).forEach((function(e){dn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):pn(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function dn(t,e,n){return(e=function(t){var e=function(t,e){if("object"!=typeof t||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var a=n.call(t,e||"default");if("object"!=typeof a)return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const mn={__name:"App2",setup(t){const e=z(),n=(0,s.reactive)({settingsPageId:"",context:k.PREVIEW,contextData:null,modalData:{type:S.NONE,message:""}}),a=function(t){let a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(n.context=k.PREVIEW,"-1"===t)n.contextData=null;else{if(!1===a&&n.contextData&&n.contextData.pageUrl&&n.contextData.pageUrl.includes("p="+t+"&"))return;"p"===t[0]?n.contextData=cn({pageLoading:!0,pageUrl:"form?p="+t+"&v="+Date.now()},e.getPageById(t)):n.contextData=cn({pageLoading:!0,pageUrl:"dir?p="+t+"&v="+Date.now()},e.dirPage)}};let o="-1";return{__sfc:!0,pagesStore:e,state:n,handleShowSettingsInfoModal:t=>{n.modalData.type=t.type,n.modalData.message=t.message},handleCloseSettings:()=>{""!==n.settingsPageId&&a(n.settingsPageId),n.settingsPageId=""},showPage:a,showSettings:t=>{n.settingsPageId=t},lastPageId:o,showTimeSlotEditor:t=>{o=n.settingsPageId||"-1",n.settingsPageId="",n.context=k.EDITOR,n.contextData=t},handleHideTimeslotEditor:()=>{a(o||"-1")},NcContent:p.bw,NcAppContent:p.ir,NcLoadingIcon:p.ne,Navigation2:Z,Settings:Ke,TimeSlotEditor:ln,SettingsInfoModal:sn,CONTEXT:k,MODAL:S}}};a(485);const un=(0,F.A)(mn,l,[],!1,null,"7edcdc5d",null).exports;a.nc=btoa(OC.requestToken),a.p=(0,o.fg)("appointments","","js/"),s.default.prototype.t=i.Tl,s.default.prototype.n=i.zw,s.default.prototype.OC=OC,s.default.prototype.OCA=OCA,s.default.use(r.R2);const gn=(0,r.Ey)();document.addEventListener("DOMContentLoaded",(()=>{const t=document.getElementById("app-content-vue");if(t){new s.default({pinia:gn,render:t=>t(un)}).$mount(t)}}))},8430:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.srgdev-appt-tz-cont[data-v-0152d426] {\n\tcolor: var(--color-text-lighter);\n\tfont-size: 85%;\n\tline-height: 1.1;\n\tmargin-bottom: 1.25em;\n}\n\n","",{version:3,sources:["webpack://./src/components/settings-v2/SectionCalendarsSimple.vue"],names:[],mappings:";AAiVA;CACA,gCAAA;CACA,cAAA;CACA,gBAAA;CACA,qBAAA;AACA",sourcesContent:['<script setup>\nimport {reactive, inject} from "vue";\nimport LabelAccordion from "../LabelAccordion.vue";\nimport IconCalendarAdd from "vue-material-design-icons/CalendarPlus.vue";\nimport {useSettingsStore} from "../../stores/settings";\nimport DatePicker from "vue2-datepicker";\nimport VueSlider from "vue-slider-component";\nimport {getTimezone} from "../../use/utils";\nimport {NcButton, NcCheckboxRadioSwitch} from "@nextcloud/vue";\nimport {showError} from "@nextcloud/dialogs";\nimport ComboSelect from "./ComboSelect.vue";\n\nconst emit = defineEmits([\'show-editor\'])\n\nconst props = defineProps({\n\tcalendarOptions: {\n\t\trequired: true\n\t}\n})\n\nconst pageId = inject("pageId", \'\')\n\nconst settingsStore = useSettingsStore()\nconst settings = settingsStore.settings\n\nconst state = reactive({\n\ttzLoading: false,\n\terror: false,\n\ttzName: \'\',\n\ttzData: \'\',\n\t/** @type {Date|null} */\n\tapptWeek: null,\n\tapptDur: 30,\n\n\trsValue: "58",\n\tremType: "empty",\n\tremModalData: null\n})\n\n// add new ----------------\n\n// TODO: refactor SEF\nconst lang = (() => {\n\tlet days = undefined\n\tlet months = undefined\n\tconst formatLocale = {\n\t\t// 1 (Mon) = default/fallback, or 0 (Sun) or 6 (Sat)\n\t\tfirstDayOfWeek: window.firstDay === 0\n\t\t\t\t? 0\n\t\t\t\t: (window.firstDay === 6 ? 6 : 1)\n\t}\n\tif (window.Intl && typeof window.Intl === "object") {\n\t\tdays = []\n\t\tlet d = new Date(1970, 1, 1)\n\t\tlet f = new Intl.DateTimeFormat([],\n\t\t\t\t{weekday: "short",})\n\t\tfor (let i = 1; i < 8; i++) {\n\t\t\td.setDate(i)\n\t\t\tdays[i - 1] = f.format(d)\n\t\t}\n\t\tf = new Intl.DateTimeFormat([],\n\t\t\t\t{month: "short",})\n\t\td.setDate(1)\n\t\tmonths = []\n\t\tfor (let i = 0; i < 12; i++) {\n\t\t\td.setMonth(i)\n\t\t\tmonths[i] = f.format(d)\n\t\t}\n\t\tformatLocale.monthsShort = months\n\t}\n\treturn {days: days, formatLocale: formatLocale}\n})()\n\nconst getStartOfWeek = (d) => {\n\n\td.setHours(0, 0, 0, 0)\n\n\t// lang.formatLocale.firstDayOfWeek can be:\n\t//  0: Sunday\n\t//  1: Monday\n\t//  6: Saturday\n\tconst fdw = lang.formatLocale.firstDayOfWeek\n\n\t//  fdw=0 : 0 1 2 3 4 5 6 | adjust: d.getDay()\n\t//  fdw=1 : 1 2 3 4 5 6 0 | adjust: (d.getDay() + 6) % 7\n\t//  fdw=6 : 6 0 1 2 3 4 5 | adjust: (d.getDay() + 1) % 7\n\t//  delta : 0 1 2 3 4 5 6\n\n\tconst deltaDays = (d.getDay() + (7 - fdw)) % 7\n\n\tconst nd = new Date(d.getTime())\n\tnd.setDate(nd.getDate() - deltaDays)\n\treturn nd\n}\n\n// TODO: refactor SEF\nconst notBeforeDate = (() => {\n\tconst d = getStartOfWeek(new Date())\n\t// because of daylight savings\n\td.setHours(1, 30, 0, 0)\n\treturn d\n})()\n\n\nconst compNotBefore = (d) => {\n\td.setHours(1, 30, 0, 0)\n\treturn d < notBeforeDate\n}\n\nconst datePickerPopupStyle = {\n\ttop: "75%",\n\tleft: "50% !important",\n\ttransform: "translate(-50%,0)"\n}\n\nconst weekFormat = {\n\t// Date to String\n\tstringify: (date, fmt) => {\n\t\tif (date) {\n\t\t\tconst endDate = new Date(date.getTime())\n\t\t\tendDate.setDate(endDate.getDate() + 6);\n\t\t\tif (window.Intl && typeof window.Intl === "object") {\n\t\t\t\tlet f = new Intl.DateTimeFormat([],\n\t\t\t\t\t\t{month: "short", day: "2-digit",})\n\t\t\t\treturn f.format(date) + \' - \' + f.format(endDate)\n\t\t\t} else {\n\t\t\t\treturn date.toLocaleDateString() + \' - \' + (endDate).toLocaleDateString()\n\t\t\t}\n\t\t} else return \'\'\n\t}\n}\nconst setToStartOfWeek = () => {\n\tif (state.apptWeek !== null) {\n\t\tstate.apptWeek = getStartOfWeek(state.apptWeek)\n\t}\n}\n\nconst addAccordionOpen = () => {\n\tstate.tzLoading = true\n\tstate.tzName = \'UTC\'\n\tstate.tzData = \'UTC\'\n\tgetTimezone(pageId, settings.mainCalId).then(d => {\n\t\tif (d === null) {\n\t\t\tstate.error = true\n\t\t} else {\n\t\t\tstate.tzName = d.name\n\t\t\tstate.tzData = d.data\n\t\t}\n\t}).finally(() => {\n\t\tstate.tzLoading = false\n\t})\n\tstate.apptDur = 30\n\tstate.apptWeek = null\n}\n\nconst showSimpleEditor = () => {\n\n\tif (settings.mainCalId === \'-1\') {\n\t\tshowError(t(\'appointments\', \'error: main calendar required\'))\n\t\treturn\n\t}\n\n\tconst cal = settingsStore.calendars.find(item => item.id === settings.mainCalId)\n\tif (!cal) {\n\t\tshowError(t(\'appointments\', \'error: cannot find calendar with ID \' + settings.mainCalId))\n\t\treturn;\n\t}\n\n\tconst r = {\n\t\ttz: state.tzData,\n\t\tweek: state.apptWeek.getTime(),\n\t\tdur: state.apptDur,\n\t\tpageId: pageId,\n\t\tcalColor: cal.color,\n\t\tcalName: cal.name,\n\t}\n\temit(\'show-editor\', r)\n}\n\n// remove old --------------------\n\n// // TODO: refactor SEF\n// const rsMarks = (() => {\n// \tconst options = {month: \'short\', day: \'2-digit\'};\n// \tconst d = new Date()\n// \td.setTime(Date.now() - 86400000)\n// \tconst y = d.toLocaleString(undefined, options)\n// \td.setTime(d.getTime() - 86400000 * 6)\n// \tconst w = d.toLocaleString(undefined, options)\n// \treturn {\n// \t\t0: \'-∞\',\n// \t\t58: w,\n// \t\t100: y,\n// \t}\n// })()\n//\n// const checkRsMin = () => {\n// \tif (+state.rsValue < 58) state.rsValue = "58"\n// }\n//\n// const removeOldAppointments = () => {\n// \tstate.remModalData = {\n// \t\tri: {\n// \t\t\ttype: state.remType,\n// \t\t\tbefore: state.rsValue === "100" ? 1 : 7\n// \t\t},\n// \t\tpageId: pageId\n// \t}\n// }\n\n<\/script>\n\n<template>\n\t<div>\n\t\t<ComboSelect\n\t\t\t\tprop-name="mainCalId"\n\t\t\t\t:options="calendarOptions"\n\t\t\t\t:store="settingsStore"\n\t\t\t\t:label="t(\'appointments\', \'Main calendar\')"\n\t\t\t\t:emit-input="true"\n\t\t\t\tv-on="$listeners">\n\t\t\t<template #help>\n\t\t\t\t{{ t(\'appointments\', \'When you create new appointment slots they are placed here and are shown in your public page(s). It is recommended to use a dedicated calendar.\') }}\n\t\t\t</template>\n\t\t</ComboSelect>\n\t\t<ComboSelect\n\t\t\t\tprop-name="destCalId"\n\t\t\t\t:options="calendarOptions"\n\t\t\t\t:store="settingsStore"\n\t\t\t\t:label="t(\'appointments\', \'Calendar for booked appointments\')"\n\t\t\t\t:placeholder="t(\'appointments\', \'Use Main calendar\')"\n\t\t\t\t:emit-input="true"\n\t\t\t\tv-on="$listeners">\n\t\t\t<template #help>\n\t\t\t\t{{ t(\'appointments\', \'If this calendar is different from the Main Calendar, once an appointment is booked it will be moved here.\') }}\n\t\t\t</template>\n\t\t</ComboSelect>\n\n\t\t<LabelAccordion\n\t\t\t\tclass="ps-vert-spacing"\n\t\t\t\t:label="t(\'appointments\', \'Add Appointment Slots\')"\n\t\t\t\t:accordion="true"\n\t\t\t\t@open-accordion="addAccordionOpen">\n\t\t\t<template #accordionIcon>\n\t\t\t\t<IconCalendarAdd :size="24"/>\n\t\t\t</template>\n\t\t\t<div v-if="state.tzLoading">\n\t\t\t\t{{ t(\'appointments\', "Loading...") }}\n\t\t\t</div>\n\t\t\t<div v-else-if="state.error">\n\t\t\t\t{{ t(\'appointments\', "Error: Can\'t load time zones") }}\n\t\t\t</div>\n\t\t\t<template v-else-if="state.tzName!==\'\'">\n\t\t\t\t<LabelAccordion\n\t\t\t\t\t\t:label="t(\'appointments\', \'Select Dates\')"/>\n\t\t\t\t<DatePicker\n\t\t\t\t\t\tstyle="width: auto; min-width: 21em;"\n\t\t\t\t\t\t:editable="false"\n\t\t\t\t\t\t:disabled-date="compNotBefore"\n\t\t\t\t\t\t:appendToBody="false"\n\t\t\t\t\t\t:popup-style="datePickerPopupStyle"\n\t\t\t\t\t\t:placeholder="t(\'appointments\',\'Select Dates\')"\n\t\t\t\t\t\tv-model="state.apptWeek"\n\t\t\t\t\t\t:lang="lang"\n\t\t\t\t\t\t@input="setToStartOfWeek"\n\t\t\t\t\t\t:formatter="weekFormat"\n\t\t\t\t\t\ttype="week"></DatePicker>\n\t\t\t\t<div class="srgdev-appt-info-lcont srgdev-appt-tz-cont">\n\t\t\t\t\t{{ t(\'appointments\', \'Time zone:\') + \' \' + state.tzName }}\n\t\t\t\t</div>\n\t\t\t\t<label for="appt_dur-select" class="select-label">{{ t(\'appointments\', \'Appointment Duration:\') }}</label>\n\t\t\t\t<vue-slider\n\t\t\t\t\t\t:min="5"\n\t\t\t\t\t\t:max="120"\n\t\t\t\t\t\t:interval="5"\n\t\t\t\t\t\ttooltip="always"\n\t\t\t\t\t\ttooltipPlacement="bottom"\n\t\t\t\t\t\t:tooltip-formatter="\'{value} Min\'"\n\t\t\t\t\t\tid="appt_dur-select"\n\t\t\t\t\t\tclass="appt-slider"\n\t\t\t\t\t\tv-model="state.apptDur"/>\n\t\t\t\t<NcButton\n\t\t\t\t\t\t@click="showSimpleEditor"\n\t\t\t\t\t\t:disabled="state.apptWeek===null"\n\t\t\t\t\t\tstyle="margin-top: 3.5em;margin-bottom: 2em;padding-left: 3em;padding-right: 3em;"\n\t\t\t\t\t\tclass="srgdev-appt-sb-genbtn"\n\t\t\t\t\t\t:aria-label="t(\'appointments\', \'Start\')">\n\t\t\t\t\t{{ t(\'appointments\', \'Start\') }}\n\t\t\t\t</NcButton>\n\t\t\t</template>\n\t\t</LabelAccordion>\n\n\t\t\x3c!--\t\t<LabelAccordion--\x3e\n\t\t\x3c!--\t\t\t\tclass="ps-vert-spacing"--\x3e\n\t\t\x3c!--\t\t\t\t:label="t(\'appointments\', \'Remove Old Appointments\')"--\x3e\n\t\t\x3c!--\t\t\t\t:accordion="true">--\x3e\n\t\t\x3c!--\t\t\t<template #accordionIcon>--\x3e\n\t\t\x3c!--\t\t\t\t<IconCalendarRemove :size="24"/>--\x3e\n\t\t\x3c!--\t\t\t</template>--\x3e\n\t\t\x3c!--\t\t\t<LabelAccordion--\x3e\n\t\t\x3c!--\t\t\t\t\t:label="t(\'appointments\', \'Scheduled before\')"/>--\x3e\n\t\t\x3c!--\t\t\t<vue-slider--\x3e\n\t\t\x3c!--\t\t\t\t\tv-model="state.rsValue"--\x3e\n\t\t\x3c!--\t\t\t\t\t:marks="rsMarks"--\x3e\n\t\t\x3c!--\t\t\t\t\t:process="true"--\x3e\n\t\t\x3c!--\t\t\t\t\t:included="true"--\x3e\n\t\t\x3c!--\t\t\t\t\t:lazy="true"--\x3e\n\t\t\x3c!--\t\t\t\t\ttooltip="none"--\x3e\n\t\t\x3c!--\t\t\t\t\t@change="checkRsMin"--\x3e\n\t\t\x3c!--\t\t\t\t\tclass="appt-slider"/>--\x3e\n\t\t\x3c!--\t\t\t<NcCheckboxRadioSwitch--\x3e\n\t\t\x3c!--\t\t\t\t\tstyle="margin-top: 2.5em; margin-left: -1em"--\x3e\n\t\t\x3c!--\t\t\t\t\t:checked.sync="state.remType"--\x3e\n\t\t\x3c!--\t\t\t\t\tvalue="empty"--\x3e\n\t\t\x3c!--\t\t\t\t\tname="remove_type"--\x3e\n\t\t\x3c!--\t\t\t\t\ttype="radio">{{ t(\'appointments\', \'Remove empty slots only\') }}--\x3e\n\t\t\x3c!--\t\t\t</NcCheckboxRadioSwitch>--\x3e\n\t\t\x3c!--\t\t\t<NcCheckboxRadioSwitch--\x3e\n\t\t\x3c!--\t\t\t\t\tstyle="margin-left: -1em"--\x3e\n\t\t\x3c!--\t\t\t\t\tclass="ps-vert-spacing"--\x3e\n\t\t\x3c!--\t\t\t\t\t:checked.sync="state.remType"--\x3e\n\t\t\x3c!--\t\t\t\t\tvalue="both"--\x3e\n\t\t\x3c!--\t\t\t\t\tname="remove_type"--\x3e\n\t\t\x3c!--\t\t\t\t\ttype="radio">{{ t(\'appointments\', \'Remove empty and booked\') }}--\x3e\n\t\t\x3c!--\t\t\t</NcCheckboxRadioSwitch>--\x3e\n\t\t\x3c!--\t\t\t<NcButton--\x3e\n\t\t\x3c!--\t\t\t\t\tstyle="padding-left: 3em;padding-right: 3em;"--\x3e\n\t\t\x3c!--\t\t\t\t\t@click="removeOldAppointments"--\x3e\n\t\t\x3c!--\t\t\t\t\t:aria-label="t(\'appointments\', \'Start\')"--\x3e\n\t\t\x3c!--\t\t\t\t\tclass="srgdev-appt-sb-genbtn">{{ t(\'appointments\', \'Start\') }}--\x3e\n\t\t\x3c!--\t\t\t</NcButton>--\x3e\n\t\t\x3c!--\t\t</LabelAccordion>--\x3e\n\t\t\x3c!--\t\t<RemoveSimpleApptsModal v-if="state.remModalData!==null" :data.sync="state.remModalData"/>--\x3e\n\t</div>\n</template>\n\n<style scoped>\n.srgdev-appt-tz-cont {\n\tcolor: var(--color-text-lighter);\n\tfont-size: 85%;\n\tline-height: 1.1;\n\tmargin-bottom: 1.25em;\n}\n\n</style>'],sourceRoot:""}]);const r=i},8709:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.dir-items-empty[data-v-7ee3ba00] {\n\tfont-size: 175%;\n\ttext-align: center;\n\tpadding: 1.5em 0;\n\topacity: .5;\n\tfont-weight: bold\n}\n.dir-add-new-button[data-v-7ee3ba00] {\n\t/*noinspection CssInvalidPropertyValue*/\n\tposition: -webkit-sticky;\n\tposition: sticky;\n\tbottom: 0;\n\tmargin-top: 1.75em;\n\tmargin-bottom: .25em\n}\n.app-settings-section[data-v-7ee3ba00] {\n\tmargin-bottom: 40px;\n}\n","",{version:3,sources:["webpack://./src/components/settings-v2/SettingsDir.vue"],names:[],mappings:";AAgJA;CACA,eAAA;CACA,kBAAA;CACA,gBAAA;CACA,WAAA;CACA;AACA;AAEA;CACA,uCAAA;CACA,wBAAA;CACA,gBAAA;CACA,SAAA;CACA,kBAAA;CACA;AACA;AAEA;CACA,mBAAA;AACA",sourcesContent:['<script setup>\n\nimport {useSettingsStore, LOADING_DIR} from "../../stores/settings";\nimport {\n\tNcActionButton,\n\tNcActions, NcAppSettingsSection,\n\tNcButton,\n\tNcLoadingIcon\n} from "@nextcloud/vue";\nimport IconPencil from "vue-material-design-icons/Pencil.vue";\nimport IconPlus from "vue-material-design-icons/Plus.vue";\nimport IconDelete from "vue-material-design-icons/Delete.vue";\nimport DirItemEditorModal from "../modals/DirItemEditorModal.vue";\nimport {reactive, nextTick} from "vue";\nimport {INDEX} from "../../use/constants";\nimport ComboInput from "./ComboInput.vue";\nimport ComboCheckbox from "./ComboCheckbox.vue";\n\nconst settingsStore = useSettingsStore()\n\nconst state = reactive({\n\teditorIndex: INDEX.NONE,\n\tloadingIndex: INDEX.NONE,\n})\n\nconst addDirItem = () => {\n\tstate.editorIndex = INDEX.NEW\n}\n\nconst editDirItem = (index) => {\n\tnextTick(() => {\n\t\tstate.editorIndex = index\n\t})\n}\n\nconst deleteDirItem = (deleteIndex) => {\n\tstate.loadingIndex = deleteIndex\n\n\t// we are using clone/oldValue because we want the spinner while deleting\n\tconst clone = settingsStore.dirSettings.dirItems.map(item => ({...item}))\n\tsettingsStore.setOldValue(\'dirItems\', clone)\n\n\tconst data = settingsStore.dirSettings.dirItems.filter((_, index) => index !== deleteIndex)\n\n\tsettingsStore.setOne(\'dirItems\', data, false, (res) => {\n\t\tif (res !== null) {\n\t\t\tsettingsStore.dirSettings.dirItems = data\n\t\t}\n\t\tstate.loadingIndex = INDEX.NONE\n\t})\n}\n<\/script>\n\n<template>\n\t<div>\n\t\t<NcAppSettingsSection\n\t\t\t\tid="dir-items"\n\t\t\t\t:name="t(\'appointments\',\'Items/Links\')">\n\t\t\t<div class="ps-section-wrap">\n\t\t\t\t<div v-if="settingsStore.dirSettings.dirItems.length===0" class="dir-items-empty">\n\t\t\t\t\t{{ t(\'appointments\', \'no items found\') }}\n\t\t\t\t</div>\n\t\t\t\t<div v-for="(item,index) in settingsStore.dirSettings.dirItems" class="srgdev-appt-dir-pl">\n\t\t\t\t\t<NcActions\n\t\t\t\t\t\t\t:disabled="settingsStore.loading[LOADING_DIR]===true"\n\t\t\t\t\t\t\tmenuAlign="right"\n\t\t\t\t\t\t\tstyle="position: absolute"\n\t\t\t\t\t\t\tclass="srgdev-appt-dir-pl_actions">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<NcLoadingIcon v-if="state.loadingIndex===index" :size="20"/>\n\t\t\t\t\t\t</template>\n\t\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t\t:closeAfterClick="true"\n\t\t\t\t\t\t\t\t@click="editDirItem(index)">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconPencil :size="20"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t(\'appointments\', \'Edit\') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t\t<NcActionButton\n\t\t\t\t\t\t\t\t:closeAfterClick="true"\n\t\t\t\t\t\t\t\t@click="deleteDirItem(index)">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<IconDelete :size="20"/>\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t(\'appointments\', \'Delete\') }}\n\t\t\t\t\t\t</NcActionButton>\n\t\t\t\t\t</NcActions>\n\t\t\t\t\t<div class="srgdev-appt-dir-pl_title">{{ item.title }}</div>\n\t\t\t\t\t<div class="srgdev-appt-dir-pl_sub">{{ item.subTitle }}</div>\n\t\t\t\t\t<div class="srgdev-appt-dir-pl_url">{{ item.url }}</div>\n\t\t\t\t</div>\n\t\t\t\t<NcButton\n\t\t\t\t\t\tclass="dir-add-new-button"\n\t\t\t\t\t\t:aria-label="t(\'appointments\', \'Add New Item\')"\n\t\t\t\t\t\ttype="primary"\n\t\t\t\t\t\t:disabled="settingsStore.loading[LOADING_DIR]===true"\n\t\t\t\t\t\t@click="addDirItem">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<IconPlus :size="20"/>\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t(\'appointments\', \'Add New Item\') }}\n\t\t\t\t</NcButton>\n\t\t\t</div>\n\t\t</NcAppSettingsSection>\n\t\t<NcAppSettingsSection\n\t\t\t\tid="dir-page-settings"\n\t\t\t\t:name="t(\'appointments\',\'Page Settings\')">\n\t\t\t<div class="ps-section-wrap">\n\t\t\t\t<ComboInput\n\t\t\t\t\t\tprop-name="pageTitle"\n\t\t\t\t\t\t:label="t(\'appointments\', \'Page Header Title\')"\n\t\t\t\t\t\tsettings-type="dirSettings"\n\t\t\t\t\t\t:store="settingsStore"/>\n\t\t\t\t<ComboCheckbox\n\t\t\t\t\t\tclass="ps-vert-spacing"\n\t\t\t\t\t\tprop-name="useNcTheme"\n\t\t\t\t\t\t:label="t(\'appointments\', \'Auto Style\')"\n\t\t\t\t\t\tsettings-type="dirSettings"\n\t\t\t\t\t\t:store="settingsStore"/>\n\t\t\t\t\x3c!--\t\t\t\t<ComboCheckbox--\x3e\n\t\t\t\t\x3c!--\t\t\t\t\t\tclass="ps-vert-spacing"--\x3e\n\t\t\t\t\x3c!--\t\t\t\t\t\tprop-name="privatePage"--\x3e\n\t\t\t\t\x3c!--\t\t\t\t\t\t:label="t(\'appointments\', \'Private (visitors must be logged-in)\')"--\x3e\n\t\t\t\t\x3c!--\t\t\t\t\t\tsettings-type="dirSettings"--\x3e\n\t\t\t\t\x3c!--\t\t\t\t\t\t:store="settingsStore"/>--\x3e\n\t\t\t\t<ComboInput\n\t\t\t\t\t\tprop-name="pageStyle"\n\t\t\t\t\t\ttype="textarea"\n\t\t\t\t\t\t:label="t(\'appointments\', \'Style Override\')"\n\t\t\t\t\t\tplaceholder="&lt;style&gt;...&lt;/style&gt;"\n\t\t\t\t\t\tsettings-type="dirSettings"\n\t\t\t\t\t\t:store="settingsStore"/>\n\t\t\t</div>\n\t\t</NcAppSettingsSection>\n\t\t<DirItemEditorModal\n\t\t\t\tv-if="state.editorIndex!==INDEX.NONE"\n\t\t\t\t:index="state.editorIndex"\n\t\t\t\t@close-modal="state.editorIndex=INDEX.NONE"/>\n\t</div>\n</template>\n\n<style scoped>\n\n.dir-items-empty {\n\tfont-size: 175%;\n\ttext-align: center;\n\tpadding: 1.5em 0;\n\topacity: .5;\n\tfont-weight: bold\n}\n\n.dir-add-new-button {\n\t/*noinspection CssInvalidPropertyValue*/\n\tposition: -webkit-sticky;\n\tposition: sticky;\n\tbottom: 0;\n\tmargin-top: 1.75em;\n\tmargin-bottom: .25em\n}\n\n.app-settings-section {\n\tmargin-bottom: 40px;\n}\n</style>'],sourceRoot:""}]);const r=i},9006:(t,e,n)=>{var a=n(7865);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("c14b72be",a,!1,{})},9198:(t,e,n)=>{var a=n(6637);a.__esModule&&(a=a.default),"string"==typeof a&&(a=[[t.id,a,""]]),a.locals&&(t.exports=a.locals);(0,n(534).A)("7e4065f0",a,!1,{})},9377:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.reminder-action-checkbox[data-v-5f383f73] {\n\tmargin-top: -1em;\n\tmargin-bottom: .75em;\n\tmargin-left: .125em;\n}\n","",{version:3,sources:["webpack://./src/components/settings-v2/SectionReminders.vue"],names:[],mappings:";AAqGA;CACA,gBAAA;CACA,oBAAA;CACA,mBAAA;AACA",sourcesContent:['<script setup>\nimport {NcNoteCard} from "@nextcloud/vue";\nimport {useSettingsStore, readOnlyProps} from "../../stores/settings";\nimport ComboInput from "./ComboInput.vue";\nimport ComboCheckbox from "./ComboCheckbox.vue";\nimport ComboSelect from "./ComboSelect.vue";\nimport LabelAccordion from "../LabelAccordion.vue";\nimport {MODAL} from "../../use/constants";\n\nconst emit = defineEmits([\'show-settings-modal\'])\n\nconst settingsStore = useSettingsStore()\nconst settings = settingsStore.settings\n\nconst reminderOptions = [\n\t{value: "0", label: t(\'appointments\', \'Not set\')},\n\t{value: "3600", label: t(\'appointments\', \'1 hour\')},\n\t{value: "7200", label: t(\'appointments\', \'2 hours\')},\n\t{value: "14400", label: t(\'appointments\', \'4 hours\')},\n\t{value: "28800", label: t(\'appointments\', \'8 hours\')},\n\t{value: "86400", label: t(\'appointments\', \'24 hours\')},\n]\n\nif (settingsStore.k === true) {\n\treminderOptions.push(\n\t\t\t{value: "172800", label: t(\'appointments\', \'2 days\')},\n\t\t\t{value: "259200", label: t(\'appointments\', \'3 days\')},\n\t\t\t{value: "345600", label: t(\'appointments\', \'4 days\')},\n\t\t\t{value: "432000", label: t(\'appointments\', \'5 days\')},\n\t\t\t{value: "518400", label: t(\'appointments\', \'6 days\')},\n\t\t\t{value: "604800", label: t(\'appointments\', \'7 days\')},\n\t)\n}\n\nconst handleInterceptor = (data) => {\n\tif (settingsStore.k === true) {\n\t\treturn false\n\t}\n\temit(\'show-settings-modal\', {\n\t\ttype: MODAL.CONTRIBUTION,\n\t\tmessage: t(\'appointments\', "Multiple Reminders")\n\t})\n\treturn true\n}\n\n<\/script>\n\n<template>\n\t<div class="ps-section-wrap">\n\t\t<NcNoteCard\n\t\t\t\tv-if="readOnlyProps.bjm!==\'cron\' && readOnlyProps.bjm!==\'webcron\'"\n\t\t\t\t:heading="t(\'appointments\', \'Warning\')"\n\t\t\t\ttype="warning">\n\t\t\tYou are using <strong>AJAX</strong> scheduling method, which\n\t\t\tis the least reliable. Please consider <strong>Webcron</strong> or\n\t\t\t<strong>Cron</strong> scheduling methods. More information is available in\n\t\t\t<a style="text-decoration: underline" href="https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/background_jobs_configuration.html#parameters" target="_blank">Admin Manual: Cron jobs</a> section.\n\t\t</NcNoteCard>\n\t\t<NcNoteCard\n\t\t\t\tv-if="readOnlyProps.cliUrl===\'\'"\n\t\t\t\t:heading="t(\'appointments\', \'Warning\')"\n\t\t\t\ttype="warning">\n\t\t\tThe <strong>overwrite.cli.url</strong> parameter is set to an invalid URL,\n\t\t\t<strong>action links</strong> will not be included in the reminder emails. More information is available in\n\t\t\t<a style="text-decoration: underline" href="https://docs.nextcloud.com/server/latest/admin_manual/configuration_server/config_sample_php_parameters.html#proxy-configurations"\n\t\t\t\t target="_blank">Admin Manual</a>.\n\t\t</NcNoteCard>\n\n\t\t<div v-for="i in [0,1,2]" :key="i">\n\t\t\t<ComboSelect\n\t\t\t\t\t:label="(i+1) + \'. \' + t(\'appointments\', \'Time before appointment\')"\n\t\t\t\t\t:prop-name="\'reminders_data_\'+i+\'_seconds\'"\n\t\t\t\t\tdefault-value="0"\n\t\t\t\t\t:placeholder="t(\'appointments\', \'Not set\')"\n\t\t\t\t\t:options="reminderOptions"\n\t\t\t\t\t:click-interceptor="i===0?undefined:handleInterceptor"\n\t\t\t\t\t:store="settingsStore"/>\n\t\t\t<ComboCheckbox\n\t\t\t\t\tclass="reminder-action-checkbox"\n\t\t\t\t\t:label="t(\'appointments\', \'Add action links\')"\n\t\t\t\t\t:prop-name="\'reminders_data_\'+i+\'_actions\'"\n\t\t\t\t\t:click-interceptor="i===0?undefined:handleInterceptor"\n\t\t\t\t\t:store="settingsStore"/>\n\t\t</div>\n\t\t<ComboInput\n\t\t\t\tprop-name="reminders_moreText"\n\t\t\t\ttype="textarea"\n\t\t\t\t:label="t(\'appointments\', \'Additional reminder email text\')"\n\t\t\t\t:store="settingsStore"/>\n\n\t\t<LabelAccordion\n\t\t\t\tstyle="font-style: italic"\n\t\t\t\t:label="t(\'appointments\', \'Default Cron/Email Language: {langCode}\', {langCode: readOnlyProps.defaultLang})">\n\t\t\t<template #helpPopover>\n\t\t\t\tThis language is used for all system notification including Reminders.\n\t\t\t</template>\n\t\t</LabelAccordion>\n\t</div>\n</template>\n\n<style scoped>\n.reminder-action-checkbox {\n\tmargin-top: -1em;\n\tmargin-bottom: .75em;\n\tmargin-left: .125em;\n}\n</style>'],sourceRoot:""}]);const r=i},9439:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r});var a=n(4991),o=n.n(a),s=n(6314),i=n.n(s)()(o());i.push([t.id,"\n.wrapper-checkbox[data-v-2e4beec0] {\n\tposition: relative;\n}\n.wrapper-checkbox__help-padding[data-v-2e4beec0] {\n\tpadding-right: 20px;\n}\n.wrapper-checkbox-help[data-v-2e4beec0] {\n\tposition: absolute;\n\tright: 0;\n\ttop: 50%;\n\tmargin-top: -8px;\n}\n.wrapper-help-icon[data-v-2e4beec0] {\n\tcursor: pointer;\n\topacity: .5;\n}\n.wrapper-checkbox:hover .wrapper-help-icon[data-v-2e4beec0] {\n\topacity: 1;\n}\n.wrapper-help-content[data-v-2e4beec0] {\n\tpadding: .5em;\n\tmax-width: 32em;\n}\n.wrapper-checkbox[data-v-2e4beec0] .checkbox-radio-switch {\n\tdisplay: inline-flex;\n}\n","",{version:3,sources:["webpack://./src/components/settings-v2/ComboCheckbox.vue"],names:[],mappings:";AA8FA;CACA,kBAAA;AACA;AAEA;CACA,mBAAA;AACA;AAEA;CACA,kBAAA;CACA,QAAA;CACA,QAAA;CACA,gBAAA;AACA;AAEA;CACA,eAAA;CACA,WAAA;AACA;AAEA;CACA,UAAA;AACA;AAEA;CACA,aAAA;CACA,eAAA;AACA;AAEA;CACA,oBAAA;AACA",sourcesContent:['<script setup>\nimport PsCheckbox from "../PsCheckbox.vue";\nimport {computed, useSlots} from "vue";\nimport {NcPopover} from "@nextcloud/vue";\nimport IconInfo from "vue-material-design-icons/InformationOutline.vue";\n\nconst slots = useSlots()\nconst emit = defineEmits([\'value-updated\'])\n\nconst props = defineProps({\n\tpropName: {\n\t\ttype: String,\n\t\trequired: true,\n\t},\n\tstore: {\n\t\ttype: Object,\n\t\trequired: true\n\t},\n\tlabel: {\n\t\ttype: String,\n\t\trequired: true\n\t},\n\tsettingsType: {\n\t\ttype: String,\n\t\trequired: false,\n\t\tdefault: \'settings\'\n\t},\n\tdisabled: {\n\t\ttype: Boolean,\n\t\trequired: false,\n\t\tdefault: false\n\t},\n\tindeterminate: {\n\t\ttype: Boolean,\n\t\trequired: false,\n\t\tdefault: false\n\t},\n\tclickInterceptor: {\n\t\ttype: Function,\n\t\trequired: false\n\t}\n})\n\nconst settings = props.store[props.settingsType];\n\nconst isLoading = computed(() => props.store.loading[props.propName] === true)\n\n/**\n * @param {MouseEvent} evt\n */\nconst handleClick = (evt) => {\n\tif (props.store.k === false && props.clickInterceptor\n\t\t\t&& props.clickInterceptor({\n\t\t\t\tevent: evt,\n\t\t\t\tlabel: props.label,\n\t\t\t\tpropName: props.propName\n\t\t\t}) === true) {\n\t\tevt.stopPropagation()\n\t\tevt.preventDefault()\n\t\treturn false\n\t}\n}\n\n<\/script>\n\n<template>\n\t<div class="wrapper-checkbox"\n\t\t\t :class="{\'wrapper-checkbox__help-padding\':slots?.help}">\n\t\t<PsCheckbox\n\t\t\t\t:label="label"\n\t\t\t\t:checked="settings[propName]"\n\t\t\t\t:disabled="isLoading || disabled"\n\t\t\t\t:loading="isLoading"\n\t\t\t\t:indeterminate="indeterminate"\n\t\t\t\tclass="ps-settings-checkbox"\n\t\t\t\t@click.native.capture="handleClick"\n\t\t\t\t@update:checked="(value)=>{store.setOne(propName,value);emit(\'value-updated\',{propName: propName, value: value})}"/>\n\t\t<div v-if="slots?.help" class="wrapper-checkbox-help">\n\t\t\t<NcPopover>\n\t\t\t\t<template #trigger>\n\t\t\t\t\t<IconInfo class="wrapper-help-icon" :size="16"/>\n\t\t\t\t</template>\n\t\t\t\t<template>\n\t\t\t\t\t<div class="wrapper-help-content">\n\t\t\t\t\t\t<slot name="help"/>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</NcPopover>\n\t\t</div>\n\t</div>\n</template>\n\n<style scoped>\n\n.wrapper-checkbox {\n\tposition: relative;\n}\n\n.wrapper-checkbox__help-padding {\n\tpadding-right: 20px;\n}\n\n.wrapper-checkbox-help {\n\tposition: absolute;\n\tright: 0;\n\ttop: 50%;\n\tmargin-top: -8px;\n}\n\n.wrapper-help-icon {\n\tcursor: pointer;\n\topacity: .5;\n}\n\n.wrapper-checkbox:hover .wrapper-help-icon {\n\topacity: 1;\n}\n\n.wrapper-help-content {\n\tpadding: .5em;\n\tmax-width: 32em;\n}\n\n.wrapper-checkbox >>> .checkbox-radio-switch {\n\tdisplay: inline-flex;\n}\n</style>'],sourceRoot:""}]);const r=i}},s={};function i(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={id:t,exports:{}};return o[t].call(n.exports,n,n.exports,i),n.exports}i.m=o,e=[],i.O=(t,n,a,o)=>{if(!n){var s=1/0;for(c=0;c<e.length;c++){n=e[c][0],a=e[c][1],o=e[c][2];for(var r=!0,l=0;l<n.length;l++)(!1&o||s>=o)&&Object.keys(i.O).every((t=>i.O[t](n[l])))?n.splice(l--,1):(r=!1,o<s&&(s=o));if(r){e.splice(c--,1);var p=a();void 0!==p&&(t=p)}}return t}o=o||0;for(var c=e.length;c>0&&e[c-1][2]>o;c--)e[c]=e[c-1];e[c]=[n,a,o]},i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var n in e)i.o(e,n)&&!i.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},i.f={},i.e=t=>Promise.all(Object.keys(i.f).reduce(((e,n)=>(i.f[n](t,e),e)),[])),i.u=t=>"chunks/appt."+t+".535a5907609d62c82dbb.js",i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n={},a="appointments:",i.l=(t,e,o,s)=>{if(n[t])n[t].push(e);else{var r,l;if(void 0!==o)for(var p=document.getElementsByTagName("script"),c=0;c<p.length;c++){var d=p[c];if(d.getAttribute("src")==t||d.getAttribute("data-webpack")==a+o){r=d;break}}r||(l=!0,(r=document.createElement("script")).charset="utf-8",r.timeout=120,i.nc&&r.setAttribute("nonce",i.nc),r.setAttribute("data-webpack",a+o),r.src=t),n[t]=[e];var m=(e,a)=>{r.onerror=r.onload=null,clearTimeout(u);var o=n[t];if(delete n[t],r.parentNode&&r.parentNode.removeChild(r),o&&o.forEach((t=>t(a))),e)return e(a)},u=setTimeout(m.bind(null,void 0,{type:"timeout",target:r}),12e4);r.onerror=m.bind(null,r.onerror),r.onload=m.bind(null,r.onload),l&&document.head.appendChild(r)}},i.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.p="/js/",(()=>{var t={910:0};i.f.j=(e,n)=>{var a=i.o(t,e)?t[e]:void 0;if(0!==a)if(a)n.push(a[2]);else{var o=new Promise(((n,o)=>a=t[e]=[n,o]));n.push(a[2]=o);var s=i.p+i.u(e),r=new Error;i.l(s,(n=>{if(i.o(t,e)&&(0!==(a=t[e])&&(t[e]=void 0),a)){var o=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;r.message="Loading chunk "+e+" failed.\n("+o+": "+s+")",r.name="ChunkLoadError",r.type=o,r.request=s,a[1](r)}}),"chunk-"+e,e)}},i.O.j=e=>0===t[e];var e=(e,n)=>{var a,o,s=n[0],r=n[1],l=n[2],p=0;if(s.some((e=>0!==t[e]))){for(a in r)i.o(r,a)&&(i.m[a]=r[a]);if(l)var c=l(i)}for(e&&e(n);p<s.length;p++)o=s[p],i.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return i.O(c)},n=self.webpackChunkappointments=self.webpackChunkappointments||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),i.nc=void 0;var r=i.O(void 0,[96],(()=>i(8045)));r=i.O(r)})();
//# sourceMappingURL=script.js.map